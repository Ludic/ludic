{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3fc3a2ba6b016375b3e4","webpack:///./src/components/util/util.js","webpack:///./src/components/app/ludic.js","webpack:///./src/components/canvas/canvas.js","webpack:///./src/components/ui/HUDElement.js","webpack:///./src/components/base/asset.js","webpack:///./src/components/base/assetManager.js","webpack:///./src/components/base/camera.js","webpack:///./src/components/base/imageAsset.js","webpack:///./src/components/engine/Vector2.js","webpack:///./src/components/input/gamepadController.js","webpack:///./src/components/input/inputController.js","webpack:///./src/components/screen/screenManager.js","webpack:///./src/components/sprite/BaseSprite.js","webpack:///./src/components/ui/Dialog.js","webpack:///./src/components/app/LudicApp.js","webpack:///./src/components/patches/object.js","webpack:///./src/components/patches/path2D.js","webpack:///./src/components/screen/screen.js","webpack:///./src/components/sprite/MultiSprite.js","webpack:///./src/components/ui/Hud.js","webpack:///./src/components/ui/MenuDialog.js","webpack:///./src/components/ui/Text.js","webpack:///./src/components/util/utilities.js","webpack:///./src/components/base/imageAssetLoader.js","webpack:///./src/components/input/keyCodeMap.js","webpack:///./src/components/util/privateProperty.js","webpack:///./src/main.js"],"names":["_config","canvas","dimension","console","log","Util","hex","opacity","replace","r","parseInt","substring","g","b","result","val","places","c","i","Math","round","self","ns","pattern","logNames","logValues","undefined","name","RegExp","match","arguments","length","HTMLElement","key","hasOwnProperty","obj","extend","config","configure","scope","param","def","params","split","Object","resolve","value","l","prop","e","configureConsole","_log","Ludic","extensions","Canvas","setupCanvas","readConfig","focus","canvasConfig","document","querySelector","warn","setAttribute","getAttribute","setElement","el","width","window","innerWidth","height","innerHeight","addEventListener","apply","removeEventListener","getContext","clearColor","context","fillStyle","clearRect","fillRect","HUDElement","delta","Asset","url","type","options","reject","am","data","AssetManager","assets","loadQueue","promiseQueue","loaders","addLoader","overwrite","promise","asset","NewAsset","push","loading","then","onAssetResolve","bind","onAssetReject","getAsset","Promise","reason","finalPromise","all","assetsLoaded","shift","load","onAssetsLoadedCallback","callback","loader","destroy","fileTypes","forEach","DEFAULT_PTM","DEFAULTS","inverseY","inverseX","x","y","ptm","Camera","assign","option","canva","viewCenterPixel","singleWorldPoint","singlePixelPoint","offset","futurePos","updateEnvironmentVariables","camera","ctx","setTransform","strokeStyle","beginPath","moveTo","lineTo","stroke","ent","chaseMethod","chaseEntity","pixelPoint","_getWorldPointFromPixelPoint_x","_getWorldPointFromPixelPoint_y","worldPoint","_getPixelPointFromWorldPoint_x","_getPixelPointFromWorldPoint_y","vector2","instantaneous","fraction","currentViewCenterWorld","getViewCenterWorld","toMove","get_x","get_y","moveCenterBy","setOffset","setViewCenterWorld","getWorldPointFromPixelPoint","myRound","bounds","w","h","translate","getOffsetX","getOffsetY","getPTM","scale","lineWidth","ImageAsset","Image","onload","src","Vector2","ps4Mapping","buttons","axes","sticks","lx","ly","rx","ry","gamepadMaps","gamepadsAxisDeadZone","gamepadsConfig","GamepadController","initGamepads","inputController","gamepads","lastButtonStates","lastAxisStates","gamepad","index","id","getGamepads","gps","navigator","gp","_stepGamepads","ix","lastState","getLastState","pressed","gamepadButtonEvent","setLastState","axis","dz","getDeadZone","getLastAxisState","gamepadAxisEvent","zeroed","gpIndex","state","gamepadIndex","deadZone","button","down","dispatchEvent","onGamepadButtonEvent","GamepadButtonEvent","evt","enabled","func","keyIdentifier","bndr","binder","call","stopPropagation","listeners","gamepadId","axisIndex","setLastAxisState","gpMap","getGamepadMap","stick","GamepadAxisEvent","values","getValueByAxisId","onGamepadAxis","keyCode","Gamepad","prototype","axisId","indexOf","defaultKeyConfig","preventDefault","mousePosPixel","prevMousePosPixel","InputController","inputControllers","initKeys","initMouse","addInputController","install","listener","alsoAdd","InputEventListener","addInputListener","splice","allKeys","dir","logAllKeys","keyHandler","thisArg","handler","event","args","cfg","keyConfig","Array","isArray","keys","modifiers","direction","method","_once","shiftKey","altKey","ctrlKey","_execCommand","once","onMouseEvent","updateMousePos","rect","getBoundingClientRect","clientX","left","clientY","top","controller","update","stripModifiers","mods","ret","mod","importKeyConfig","_key","KeyCodeMap","map","conf","_loadListener","methods","avail","code","Number","isNaN","_code","arr","_stack","_listeners","ScreenManager","idIncrementer","getNewId","set","Proxy","get","target","ScreenEventListener","stack","screen","_step","_isFinished","onScreenFinished","_finalData","$manager","$id","onAddedToManager","onScreenAdded","pop","onRemovedFromManager","onScreensRemoved","onWarnPopScreen","findIndex","s","screensRemoved","slice","reverse","addScreenEventListener","manager","replaced","RIGHT","LEFT","BaseSprite","image","framesX","framesY","offsetX","offsetY","getImage","frames","frameWidth","frameHeight","totalFrames","scaleToWidth","currentFrameIndex","parseSpriteSheet","setFrame","frame","sx","sy","frameIndex","pos","use","useShadow","drawWidth","drawHeight","save","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawImage","restore","valid_positions_x","valid_positions_y","Dialog","position","positionX","positionY","backgroundColor","textColor","title","visible","borderColor","borderWidth","_x","_y","__calcPosition","show","getPosition","_drawBorder","_drawBackground","font","fillText","bw","closePath","hide","_positionX","_positionY","c_width","c_height","__getXfromPositionX","__getYfromPositionY","posX","posY","_offsetX","_offsetY","positions","__validatePositionX","__validatePositionY","LudicApp","setConfig","screenManager","input","util","devmode","running","lastTime","Date","now","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","_animate","time","_time","updateFunction","defineProperty","enumerable","path","reduce","prev","curr","Path2D","p","arc","ellipse","Screen","rest","onDestroy","MultiSprite","start","count","_ix","end","slices","sliceName","states","setSlice","optScale","fl","df","floor","axesLength","HUD","$refs","elements","resetTransform","drawAxes","render","element","ref","MenuDialog","menuItems","item","MenuItem","newEventListener","up","selectPreviousItem","selectNextItem","toggleMenuOpen","selectedItemIndex","selectItem","selectedItem","deselect","select","keyDown","toggle","text","selected","Text","fontFamily","fontSize","fontSizeUnit","color","drawStyle","adjustOrigin","_adjustOrigin","setFontSize","setPosition","__fontSize","strokeText","_fontSize","setPositionX","setPositionY","unit","parseFloat","classTypeOf","typeToCheck","getPrototypeOf","Function","ImageAssetLoader","PrivateProperty","weakMap","WeakMap","ctor","setArgs"],"mappings":"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","file":"ludic.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Ludic\"] = factory();\n\telse\n\t\troot[\"Ludic\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3fc3a2ba6b016375b3e4","\nvar _config = {\n  canvas: {\n    dimension: '2d',\n  },\n  console: {\n    log: true\n  }\n};\n\nclass Util {\n\n  static convertHex(hex,opacity){\n    hex = hex.replace('#','');\n    var r = parseInt(hex.substring(0,2), 16);\n    var g = parseInt(hex.substring(2,4), 16);\n    var b = parseInt(hex.substring(4,6), 16);\n\n    var result = 'rgba('+r+','+g+','+b+','+opacity+')';\n    return result;\n  }\n\n  static myRound(val,places) {\n    var c = 1;\n    for (var i = 0; i < places; i++)\n      c *= 10;\n    return Math.round(val*c)/c;\n  }\n\n  static using(self, ns, pattern, logNames, logValues){\n    self = self || this;\n    if (pattern == undefined) {\n        // import all\n        for (var name in ns) {\n            if(!logNames){\n              self[name] = ns[name];\n            } else {\n              console.log(name, logValues?ns[name]:'');\n            }\n        }\n    } else {\n        if (typeof(pattern) == 'string') {\n            pattern = new RegExp(pattern);\n        }\n        // import only stuff matching given pattern\n        for (var name in ns) {\n            if (name.match(pattern)) {\n              if(!logNames){\n                self[name] = ns[name];\n              } else {\n                console.log(name, logValues?ns[name]:'');\n              }\n            }\n        }\n    }\n  }\n\n  static extend() {\n    for (var i = 1; i < arguments.length; i++){\n\n      if(typeof arguments[i] === 'object' && !(arguments[i] instanceof HTMLElement)){\n        for (var key in arguments[i]){\n          if (arguments[i].hasOwnProperty(key)){\n            arguments[0] = arguments[0] || {};\n            var obj = this.extend(arguments[0][key], arguments[i][key]);\n            arguments[0][key] = obj;\n          }\n        }\n      } else {\n        arguments[0] = arguments[i];\n      }\n\n    }\n    return arguments[0];\n  }\n\n  static setConfig(config){\n    _config = this.extend(_config, config);\n    this.configure();\n  }\n\n  static getConfig(){\n    return _config;\n  }\n\n  static readConfig(scope, param = '', def = undefined){\n    let params = param ? param.split('.') : [];\n    let obj = _config[scope];\n\n    obj = Object.resolve(param, obj)\n    if(obj==null){\n      obj = def\n    }\n    return obj;\n  }\n\n  static setParam(scope, param, value){\n    var params = param.split('.');\n\n    var obj;\n\n    try {\n      obj = _config[scope] = _config[scope] || {};\n\n      for(var i=0,l=params.length; i<l; i++){\n        // obj = obj[params[i]];\n        var prop = params[i];\n        obj = obj[prop] = obj[prop] || (i==l-1) ? value : {};\n      }\n    } catch (e) {\n      obj = null;\n    }\n\n    this.configure();\n  }\n\n  static configure(){\n    this.configureConsole();\n  }\n\n  static configureConsole(){\n\n    if(!_config.console.log){\n      console._log = console.log;\n      console.log = function(){};\n    }\n  }\n\n}\n\nexport default Util;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/util.js","\n\nclass Ludic {\n  constructor() {\n    this.extensions = {};\n  }\n}\n\nexport default new Ludic();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/ludic.js","import Util from '../util/util';\n\nclass Canvas {\n  constructor() {\n    this.setupCanvas();\n    this.config = Util.readConfig('canvas');\n    this.focus();\n\n  }\n\n  setupCanvas(){\n    let canvasConfig = Util.readConfig('el')\n    let canvas;\n\n    if(typeof canvasConfig === 'string'){\n      canvas = document.querySelector(canvasConfig)\n    } else if(canvasConfig instanceof HTMLElement){\n      canvas = canvasConfig\n    } else {\n      console.warn(`Ludic::Canvas: Unknown property type passed as 'el'.`, canvasConfig);\n    }\n\n    if(canvas != null){\n      // make sure canvas has 'tabindex' attr for key binding\n      canvas.setAttribute('tabindex', canvas.getAttribute('tabindex') || '1');\n      this.setElement(canvas);\n    } else {\n      console.warn(`Ludic::Canvas: Ludic does not have a canvas to bind to. Please supply one with the 'el' config property.`);\n    }\n  }\n\n  resize(){\n    this.el.width = window.innerWidth;\n    this.el.height = window.innerHeight;\n  }\n\n  focus(){\n    this.el.focus();\n  }\n\n  getElement() {\n    return this.el;\n  }\n\n  setElement(canvas){\n    this.el = canvas;\n  }\n\n  addEventListener(){\n    this.el.addEventListener.apply(this.el, arguments);\n  }\n\n  removeEventListener(){\n    this.el.removeEventListener.apply(this.el, arguments);\n  }\n\n  getContext(dimension = this.config.dimension){\n    return this.el.getContext(dimension);\n  }\n\n  height(){\n    return this.el.height;\n  }\n\n  width(){\n    return this.el.width;\n  }\n\n  /**\n   * Helper function to clear the current context at full width-height\n   * @param {String} clearColor - color to clear the screen with\n   */\n  clear(clearColor = 'white', context = this.getContext()){\n    context.fillStyle = clearColor\n    context.clearRect(0, 0, this.width(), this.height())\n    context.fillRect(0, 0, this.width(), this.height())\n  }\n}\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/canvas/canvas.js","\nexport default class HUDElement {\n  constructor() {\n\n  }\n\n  render(delta){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/HUDElement.js","\n\nclass Asset {\n  constructor(name, url, type, options) {\n    this.name = name;\n    this.url = url;\n    this.type = type;\n    this.options = options || {};\n\n  }\n\n  load(){\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  onAssetResolve(am){\n  }\n\n  onAssetReject(am){\n\n  }\n\n  destroy(){\n    this.name = null;\n    this.url = null;\n    this.type = null;\n    this.options = null;\n    this.data = null;\n  }\n}\n\nexport default Asset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/asset.js","// import ImageAsset from './imageAsset';\n// import RubeAsset from './rubeAsset';\n// import RubeImageAsset from './rubeImageAsset';\nimport ImageLoader from './imageAssetLoader';\n\nclass AssetManager {\n  constructor() {\n    this.assets = {};\n\n    this.loadQueue = [];\n    this.promiseQueue = [];\n    this.loaders = {};\n\n    this.addLoader('image', ImageLoader);\n  }\n\n  loadResource(name, url, type, options, overwrite){\n    // let promise = Promise.reject({\n    //   reason: \"resource load failed\",\n    //   name,\n    //   url,\n    //   type,\n    //   options,\n    //   overwrite\n    // });\n    let promise = null;\n    // first check if we have the asset\n    if(!this.assets[name] || overwrite){\n      var asset = this.NewAsset(name, url, type, options);\n      if(asset){\n        this.loadQueue.push(asset);\n\n        this.loading = true;\n\n        promise = asset.promise.then(this.onAssetResolve.bind(this), this.onAssetReject.bind(this));\n      }\n    }\n    return promise;\n  }\n\n  getAsset(name){\n    return this.assets[name];\n  }\n\n  getImage(name){\n    var asset = this.getAsset(name);\n\n    switch (asset.type) {\n      case 'image':\n      case 'rubeImage':\n        return asset.data;\n        break;\n      default:\n        return null;\n    }\n  }\n\n  getData(name){\n    return this.getAsset(name).data;\n  }\n\n  onAssetResolve(asset){\n    this.assets[asset.name] = asset;\n    asset.onAssetResolve(this);\n    return asset;\n  }\n\n  onAssetReject(){\n    console.log('rejected: ',arguments);\n    return Promise.reject({\n      reason: 'onAssetReject'\n    });\n  }\n\n  isLoading(){\n    return this.loading;\n  }\n\n  step(){\n\n    if(this.loadQueue.length==0){\n      if(!this.finalPromise){\n        this.finalPromise = Promise.all(this.promiseQueue).then(()=>{\n          if(this.finalPromise){ // [tries to*] assures that this is not called prematurely if an asset is added late\n            this.assetsLoaded.apply(this, arguments);\n            this.promiseQueue = []; // reset promise queue to free objects;\n          }\n        });\n      }\n    } else {\n      this.finalPromise = null;\n      var asset = this.loadQueue.shift();\n      this.promiseQueue.push(asset.promise);\n      asset.load();\n    }\n\n  }\n\n  assetsLoaded(){\n    // console.log('all assets loaded: ',arguments);\n    if(this.onAssetsLoadedCallback){\n      this.onAssetsLoadedCallback(this);\n    }\n    this.loading = false;\n  }\n\n  setOnAssetsLoadedCallback(callback){\n    this.onAssetsLoadedCallback = callback;\n  }\n\n  NewAsset(name, url, type, options){\n    type = type || 'image';\n    // switch (type) {\n    //   case 'image':\n    //     return new ImageAsset(name, url, type, options);\n    //     break;\n    //   case 'rube':\n    //     return new RubeAsset(name, url, type, options);\n    //     break;\n    //   case 'rubeImage':\n    //     return new RubeImageAsset(name, url, type, options);\n    //     break;\n    //   default:\n    //     return null;\n    // }\n\n    let loader = this.loaders[type];\n\n    if(loader){\n      return loader.load(name, url, type, options);\n    } else {\n      return null;\n    }\n  }\n\n  destroyAsset(asset){\n    delete this.assets[asset.name];\n    asset.destroy();\n  }\n\n  addLoader(fileTypes, loader){\n    if(typeof fileTypes === 'string'){\n      fileTypes = [fileTypes];\n    }\n\n    fileTypes.forEach((type)=>{\n      this.loaders[type] = loader;\n    });\n  }\n}\n\nexport default new AssetManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/assetManager.js","import Util from '../util/util';\nimport Vector2 from '../engine/Vector2';\nimport Canvas from '../canvas/canvas';\nimport Ludic from '../app/ludic';\n\nvar DEFAULT_PTM = 32;\n\nconst DEFAULTS = {\n  inverseY: true,\n  inverseX: false,\n  x: 0,\n  y: 0,\n  ptm: DEFAULT_PTM,\n}\n\nclass Camera {\n\n  /**\n   * `new Camera(options)`\n   * @param {object} [options] - options object\n   * @param {boolean} [options.inverseY=true] - make 'y' axis point up\n   * @param {boolean} [options.inverseX=false] - make 'x' axis point left\n   * @param {number} [options.x=0] - 'x' coordinate to start the camera\n   * @param {number} [options.y=0] - 'y' coordinate to start the camera\n   * @param {number} [options.width=Ludic.canvas.width()] - width of the camera view\n   * @param {number} [options.height=Ludic.canvas.height()] - height of the camera view\n   *\n   * `new Camera({Canvas})`\n   * @param {Canvas} [canvas] - optional canvas to provide dimensions\n   *\n   * `new Camera(ptm)` - assumes fill canvas width/height\n   * @param {number} [ptm] - pixels to meters scaling factor\n   *\n   * `new Camera(width,height)`\n   * @param {number} [width] - width of the camera view\n   * @param {number} [height] - height of the camera view\n   *\n   * `new Camera(x,y,width,height)`\n   * @param {number} [x] - 'x' coordinate to start the camera\n   * @param {number} [y] - 'y' coordinate to start the camera\n   * @param {number} [width] - width of the camera view\n   * @param {number} [height] - height of the camera view\n   */\n  constructor(){\n    let options = Object.assign({},DEFAULTS,{\n      width: Ludic.canvas.width(),\n      height: Ludic.canvas.height(),\n    });\n    if(arguments.length === 1){\n      if(typeof arguments[0] === 'object'){\n        if(arguments[0] instanceof Canvas){\n          options.width = canvas.width();\n          option.height = canva.height();\n        } else {\n          // options argument\n          options = Object.assign(options, arguments[0])\n        }\n      } else if(typeof arguments[0] === 'number'){\n        // arg is ptm\n        options.ptm = arguments[0];\n      } else {\n        console.warn(`Camera::Unknown single argument '${typeof arguments[0]}'.`, arguments);\n      }\n    } else if(arguments.length === 2) {\n      // width and height\n      let [width, height] = arguments;\n      options.width = width;\n      options.height = height;\n    } else if(arguments.length === 4){\n      // x,y,width,height\n      let [x,y,width,height] = arguments;\n      options.x = x;\n      options.y = y;\n      options.width = width;\n      options.height = height;\n    } else if(arguments.length !== 0) {\n      console.warn(`Camera::Unknown arguments.`, arguments);\n    }\n\n    // apply the options\n    this.x = options.x;\n    this.y = options.y;\n    this.width = options.width;\n    this.height = options.height;\n    this.inverseX = options.inverseX;\n    this.inverseY = options.inverseY;\n    this.ptm = options.ptm;\n\n    // setup variables\n    this.viewCenterPixel = {\n      x: 0,\n      y: 0\n    };\n    this.singleWorldPoint = {\n      x:0,\n      y:0\n    };\n    this.singlePixelPoint = {\n      x:0,\n      y:0\n    };\n    this.offset = {\n      x:0,\n      y:0\n    };\n    this.futurePos = new Vector2(0,0);\n\n    this.updateEnvironmentVariables();\n    window.addEventListener('resize', this.updateEnvironmentVariables.bind(this), false);\n\n    window.camera = this;\n  }\n\n  getCanvas(){\n    return this.canvas;\n  }\n\n\n  draw(ctx){\n\n    this.setTransform(ctx);\n\n  }\n\n  drawAxes(ctx) {\n    ctx.strokeStyle = 'rgb(192,0,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(1, 0);\n    ctx.stroke();\n    ctx.strokeStyle = 'rgb(0,192,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(0, 1);\n    ctx.stroke();\n  }\n\n  setChaseEntity(ent,chaseMethod){\n    this.chaseEntity = ent;\n    this.chaseMethod = chaseMethod;\n  }\n\n  setChaseMethod(chaseMethod){\n    this.chaseMethod = chaseMethod;\n  }\n\n  getWorldPointFromPixelPoint(pixelPoint) {\n    this.singleWorldPoint.x = this._getWorldPointFromPixelPoint_x(pixelPoint.x)\n    this.singleWorldPoint.y = this._getWorldPointFromPixelPoint_y(pixelPoint.y);\n    return this.singleWorldPoint;\n  }\n\n  _getWorldPointFromPixelPoint_x(x){\n    // let inv = (this.offset.x - x) / this.ptm;\n    // let reg = (x - this.offset.x) / this.ptm;\n    return (this.inverseX ? (this.offset.x - x) : (x - this.offset.x)) / this.ptm\n  }\n\n  _getWorldPointFromPixelPoint_y(y){\n    // let inv = (y - (this.height - this.offset.y)) / this.ptm;\n    // let reg = ((this.height - this.offset.y) - y) / this.ptm;\n    return (this.inverseY ? (y - (this.height - this.offset.y)) : ((this.height - this.offset.y) - y)) / this.ptm\n  }\n\n  getPixelPointFromWorldPoint(worldPoint){\n    this.singlePixelPoint.x = this._getPixelPointFromWorldPoint_x(worldPoint.x);\n    this.singlePixelPoint.y = this._getPixelPointFromWorldPoint_y(worldPoint.y);\n    return this.singlePixelPoint;\n  }\n\n  _getPixelPointFromWorldPoint_x(x){\n    // let reg = (x*this.ptm) + this.offset.x;\n    // let inv = this.offset.x - (x*this.ptm);\n    return this.inverseX ? (this.offset.x - (x*this.ptm)) : ((x*this.ptm) + this.offset.x);\n  }\n\n  _getPixelPointFromWorldPoint_y(y){\n    // let inv = (y*this.ptm) + (this.height - this.offset.y);\n    // let reg = (this.height - this.offset.y) - (y*this.ptm);\n    return this.inverseY ? ((y*this.ptm) + (this.height - this.offset.y)) : ((this.height - this.offset.y) - (y*this.ptm));\n  }\n\n  setViewCenterWorld(vector2, instantaneous, fraction) {\n    var currentViewCenterWorld = this.getViewCenterWorld();\n    var toMove = {};\n    toMove.x = vector2.get_x() - currentViewCenterWorld.x;\n    toMove.y = vector2.get_y() - currentViewCenterWorld.y;\n    this.moveCenterBy(toMove, instantaneous, fraction);\n  }\n\n  centerWorldToCamera(){\n    // this.setViewCenterWorld(new Vector2(), true);\n    this.setOffset(this.viewCenterPixel);\n  }\n\n  centerWorldToTopLeft(){\n    this.setViewCenterWorld(new Vector2(), true);\n  }\n\n  getViewCenterWorld(){\n    return this.getWorldPointFromPixelPoint( this.viewCenterPixel );\n  }\n\n  moveCenterBy(toMove,instantaneous, fraction){\n    fraction = fraction || instantaneous ? 1 : 0.25;\n    this.offset.x -= Util.myRound(fraction * toMove.x * this.ptm, 0);\n    this.offset.y += Util.myRound(fraction * toMove.y * this.ptm, 0);\n  }\n\n  updateEnvironmentVariables(){\n    this.viewCenterPixel = {\n      x: this.width / 2,\n      y: this.height / 2\n    };\n  }\n\n  getViewCenterPixel(){\n    return this.viewCenterPixel\n  }\n\n  getViewportBounds(){\n    var bounds = {\n      x: this._getWorldPointFromPixelPoint_x(0),\n      y: this._getWorldPointFromPixelPoint_y(0),\n      w: this._getWorldPointFromPixelPoint_x(this.width),\n      h: this._getWorldPointFromPixelPoint_y(this.height),\n    }\n    return bounds;\n  }\n\n  getPTM(){\n    return this.ptm;\n  }\n\n  setPTM(ptm){\n    this.ptm = ptm;\n  }\n\n  getOffset(){\n    return this.offset;\n  }\n\n  getOffsetX(){\n    return this.offset.x;\n  }\n\n  getOffsetY(){\n    return this.offset.y;\n  }\n\n  setOffset(obj, y){\n    if(typeof obj === 'object' && !y){\n      this.offset.x = obj['x'] || 0;\n      this.offset.y = obj['y'] || 0;\n    } else if(typeof obj === 'number' && typeof y === 'number'){\n      this.offset.x = obj;\n      this.offset.y = y;\n    }\n  }\n\n  setTransform(ctx){\n    ctx.translate(this.getOffsetX(), this.getOffsetY());\n    let ptm = this.getPTM();\n    // apply the scaling factor and inverses\n    ctx.scale(this.inverseX ? -ptm : ptm, this.inverseY ? -ptm : ptm);\n    ctx.lineWidth /= ptm;\n  }\n\n  resetTransform(ctx){\n    let ptm = this.getPTM();\n    // ctx.scale(1 / this.getPTM(),1 / this.getPTM());\n    ctx.scale(this.inverseX ? (-1 / ptm) : (1 / ptm), this.inverseY ? (-1 / ptm) : (1 / ptm));\n    ctx.lineWidth *= ptm;\n    ctx.translate(-this.getOffsetX(), -this.getOffsetY());\n  }\n}\n\n\nexport default Camera;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/camera.js","import Asset from './asset';\n\nclass ImageAsset extends Asset {\n  constructor(name, url, type, options) {\n    super(name, url, type || 'image', options);\n\n    this.data = new Image();\n    this.promise = new Promise((resolve,reject)=>{\n      this.data.onload = this.onload(resolve,reject);\n    });\n\n  }\n\n  load(){\n    this.data.src = this.url;\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  destroy(){\n\n  }\n}\n\nexport default ImageAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAsset.js","\n\nexport default class Vector2 {\n  constructor(x = 0,y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  get_x(){\n    return this.x;\n  }\n  get_y(){\n    return this.y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/engine/Vector2.js","let ps4Mapping = {\n  buttons: ['cross','circle','square','triangle','l1','r1','l2','r2','extra','start','l3','r3','up','down','left','right','home','select'],\n  axes: ['lx','ly','rx','ry'],\n  sticks: {\n    lx:'leftStick',\n    ly:'leftStick',\n    rx:'rightStick',\n    ry:'rightStick'\n  }\n};\n\nlet gamepadMaps = {\n  'Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)':ps4Mapping // ps4 controller\n};\n\nlet gamepadsAxisDeadZone = 0.08;\nlet gamepadsConfig = {};\n\nclass GamepadController {\n  constructor() {\n    this.initGamepads();\n  }\n\n  install(inputController){\n    this.inputController = inputController;\n  }\n\n  initGamepads(){\n    this.gamepads = {};\n    this.lastButtonStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    this.lastAxisStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    window.addEventListener(\"gamepadconnected\", (e)=>{\n      console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\n        e.gamepad.index, e.gamepad.id,\n        e.gamepad.buttons.length, e.gamepad.axes.length);\n      console.log(e.gamepad);\n      this.getGamepads();\n    });\n    window.addEventListener(\"gamepaddisconnected\", (e)=>{\n      console.log('Gamepad disconnected: ',e);\n      this.getGamepads();\n    });\n\n    // window.addEventListener('gamepadbuttondown', (e)=>{\n    //   console.log('gamepad button down: ',e);\n    // });\n    //\n    // window.addEventListener('gamepadbuttonup', (e)=>{\n    //   console.log('gamepad button up: ',e);\n    // });\n  }\n\n  getGamepads(){\n    var gps = navigator.getGamepads() || [];\n    var gp;\n    for(var i=0;i<gps.length;i++){\n      gp = gps[i];\n      if(gp){\n        this.gamepads[gp.index] = gp;\n      }\n    }\n    return this.gamepads;\n  }\n\n  update(){\n    this._stepGamepads();\n  }\n\n  _stepGamepads(){\n    var gps = this.getGamepads();\n    var gp;\n    for(var i in gps){\n      gp = gps[i]; // gamepad instance from api\n      if(gp){\n\n        // for each gamepad that the api reads; poll the state of each button,\n        //  sending an event when pressed\n        gp.buttons.forEach( (b,ix)=>{\n          // get the last known state of the button\n          var lastState = this.getLastState(i,ix);\n          b.index = ix; // tell the button what it's index is\n          b.lastState = lastState;\n\n          if(b.pressed){\n            // if pressed, create a button event and set the buttons last known state\n            this.gamepadButtonEvent(gp,b,true);\n            this.setLastState(i,ix,true);\n          } else {\n            if(lastState) {\n              // if the button is not pressed but its last state was pressed, create a 'button up' event\n              if(lastState.pressed) {\n                this.gamepadButtonEvent(gp,b,false);\n              }\n            }\n            // set the buttons last known state for not pressed\n            this.setLastState(i,ix,false);\n          }\n        });\n\n        // do the same thing for each of the axis (analog sticks)\n        // loop through each and poll state\n        gp.axes.forEach( (value,axis)=>{\n          // get the deadZone associated with each axis\n          var dz = this.getDeadZone(axis);\n          // get the last known state for the axis\n          var lastState = this.getLastAxisState(i,axis);\n\n          // if the value of the axis is withing the bounds of the deadzone\n          //  create an axis event\n          if( value < -dz || value > dz ){\n            this.gamepadAxisEvent(gp,axis,value,false);\n          } else if(!lastState.zeroed){\n            this.gamepadAxisEvent(gp,axis,0,true);\n          }\n        });\n      } else {\n        console.log('no gamepad!',i);\n      }\n    }\n  }\n\n  getLastAxisState(gpIndex,axis){\n    var b = this.lastAxisStates[gpIndex][axis] || {zeroed:true};\n    return b;\n  }\n\n  setLastAxisState(gpIndex,axis,state){\n    this.lastAxisStates[gpIndex][axis] = {zeroed:state};\n  }\n\n  getDeadZone(gamepadIndex){\n    if(gamepadsConfig.hasOwnProperty(gamepadIndex) && gamepadsConfig[gamepadIndex].hasOwnProperty(deadZone)){\n      return gamepadsConfig[gamepadIndex].deadZone;\n    }\n    return gamepadsAxisDeadZone;\n  }\n\n  setDeadZone(deadZone,gamepadIndex){\n    if(gamepadIndex !== null && gamepadIndex !== undefined){\n      if(gamepadsConfig.hasOwnProperty(gamepadIndex)){\n        gamepadsConfig[gamepadIndex].deadZone = deadZone;\n      } else {\n        gamepadsConfig[gamepadIndex] = {deadZone: deadZone};\n      }\n    } else {\n      gamepadsAxisDeadZone = deadZone;\n    }\n  }\n\n  getLastState(i,ix){\n    var b = this.lastButtonStates[i][ix];\n    return b;\n  }\n\n  setLastState(i,ix,state){\n    this.lastButtonStates[i][ix] = {pressed:state};\n  }\n\n  gamepadButtonEvent(gamepad,button,down) {\n    button.id = gamepadMaps[gamepad.id].buttons[button.index];\n    if(button.id){\n      this.inputController.dispatchEvent(this,this.onGamepadButtonEvent,new GamepadButtonEvent(gamepad,button,down));\n    } else {\n      console.log(arguments);\n    }\n  }\n\n  onGamepadButtonEvent(l,evt){\n    if(!l || !l.enabled){\n      return;\n    }\n    let func = l[evt.keyIdentifier];\n    if(!func){\n      return;\n    }\n    if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n      return;\n    }\n\n    let bndr = l.binder || l;\n    let b = func.call(bndr,evt.down,evt);\n    if(b === true){\n      return true;\n    }\n    // check for if listener wants the only control\n    if(l.stopPropagation){\n      return true;\n    }\n  }\n\n  _onGamepadButtonEvent(evt){\n    var l;\n    let down = evt.down;\n\n    // if(this.config.logAllKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier);\n    // }\n    for(let i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l || !l.enabled){\n        continue;\n      }\n      let func = l[evt.keyIdentifier];\n      if(!func){\n        continue;\n      }\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      let b = func.call(bndr,down,evt);\n      if(b === true){\n        return;\n      }\n      // check for if listener wants the only control\n      if(l.stopPropagation){\n        break;\n      }\n    }\n    // if(this.config.logUnmappedKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier,evt.button.value, listeners.length===0?\"No listeners\":\"\");\n    // }\n  }\n\n  getGamepadMap(gamepadId){\n    return gamepadMaps[gamepadId] || {};\n  }\n\n  gamepadAxisEvent(gamepad,axisIndex,value,zeroed){\n    this.setLastAxisState(gamepad.index,axisIndex,zeroed);\n    var gpMap = this.getGamepadMap(gamepad.id);\n    var axis = {};\n    axis.id = gpMap.axes[axisIndex];\n    axis.stick = gpMap.sticks[axis.id];\n    axis.index = axisIndex;\n    axis.value = value;\n    axis.zeroed = zeroed;\n\n    var evt = new GamepadAxisEvent(gamepad,axis);\n    evt.values = {};\n    if(axis.stick==='leftStick'){\n      evt.values.x = gamepad.getValueByAxisId('lx');\n      evt.values.y = gamepad.getValueByAxisId('ly');\n    } else if(axis.stick==='rightStick'){\n      evt.values.x = gamepad.getValueByAxisId('rx');\n      evt.values.y = gamepad.getValueByAxisId('ry');\n    }\n\n    // this.onGamepadAxis(evt);\n    this.inputController.dispatchEvent(this,this.onGamepadAxis, evt);\n  }\n\n  _onGamepadAxis(evt){\n    var l;\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l){\n        continue;\n      }\n\n      let func = l[evt.stick];\n      if(!func){\n        continue;\n      }\n      // only fire for correct gamepadIndex\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      if(func.call(bndr,evt.values.x,evt.values.y,evt) === false){\n        continue;\n      }\n      return;\n    }\n  }\n  onGamepadAxis(l,evt){\n    let func = l[evt.stick];\n    if(!func){\n      return\n    }\n    // only fire for correct gamepadIndex\n    if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n      return\n    }\n\n    let bndr = l.binder || l;\n    if(func.call(bndr,evt.values.x,evt.values.y,evt) === false){\n      return\n    }\n  }\n}\n\nclass GamepadButtonEvent {\n  constructor(gamepad,button,down) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.button = button;\n    this.down = down;\n    this.type = 'gamepadButtonEvent';\n    this.keyCode = button.index;\n    this.keyIdentifier = button.id;\n  }\n}\n\n\n\nclass GamepadAxisEvent {\n  constructor(gamepad,axis) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.axis = axis;\n    this.stick = axis.stick;\n    this.keyCode = 200+axis.index;\n    this.keyIdentifier = axis.id;\n    this.values = axis.values;\n    this.type = 'gamepadAxisEvent';\n  }\n}\n\nGamepad.prototype.getValueByAxisId = function(axisId){\n  var gp = gamepadMaps[this.id];\n  var ix = gp.axes.indexOf(axisId);\n  if(ix>-1){\n    return this.axes[ix];\n  }\n  return;\n}\n\nexport default GamepadController\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/gamepadController.js","import Util from '../util/util';\nimport KeyCodeMap from './keyCodeMap';\n\nimport GamepadController from './gamepadController'\n\nlet listeners = [];\nlet defaultKeyConfig = {\n  preventDefault: true\n}\nlet ps4Mapping = {\n  buttons: ['cross','circle','square','triangle','l1','r1','l2','r2','extra','start','l3','r3','up','down','left','right','home','select'],\n  axes: ['lx','ly','rx','ry'],\n  sticks: {\n    lx:'leftStick',\n    ly:'leftStick',\n    rx:'rightStick',\n    ry:'rightStick'\n  }\n};\n\nlet gamepadMaps = {\n  'Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)':ps4Mapping // ps4 controller\n};\n\nlet gamepadsAxisDeadZone = 0.08;\nlet gamepadsConfig = {};\n\nlet mousePosPixel = {};\nlet prevMousePosPixel = {};\n// let gamepadTypeMaps = [{id:'054c',type:'ps4'}];\n\nclass InputController {\n  constructor(canvas) {\n    this.canvas = canvas;\n    // this.config = Util.readConfig('input');\n    // TODO: refactor config\n    this.config = {};\n\n    this.inputControllers = [];\n\n    this.initKeys();\n    this.initMouse();\n    this.addInputController(new GamepadController())\n    // this.initGamepads();\n  }\n\n  addInputController(inputController){\n    inputController.install(this);\n    this.inputControllers.push(inputController);\n  }\n\n  // input methods\n\n  addInputListener(listener){\n    listeners.push(listener);\n  }\n\n  /**\n   * Instantiates and returns a new InputEventListener\n   * @param {Object} options - passed along to new InputEventListener\n   * @param {Binder} binder (optional) - passed along to new InputEventListener\n   * @param {Boolean} alsoAdd (optional) - determines whether the returning InputEventListener should also be added to this\n   *\n   * @return {InputEventListener} - listener object used to attached handlers for input events\n   */\n  newInputListener(options, binder, alsoAdd){\n    if(typeof alsoAdd === 'undefined' && typeof binder === 'boolean'){\n      // alsoAdd was the second param, without binder\n      alsoAdd = binder;\n      binder = null;\n    }\n    var l = new InputEventListener(options, binder);\n    if(alsoAdd){\n      this.addInputListener(l);\n    }\n    return l;\n  }\n\n  removeInputListener(listener){\n    var ix = listeners.indexOf(listener);\n    if(ix>-1){\n      listeners.splice(ix,1);\n    }\n  }\n\n  //  -- keyboard\n  initKeys() {\n    // object for all key states\n    this.allKeys = {};\n\n    let func = (evt)=>{\n      // evt.preventDefault();\n      // this.onKeyDown(this.canvas,evt);\n      // this.onKeyEvent(evt);\n      var l;\n      let down = evt.type === 'keydown';\n      let dir = down?'down':'up';\n\n      // give the event a list of all keys states\n      this.allKeys[evt.keyCode] = this.allKeys[evt.key] = down;\n      evt.allKeys = this.allKeys;\n\n      if(this.config.logAllKeys){\n        console.log(evt.keyCode);\n      }\n      this.dispatchEvent(this,this.keyHandler,evt,down,dir)\n    }\n\n    this.canvas.addEventListener('keydown', func, false);\n    this.canvas.addEventListener('keyup', func, false);\n  }\n\n  dispatchEvent(thisArg, handler, event, ...args){\n    for(let listener, i=listeners.length-1; i>=0; i--){\n      listener = listeners[i];\n      if(!listener || !listener.enabled){ continue;}\n      if(handler.call(thisArg,listener,event,...args) === true){\n        break;\n      }\n    }\n  }\n\n  keyHandler(l,evt,down,dir){\n    let cfg = l.keyConfig;\n    let key = cfg[evt.keyCode];\n    let binder = l.binder || l;\n    if(key){\n      if(typeof key === 'object' || Array.isArray(key)) {\n        let keys;\n        // make array out of single object, treat everything like an array\n        if(Array.isArray(key)){\n          keys = key;\n        } else {\n          keys = [key];\n        }\n\n        // loop through all key configs\n        for(let key of keys){\n          let modifiers = false;\n          let direction = !key.hasOwnProperty('direction') || key.direction === dir || key.direction === 'both';\n          let method = key.hasOwnProperty('method') && key.method;\n          key._once = down?key._once:false;\n\n          // logic for modifiers\n          if(!!key.shiftKey == evt.shiftKey && !!key.altKey == evt.altKey && !!key.ctrlKey == evt.ctrlKey){\n            modifiers = true;\n          }\n\n          if(method && modifiers && direction && !key._once){\n            binder = key.binder || binder;\n            var b = this._execCommand(l,method,binder,down,evt);\n            key._once = key.once && down;\n          }\n        }\n      } else {\n        console.warn(`InputController: Unsupported key config type '${key}'`);\n      }\n    }\n    // else {\n    //   console.log('no config for keycode', evt.keyCode, key);\n    // }\n\n    // check for if listener wants the only control\n    // if(l.stopPropagation){\n    //   break;\n    // }\n  }\n\n  onKeyEvent(evt) {\n    // console.log(evt);\n    var l;\n    let down = evt.type === 'keydown';\n    let dir = down?'down':'up';\n\n    // give the event a list of all keys states\n    this.allKeys[evt.keyCode] = this.allKeys[evt.key] = down;\n    evt.allKeys = this.allKeys;\n\n    if(this.config.logAllKeys){\n      console.log(evt.keyCode);\n    }\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l || !l.enabled){ continue;}\n\n\n    }\n\n  }\n\n  _execCommand(listener, method, binder, ...args){\n    if(typeof method === 'string'){\n      return listener[method].call(binder,...args);\n    } else if(typeof method === 'function'){\n      return method.call(binder,...args);\n    } else {\n      return false;\n    }\n  }\n\n\n  //  -- mouse\n  initMouse(){\n    this.canvas.addEventListener('mousemove', function(evt) {\n      this.onMouseEvent('mouseMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mousedown', function(evt) {\n      this.onMouseEvent('mouseDown',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseup', function(evt) {\n      this.onMouseEvent('mouseUp',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseout', function(evt) {\n      this.onMouseEvent('mouseOut',this.canvas.el,evt);\n    }.bind(this), false);\n\n    // touch events\n    this.canvas.addEventListener('touchstart', function(evt) {\n      this.onMouseEvent('touchStart',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchend', function(evt) {\n      this.onMouseEvent('touchEnd',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchmove', function(evt) {\n      this.onMouseEvent('touchMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchcancel', function(evt) {\n      this.onMouseEvent('touchCancel',this.canvas,evt);\n    }.bind(this), false);\n  }\n\n  onMouseEvent(key, canvas, evt){\n    prevMousePosPixel = mousePosPixel;\n    this.updateMousePos(canvas, evt);\n\n    for(var i=listeners.length-1; i>=0; i--){\n      let l = listeners[i];\n      if(l && l.enabled){\n        if(l.hasOwnProperty(key)){\n          let bndr = l.binder || l;\n          let b = l[key].call(bndr,mousePosPixel,evt);\n          if(b === true){\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  //    -- mouse helper function\n  updateMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    mousePosPixel = {\n      x: evt.clientX - rect.left,\n      y: canvas.height - (evt.clientY - rect.top)\n    };\n  }\n\n  //  -- gamepad\n\n\n  update(...args){\n    this.inputControllers.forEach((controller)=>{\n      if(controller.hasOwnProperty('update')){\n        controller.update(...args)\n      }\n    })\n  }\n\n}\n\nlet stripModifiers = function(key){\n  let mods = key.split('.');\n  key = mods[0];\n  let ret = {key, config:{}};\n  if(mods.length > 1){\n    for(let i=1; i<mods.length; i++){\n      let mod = mods[i];\n      switch (mod) {\n        case 'alt':\n        case 'altKey':\n          ret.config.altKey = true;\n          break;\n        case 'shift':\n        case 'shiftKey':\n          ret.config.shiftKey = true;\n          break;\n        case 'ctrl':\n        case 'ctrlKey':\n          ret.config.ctrlKey = true;\n          break;\n        case 'up':\n          ret.config.direction = 'up';\n          break;\n        case 'down':\n          ret.config.direction = 'down';\n          break;\n        case 'once':\n          ret.config.once = true;\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  return ret;\n}\n\nlet importKeyConfig = function(keyConfig){\n  let config = {};\n  for(let key in keyConfig){\n    let mods = stripModifiers(key);\n    let _key = key;\n    let cfg = keyConfig[key];\n    key = KeyCodeMap[mods.key] || mods.key;\n\n    // everything needs to be an array of objects\n    if(typeof cfg === 'string' || typeof cfg === 'function'){\n      config[key] = [Object.assign({},{method:cfg},mods.config)];\n    } else if(typeof cfg === 'object' && !Array.isArray(cfg)){\n      config[key] = [Object.assign({},mods.config,cfg)];\n    } else if(Array.isArray(cfg)){\n      config[key] = cfg.map((conf)=>{\n        return Object.assign({},mods.config,conf);\n      });\n    } else {\n      console.warn(`InputController: Unsupported key config type '${typeof cfg}' for '${key}'`, cfg);\n    }\n  }\n  return config;\n}\n\nclass InputEventListener {\n  constructor(options, binder) {\n    let keyConfig = options;\n    if(options.hasOwnProperty('keyConfig')){\n      keyConfig = options.keyConfig;\n    }\n    if(options.hasOwnProperty('gamepadIndex')){\n      this.gamepadIndex = options.gamepadIndex;\n    } else {\n      this.gamepadIndex = -1;\n    }\n    if(options.hasOwnProperty('binder')){\n      binder = options.binder;\n    }\n\n    this.stopPropagation = options.stopPropagation;\n\n    this.keyConfig = importKeyConfig.call(this,keyConfig);\n    this.options = options;\n    this.binder = binder;\n    this.enabled = options.hasOwnProperty('enabled') ? options.enabled : true;\n\n    if(options.hasOwnProperty('methods')){\n      this._loadListener(options.methods);\n    }\n  }\n\n  $enable(){\n    this.enabled = true;\n  }\n\n  $disable(){\n    this.enabled = false;\n  }\n\n  _loadListener(listener){\n    let avail = ['start', 'select', 'home', 'extra', 'left', 'right', 'up', 'down',\n      'l1', 'l2', 'l3', 'r1', 'r2', 'r3', 'triangle', 'square', 'circle', 'cross',\n      'leftStick', 'rightStick', 'mouseMove', 'mouseDown', 'mouseUp', 'mouseOut',\n      'touchStart', 'touchEnd', 'touchMove', 'touchCancel',\n    ];\n\n    for(let key of avail){\n      if(key in listener){\n        let method = listener[key];\n\n        if(typeof method === 'function'){\n          this[key] = method;\n        } else if(typeof method === 'string'){\n          console.log(this.keyConfig);\n          let code = method;\n\n          if(Number.isNaN(parseInt(code))){\n            // need to convert char\n            let _code = KeyCodeMap[code];\n            if(_code){\n              code = _code;\n            } else {\n              console.warn('There is no mapping for: ', method);\n              continue;\n            }\n          }\n\n          let arr = this.keyConfig[code];\n\n          if(arr.length === 1){\n            this[key] = arr[0].method\n          } else {\n            console.warn('multiple entries per keycode is not supported at this yet.', key, arr, method);\n          }\n        }\n      }\n    }\n  }\n\n  start(){\n    return null;\n  }\n\n  select(){\n    return null;\n  }\n\n  home(){  // ps/xb button\n    return null;\n  }\n\n  left(){\n    return null;\n  }\n\n  right(){\n    return null;\n  }\n\n  up(){\n    return null;\n  }\n\n  down(){\n    return null;\n  }\n\n  l1(){\n    return null;\n  }\n\n  l2(){\n    return null;\n  }\n\n  l3(){\n    return null;\n  }\n\n  r1(){\n    return null;\n  }\n\n  r2(){\n    return null;\n  }\n\n  r3(){\n    return null;\n  }\n\n  triangle(){\n    return null;\n  }\n\n  square(){\n    return null;\n  }\n\n  circle(){\n    return null;\n  }\n\n  cross(){\n    return null;\n  }\n\n  extra(){\n    return null;\n  }\n\n  leftStick(x,y,event){\n    return null;\n  }\n\n  rightStick(x,y,event){\n    return null;\n  }\n}\n// assign the InputEventListener class as a static property on InputController\n//  so it can be instantiated properly outside of this module\nInputController.InputEventListener = InputEventListener;\n\nexport default InputController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/inputController.js","import PrivateProperty from '../util/privateProperty'\n\nlet _stack = new PrivateProperty();\nlet _listeners = new PrivateProperty();\n\nexport default class ScreenManager {\n  constructor() {\n    // initialize some private variables\n    let idIncrementer = 0;\n    this.getNewId = ()=>{\n      return idIncrementer++;\n    }\n\n    // define private properties\n    _listeners.set(this,new Proxy([],{\n      get(target,prop){\n        if(prop in ScreenEventListener.prototype){\n          return (...args)=>{\n            // only call prop if it exists\n            //  this allows for the 'listener' to not be a 'ScreenEventListener' but any object that defines its properties\n            target.forEach(e=> e[prop] != null ? e[prop].call(e,...args) : undefined)\n          }\n        }\n        return target[prop]\n      }\n    }))\n    _stack.set(this,[]);\n  }\n\n  update(delta){\n    let stack = _stack(this);\n    if(stack.length > 0){\n      let screen = stack[stack.length-1];\n      screen._step.apply(screen,arguments);\n\n      if(screen._isFinished){\n        _listeners(this).onScreenFinished(screen, this, screen._finalData);\n      }\n    }\n  }\n\n  addScreen(screen, replace){\n    let stack = _stack(this)\n    // give the screen a ref to the manager\n    screen.$manager = this;\n    // give the screen an id\n    screen.$id = this.getNewId()\n    if(replace){\n      stack.splice(stack.length-1,1,screen);\n    } else {\n      stack.push(screen);\n    }\n    // call screen's callback\n    screen.onAddedToManager(this)\n    // call listener methods\n    _listeners(this).onScreenAdded(screen, this, replace);\n  }\n\n  popScreen(){\n    let stack = _stack(this)\n    if(stack.length > 1){\n      let screen = stack.pop();\n      // call screen's callback\n      screen.onRemovedFromManager(this);\n      // call listener methods\n      _listeners(this).onScreensRemoved([screen], this);\n      return [screen];\n    } else {\n      // cannot pop the last screen, only replace.\n      _listeners(this).onWarnPopScreen(stack, this);\n      return [];\n    }\n  }\n\n  popToScreen(screen){\n    let stack = _stack(this)\n    if(!screen.hasOwnProperty('$id')){\n      return false;\n    }\n    let index = stack.findIndex((s)=>{\n      return s.$id === screen.$id\n    })\n    if(index === -1){\n      return false;\n    } else {\n      let screensRemoved = stack.splice(index);\n      // call screen callback method\n      screensRemoved.slice().reverse().forEach(screen => screen.onRemovedFromManager(this));\n      // call listener method\n      _listeners(this).onScreensRemoved(screensRemoved, this);\n      return screensRemoved;\n    }\n  }\n\n  addScreenEventListener(listener){\n    _listeners(this).push(listener)\n  }\n\n  getNewScreenEventListener(alsoAdd){\n    let listener = new ScreenEventListener()\n    if(alsoAdd){\n      this.addScreenEventListener(listener);\n    }\n    return listener;\n  }\n}\n\nclass ScreenEventListener {\n  onScreenFinished(screen, manager, data){}\n  onScreenAdded(screen, manager, replaced){}\n  onScreensRemoved(screen, manager){}\n  onWarnPopScreen(stack, manager){}\n}\n\nScreenManager.ScreenEventListener = ScreenEventListener;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screenManager.js","import AssetManager from '../base/assetManager';\n\nconst RIGHT = 10;\nconst LEFT  = 11;\n\nclass BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n\n    if(typeof image === 'string'){\n      this.image = AssetManager.getImage(image);\n    } else {\n      this.image = image;\n    }\n\n    if(!this.image){\n      console.warn('Sprite created without an image', this);\n      return;\n    }\n\n    this.width = this.image.width;\n    this.height = this.image.height;\n\n    this.frames = [];\n    this.framesX = framesX;\n    this.framesY = framesY;\n    this.frameWidth = this.width / this.framesX;\n    this.frameHeight = this.height / this.framesY;\n    this.totalFrames = this.framesX * this.framesY;\n\n    this.scaleToWidth(1);\n\n    this.setOffset(offsetX || 0, offsetY || 0);\n\n    this.currentFrameIndex = 0;\n\n    this.direction = RIGHT;\n\n    this.parseSpriteSheet();\n\n    this.setFrame();\n  }\n\n  parseSpriteSheet(){\n    for(var y = 0; y < this.framesY; y++){\n      for(var x = 0; x < this.framesX; x++){\n        var frame = {};\n        frame.sx = x * this.frameWidth;\n        frame.sy = y * this.frameHeight;\n\n        this.frames.push(frame);\n      }\n    }\n\n\n\n    console.log(this.frames);\n  }\n\n  animate(){\n    this.currentFrameIndex = (this.currentFrameIndex + 1) % this.frames.length;\n    this.setFrame();\n  }\n\n  setFrame(frameIndex){\n    frameIndex = frameIndex===undefined ? this.currentFrameIndex : frameIndex;\n    this.frame = this.frames[frameIndex];\n  }\n\n  setPosition(pos){\n    this.pos = pos;\n  }\n\n  setOffset(offset, offsetY){\n    if(typeof offset === 'object'){\n      this.offset = offset;\n    } else if(offsetY !== undefined){\n      this.offset = {\n        x: offset,\n        y: offsetY\n      }\n    }\n  }\n\n  setUseShadow(use){\n    this.useShadow = use;\n  }\n\n  setDirection(dir){\n    this.direction = dir;\n  }\n\n  scaleToWidth(w){\n    var h = w / this.frameWidth;\n    this.drawWidth = w;\n    this.drawHeight = h * this.frameHeight;\n  }\n\n  scaleToHeight(h){\n    var w = h / this.frameHeight;\n    this.drawWidth = w * this.frameWidth;\n    this.drawHeight = h;\n  }\n\n  scale(scale){\n    this.drawWidth *= scale;\n    this.drawHeight *= scale;\n  }\n\n  draw(ctx){\n\n    ctx.save();\n    if(this.direction === RIGHT){\n      ctx.scale(1,-1); // flip the y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(this.pos.x,-this.pos.y);\n    } else {\n      ctx.scale(-1,-1); // flip the x & y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(-this.pos.x,-this.pos.y);\n    }\n\n    if(this.useShadow){\n      ctx.shadowColor = 'black';\n      ctx.shadowBlur = 20;\n      ctx.shadowOffsetX = 5;\n      ctx.shadowOffsetY = 10;\n    }\n\n    ctx.drawImage(this.image, this.frame.sx, this.frame.sy, this.frameWidth, this.frameHeight, 0, 0, this.drawWidth, this.drawHeight);\n\n    ctx.restore();\n  }\n}\n\nexport default BaseSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/BaseSprite.js","import HUDElement from './HUDElement'\n\nconst valid_positions_x = ['center', 'left', 'right'];\nconst valid_positions_y = ['center', 'top', 'bottom'];\n\nexport default class Dialog extends HUDElement {\n  constructor({\n    // basic info, position and dimensions\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n\n    // used for calc based positioning\n    position = '',\n    positionX = '',\n    positionY = '',\n    offset = {x:0,y:0},\n    offsetX = 0,\n    offsetY = 0,\n\n    // basic color info, background and text colors\n    backgroundColor = 'black',\n    textColor = 'white',\n    title = '',\n\n    // allow for instant show when added\n    visible = false,\n\n    // border info\n    borderColor = 'blue',\n    borderWidth = 0,\n\n  } = {}) {\n    super()\n\n    this._x = x;\n    this._y = y;\n    this.width = width;\n    this.height = height;\n    this.backgroundColor = backgroundColor;\n\n    // text vars\n    this.textColor = textColor;\n    this.title =  title;\n\n    // calc positioning setup\n    this.__calcPosition({position, positionX, positionY, offset, offsetX, offsetY});\n\n    if(visible){\n      this.show();\n    }\n\n    this.borderColor = borderColor;\n    this.borderWidth = borderWidth;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    let pos = this.getPosition(ctx);\n\n    // draw border\n    this._drawBorder(ctx, pos);\n    // draw the main background rect\n    this._drawBackground(ctx, pos);\n\n    // draw the title\n    ctx.save();\n    ctx.fillStyle = this.textColor;\n    ctx.font = '22px serif';\n    ctx.fillText(this.title, pos.x + 10, pos.y + 22 + 10);\n    ctx.restore();\n\n    ctx.restore();\n  }\n\n  _drawBorder(ctx, pos){\n    if(this.borderWidth > 0){\n      let bw = this.borderWidth - 1;\n      // draw the border just outside the normal dimensions\n      ctx.beginPath();\n      ctx.strokeStyle = this.borderColor;\n      ctx.lineWidth = this.borderWidth;\n      ctx.moveTo(pos.x-bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y+this.height+bw);\n      ctx.lineTo(pos.x-bw, pos.y+this.height+bw);\n      ctx.closePath();\n      ctx.stroke();\n    }\n  }\n\n  _drawBackground(ctx, pos){\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(pos.x, pos.y, this.width, this.height);\n  }\n\n  show(){\n    this.visible = true;\n  }\n  hide(){\n    this.visible = false;\n  }\n  toggle(){\n    if(this.visible){\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  getPosition(ctx){\n    let position = {x: 0, y: 0}\n    if(this._positionX && this._positionY && ctx){\n      let c_width = ctx.canvas.width;\n      let c_height = ctx.canvas.height;\n\n      let x = this.__getXfromPositionX.call(this, this._positionX, c_width)\n      let y = this.__getYfromPositionY.call(this, this._positionY, c_height)\n\n      position = {x,y};\n    } else if(!ctx) {\n      console.warn(\"Canvas context was not passed into 'getPosition'.\");\n    } else {\n      position = {x: this._x, y: this._y};\n    }\n\n    this.position = position;\n    return this.position;\n  }\n\n  /** Helper Methods **/\n\n  __validatePositionX(posX){\n    if(valid_positions_x.indexOf(posX) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n    return false\n  }\n\n  __validatePositionY(posY){\n    if(valid_positions_y.indexOf(posY) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n    return false;\n  }\n\n  __getXfromPositionX(posX, c_width){\n    switch (posX) {\n      case 'center':\n        return (c_width/2) - (this.width/2) + this._offsetX;\n      case 'left':\n        return this._offsetX;\n      case 'right':\n        return (c_width) - (this.width) + this._offsetX;\n        break;\n      default:\n        console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n        return 0;\n    }\n  }\n\n  __getYfromPositionY(posY, c_height){\n    switch (posY) {\n      case 'center':\n        return (c_height/2) - (this.height/2) + this._offsetY;\n      case 'top':\n        return this._offsetY;\n      case 'bottom':\n        return (c_height) - (this.height) + this._offsetY;\n        break;\n      default:\n        console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n        return 0;\n    }\n  }\n\n  __calcPosition({position, positionX, positionY, offset, offsetX, offsetY}){\n    if(position){\n      let positions = position.split(' ');\n      if(positions.length == 1 && positions[0] === 'center'){\n        positionX = positionY = positions[0];\n      } else if(positions.length == 2 && this.__validatePositionX(positions[0]) && this.__validatePositionY(positions[1])){\n        positionX = positions[0];\n        positionY = positions[1];\n      }\n    }\n    // should have positionX & positionY, either from above logic or as param\n    if(positionX != null && positionY != null){\n      this._positionX = positionX;\n      this._positionY = positionY;\n    }\n\n    if(offset != null && offset.hasOwnProperty('x') && offset.hasOwnProperty('y')){\n      offsetX = offset.x;\n      offsetY = offset.y;\n    }\n\n    // should have offsetX & offsetY, either from above logic or as param\n    if(offsetX != null && offsetY != null){\n      this._offsetX = offsetX;\n      this._offsetY = offsetY;\n    }\n  }\n\n  /** Getters and Setters **/\n  get offsetX(){\n    return this._offsetX;\n  }\n  set offsetX(x){\n    this._offsetX = x;\n  }\n  get offsetY(){\n    return this._offsetY;\n  }\n  set offsetY(y){\n    this._offsetY = y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Dialog.js","import Canvas from '../canvas/canvas';\nimport Camera from '../base/camera';\nimport Util from '../util/util';\nimport ScreenManager from '../screen/screenManager';\nimport Ludic from './ludic';\nimport InputController from '../input/inputController';\n\nexport default class LudicApp {\n  constructor(config) {\n    Util.setConfig(config);\n    Ludic.config = config;\n    Ludic.canvas = new Canvas();\n    Ludic.context = Ludic.canvas.getContext();\n    Ludic.screenManager = new ScreenManager();\n    Ludic.input = new InputController(Ludic.canvas);\n    Ludic.util = Util;\n\n    //Put Ludic on the window in devmode\n    if(Ludic.devmode){\n      window.Ludic = Ludic;\n    }\n\n    this.running = false;\n    this.lastTime = Date.now();\n\n    this._requestAnimFrame = (()=>{\n      return  window.requestAnimationFrame       ||\n              window.webkitRequestAnimationFrame ||\n              window.mozRequestAnimationFrame    ||\n              window.oRequestAnimationFrame      ||\n              window.msRequestAnimationFrame     ||\n              (function(){\n                console.warn('LudicApp: falling back to basic requestAnimationFrame');\n                return false;\n              })()                               ||\n              function( callback ){\n                window.setTimeout(callback, 1000 / 60);\n              };\n    })();\n\n    // do some binding\n    this._requestAnimFrame = this._requestAnimFrame.bind(window);\n    this._animate = this._animate.bind(this);\n  }\n\n  // override\n  update(delta) {}\n\n  _animate(time) {\n    if(this.running){\n      this._requestAnimFrame(this._animate);\n\n      var delta = (time - this.lastTime) / 1000;\n      this.lastTime = Ludic._time = time;\n\n      if(!Number.isNaN(delta)){\n        Ludic.context.save();\n        this.update(delta,time);\n        Ludic.context.restore();\n      }\n    }\n  }\n\n  pause() {\n    this.running = !this.running;\n    if (this.running)\n      this._animate();\n  }\n\n  run(updateFunction){\n    this.running = true;\n    if(updateFunction != null){\n      this.update = updateFunction;\n    }\n    this._animate();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/LudicApp.js","// implementation modeled from http://stackoverflow.com/a/6491621\nObject.defineProperty(Object, 'resolve', {\n  enumerable: false,\n  value: function(path, obj = {}) {\n    if(path == null){\n      return;\n    }\n    if(path === ''){\n      return obj\n    }\n    path = path.replace(/\\[['\"]?(\\w+)['\"]?\\]/g, '.$1'); // convert indexes and brackets ([\"keyname\"] or ['keyname']) to properties\n    path = path.replace(/^\\./, '');           // strip a leading dot\n    var keys = path.split('.');\n    return keys.reduce(function(prev, curr) {\n        return prev ? prev[curr] : undefined\n    }, obj)\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/patches/object.js","Path2D.rect = function(...args){\n  let p = new Path2D();\n  // .rect(x, y, width, height)\n  p.rect(...args);\n  return p;\n}\nPath2D.arc = function(...args){\n  let p = new Path2D();\n  // .arc(x, y, radius, startAngle, endAngle, anticlockwise)\n  p.arc(...args);\n  return p;\n}\nPath2D.ellipse = function(...args){\n  let p = new Path2D();\n  // .ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n  p.ellipse(...args);\n  return p;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/patches/path2D.js","\nexport default class Screen {\n  constructor(options) {\n    this.options = options || {};\n  }\n\n  _step(delta,...rest){\n    if(!this._isFinished){\n      this.update.apply(this,arguments);\n    }\n  }\n\n  // override\n  update(delta,...rest){}\n\n  finish(data){\n    if(!this._isFinished){\n      this.onDestroy();\n      this._finalData = data || {};\n      this._isFinished = true;\n    }\n  }\n\n  onDestroy(){}\n  onAddedToManager(manager){}\n  onRemovedFromManager(manager){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screen.js","\nimport BaseSprite from './BaseSprite';\n\nclass MultiSprite extends BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n    super(image, framesX, framesY, offsetX, offsetY);\n\n  }\n\n  createSlice(name, start, count, scale){\n    var slice = {};\n\n    slice.ix = 0;\n    slice._ix = 0;\n    slice.start = start;\n    slice.end = start+count;\n    slice.scale = scale || 1;\n\n    slice.name = name;\n    slice.frames = this.frames.slice(start, slice.end);\n\n    console.log(slice);\n\n    this.slices[name] = slice;\n  }\n\n  createState(name, frameIndex, sliceName){\n    sliceName = sliceName || 'default';\n\n    var state = {};\n\n    state.name = name;\n    state.ix = frameIndex;\n    state.sliceName = sliceName;\n\n    this.states[name] = state;\n  }\n\n  parseSpriteSheet(){\n    this.slices = this.slices || {};\n    this.states = this.states || {};\n    super.parseSpriteSheet.apply(this,arguments);\n    var slice = {\n      ix: 0,\n      start: 0,\n      end: this.frames.length-1,\n      name: 'default',\n      frames: this.frames\n    };\n\n    this.slices[slice.name] = slice;\n    this.setSlice(slice.name);\n  }\n\n  setSlice(name){\n    this.slice = this.slices[name];\n  }\n\n  animate(sliceName, optScale){\n    if(sliceName){\n      this.setSlice(sliceName);\n    }\n\n    var scale = optScale || this.slice.scale,\n        fl = this.slice.frames.length,\n        df = fl * scale,\n        _ix = this.slice._ix++;\n\n    this.slice.ix = Math.floor( ((_ix) % (df)) / scale);\n    if(_ix >= df){\n      this.slice._ix = 1;\n    }\n\n    this.setFrame();\n  }\n\n  setFrame(frameIndex, sliceName){\n    frameIndex = frameIndex===undefined ? this.slice.ix : frameIndex;\n    if(sliceName){\n      this.frame = this.slices[sliceName].frames[frameIndex];\n    } else {\n      this.frame = this.slice.frames[frameIndex];\n    }\n  }\n\n  setState(name){\n    var state = this.states[name];\n    this.setFrame(state.ix, state.sliceName);\n  }\n}\n\nexport default MultiSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/MultiSprite.js","let axesLength = 100;\n\nexport default class HUD {\n  constructor(camera) {\n    this.camera = camera;\n    this.ctx = this.camera.context;\n\n    this.$refs = {};\n    this.elements = [];\n  }\n\n  update(delta){\n    this.ctx.save();\n    this.camera.resetTransform(this.ctx);\n\n    // draw the axis for the hud system\n    this.drawAxes(delta);\n\n    for(let el of this.elements){\n      if(el.visible){\n        el.render(delta, this.ctx);\n      }\n    }\n\n    this.ctx.restore();\n  }\n\n  drawAxes(delta){\n    this.ctx.save();\n    // this is to allow the axes to be seen\n    this.ctx.translate(this.ctx.lineWidth,this.ctx.lineWidth)\n    this.ctx.strokeStyle = 'rgb(192,0,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(axesLength, 0);\n    this.ctx.stroke();\n    this.ctx.strokeStyle = 'rgb(0,192,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(0, axesLength);\n    this.ctx.stroke();\n    this.ctx.restore();\n  }\n\n  addElement(element, ref){\n    this.elements.push(element);\n    if(ref){\n      if(!this.$refs.hasOwnProperty(ref)){\n        this.$refs[ref] = element;\n      } else {\n        console.warn(`Ref \"${ref}\" is already taken`);\n      }\n    }\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Hud.js","import Dialog from './Dialog'\nimport Ludic from '../app/ludic'\n\nexport default class MenuDialog extends Dialog {\n  constructor(options) {\n    super(options)\n\n    this.menuItems = [];\n\n  }\n\n  render(delta, ctx){\n    super.render(delta, ctx);\n\n    // render the menu items\n    ctx.save();\n    ctx.translate(this.position.x, this.position.y);\n    this.menuItems.forEach((item, index) => {\n      item.render(delta,ctx,index);\n    });\n    ctx.restore();\n  }\n\n  addMenuItem(item){\n    if(item instanceof MenuDialog.MenuItem){\n      this.menuItems.push(item);\n    } else {\n      console.warn(\"Parameter needs to be of type MenuDialog.MenuItem\");\n    }\n  }\n\n  show(){\n    super.show();\n    // take input control\n    this.input = Ludic.input.newEventListener({\n      stopPropagation: true,\n      keyConfig: {\n        'w': 'up',\n        's': 'down',\n        'esc.once.down': 'start'\n      },\n      methods: {\n        up: this.selectPreviousItem,\n        down: this.selectNextItem,\n        start: this.toggleMenuOpen\n      }\n    }, this, true)\n\n    this.selectedItemIndex = 0;\n    this.selectItem(this.selectedItemIndex);\n  }\n\n  hide(){\n    super.hide();\n    Ludic.input.removeEventListener(this.input);\n  }\n\n  selectItem(index){\n    if(this.selectedItem){\n      this.selectedItem.deselect();\n    }\n    this.selectedItem = this.menuItems[index];\n    this.selectedItem.select();\n  }\n\n  selectNextItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem(++this.selectedItemIndex%this.menuItems.length);\n      // this.selectedItemIndex++;\n    }\n  }\n  selectPreviousItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem((this.menuItems.length-1)-(++this.selectedItemIndex%this.menuItems.length));\n      // this.selectedItemIndex++;\n    }\n  }\n\n  toggleMenuOpen(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.toggle();\n    }\n  }\n}\n\nMenuDialog.MenuItem = class MenuItem {\n  constructor(text) {\n    this.text = text;\n  }\n\n  render(delta, ctx, index){\n    ctx.save();\n    ctx.fillStyle = this.selected ? 'red' : 'white';\n    ctx.font = '22px serif';\n    ctx.fillText(this.text, 10, 59 + (index*27)); // y = fontSize + 10 + distance from title = 22+10+27\n    ctx.restore();\n  }\n\n  select(){\n    this.selected = true;\n  }\n\n  deselect(){\n    this.selected = false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/MenuDialog.js","import HUDElement from './HUDElement'\n\nexport default class Text extends HUDElement{\n  constructor(text, x, y, {\n    // default options for text\n    fontFamily = 'serif',\n    fontSize = 12,\n    fontSizeUnit = 'px',\n    color = 'black',\n    drawStyle = 'fill',\n\n    adjustOrigin = true,\n    visible = true\n  } = {}) {\n    super();\n\n    this.visible = true;\n\n    this._adjustOrigin = true;\n    this.drawStyle = drawStyle;\n\n    this.fontFamily = fontFamily;\n    this.setFontSize(fontSize, fontSizeUnit);\n\n    // set the main attrs\n    this.text = text;\n    this.setPosition(x,y);\n    this.color = color;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    ctx.font = `${this.__fontSize} ${this.fontFamily}`;\n\n    if(this.drawStyle === 'stroke'){\n      ctx.strokeStyle = this.color;\n      ctx.strokeText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    } else {\n      ctx.fillStyle = this.color;\n      ctx.fillText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    }\n    ctx.restore();\n  }\n\n  setPosition(x, y){\n    // x can also be an object with .x/.y props\n    if(typeof x === 'object' && y == null){\n      let pos = x;\n      this.setPositionX(pos.x);\n      this.setPositionY(pos.y)\n    } else if(typeof x === 'number' && typeof y === 'number'){\n      this.setPositionX(x);\n      this.setPositionY(y);\n    } else {\n      console.warn('Unknown parameters passed into \"setPosition\"', arguments);\n    }\n  }\n\n  setPositionX(x){\n    this.x = x;\n  }\n  setPositionY(y){\n    this.y = y;\n  }\n\n  get y(){\n    return parseFloat(this._y);\n  }\n\n  set y(y){\n    y = parseFloat(y);\n    this._y = y;\n  }\n\n  set fontSize(fontSize){\n    this.setFontSize(fontSize);\n  }\n\n  get fontSize(){\n    return this._fontSize;\n  }\n\n  setFontSize(fontSize, unit = this.fontSizeUnit){\n    this.__fontSize = `${fontSize}${unit}`;\n    this._fontSize = parseFloat(fontSize);\n    this.fontSizeUnit = unit;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Text.js","\nexport function classTypeOf(typeToCheck, type){\n  do {\n    if(typeToCheck === type){\n      return true;\n    }\n  } while ((typeToCheck = Object.getPrototypeOf(typeToCheck)) !== Function.prototype);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/utilities.js","import ImageAsset from './imageAsset';\n\nclass ImageAssetLoader {\n  constructor() {\n\n  }\n\n  load(name, url, type, options){\n    return new ImageAsset(name, url, type, options);;\n  }\n}\n\nexport default new ImageAssetLoader();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAssetLoader.js","/** alias mapping for keyboard keys **/\n\nexport default {\n\n  // special keys\n  'enter': '13',\n  'tab': '9',\n  'delete': '8',\n  'backspace': '8',\n  'space': '32',\n  'esc': '27',\n  'escape': '27',\n\n  // modifier keys\n  'control': '17',\n  'ctrl': '17',\n  'alt': '18',\n  'option': '18', // on mac\n  'caps': '20',\n  'caps-lock': '20',\n  'capslock': '20',\n\n  'windows': '91', // windows key\n  'left-command': '91', // left command key on mac layout\n  'left-cmd': '91',\n  'search': '91', // on chromebook\n  'menu': '93', // windows menu\n  'right-command': '93', // right command key on mac layout\n  'right-cmd': '93',\n\n  // arrow keys\n  'left' : '37',\n  'up' : '38',\n  'right' : '39',\n  'down' : '40',\n\n  // alpha keys, in order of keyboard qwerty layout\n  'q': '81',\n  'w': '87',\n  'e': '69',\n  'r': '82',\n  't': '84',\n  'y': '89',\n  'u': '85',\n  'i': '73',\n  'o': '79',\n  'p': '80',\n  'a' : '65',\n  's' : '83',\n  'd' : '68',\n  'f' : '70',\n  'g' : '71',\n  'h' : '72',\n  'j' : '74',\n  'k' : '75',\n  'l' : '76',\n  'z' : '90',\n  'x' : '88',\n  'c' : '67',\n  'v' : '86',\n  'b' : '66',\n  'n' : '78',\n  'm' : '77',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/keyCodeMap.js","\nexport default class PrivateProperty {\n  constructor() {\n    let weakMap = new WeakMap();\n    let ctor = function(...getArgs){\n      return weakMap.get(...getArgs);\n    }\n    ctor.set = function(...setArgs){\n      return weakMap.set(...setArgs);\n    }\n    // ctor.get = function(...getArgs){\n    //   return weakMap.get(...getArgs);\n    // }\n    ctor.get = ctor;\n    return ctor\n  }\n\n  set(...args){\n    this.weakMap.set(...setArgs)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/privateProperty.js","\n// app\nexport {default as LudicApp} from './components/app/LudicApp'\nexport {default as default, default as Ludic} from './components/app/ludic'\n\n\n// base\nexport {default as Asset} from './components/base/asset'\nexport {default as AssetManager} from './components/base/assetManager'\nexport {default as Camera} from './components/base/camera'\nexport {default as ImageAsset} from './components/base/imageAsset'\n\n// canvas\nexport {default as Canvas} from './components/canvas/canvas'\n\n// input\nexport {default as InputController} from './components/input/inputController'\nexport {default as GamepadController} from './components/input/gamepadController'\n\n// patches\n/*\n  patches that are prototype extensions, just import here\n  patches that require a parameter (monkey patch) export function name with prefix `Patch`\n    i.e. export {default as PatchFixSomeClass} from './components/patches/fixSomeClass'\n*/\nimport path2D from './components/patches/path2D';\nimport object from './components/patches/object';\n\n// screen\nexport {default as Screen} from './components/screen/screen'\nexport {default as ScreenManager} from './components/screen/screenManager'\n\n// sprite\nexport {default as BaseSprite} from './components/sprite/BaseSprite'\nexport {default as MultiSprite} from './components/sprite/MultiSprite'\n\n// ui\nexport {default as HUD} from './components/ui/Hud'\nexport {default as HUDElement} from './components/ui/HUDElement'\nexport {default as Text} from './components/ui/Text'\nexport {default as Dialog} from './components/ui/Dialog'\nexport {default as MenuDialog} from './components/ui/MenuDialog'\n\n// util\nexport {default as Util} from './components/util/util'\nexport * from './components/util/utilities'\n\n// vectors\nexport {default as Vector2} from './components/engine/Vector2'\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}