{"version":3,"sources":["webpack:///webpack/bootstrap 788b9a67a4e515f7a59b","webpack:///./src/components/util/util.js","webpack:///./src/components/app/ludic.js","webpack:///./src/components/canvas/canvas.js","webpack:///./src/components/ui/HUDElement.js","webpack:///./src/components/base/asset.js","webpack:///./src/components/base/assetManager.js","webpack:///./src/components/base/camera.js","webpack:///./src/components/base/imageAsset.js","webpack:///./src/components/engine/Vector2.js","webpack:///./src/components/input/inputController.js","webpack:///./src/components/screen/screenManager.js","webpack:///./src/components/sprite/BaseSprite.js","webpack:///./src/components/ui/Dialog.js","webpack:///./src/components/app/LudicApp.js","webpack:///./src/components/base/fps.js","webpack:///./src/components/screen/screen.js","webpack:///./src/components/sprite/MultiSprite.js","webpack:///./src/components/ui/Hud.js","webpack:///./src/components/ui/MenuDialog.js","webpack:///./src/components/ui/Text.js","webpack:///./src/components/util/utilities.js","webpack:///./src/components/base/imageAssetLoader.js","webpack:///./src/components/input/keyCodeMap.js","webpack:///./src/components/util/privateProperty.js","webpack:///./src/main.js","webpack:///./src/components/patches/object.js","webpack:///./src/components/patches/path2D.js"],"names":["_config","canvas","dimension","console","log","Util","hex","opacity","replace","r","parseInt","substring","g","b","result","val","places","c","i","Math","round","self","ns","pattern","logNames","logValues","undefined","name","RegExp","match","arguments","length","HTMLElement","key","hasOwnProperty","obj","extend","config","configure","scope","param","def","params","split","Object","resolve","value","l","prop","e","configureConsole","_log","Ludic","extensions","Canvas","setupCanvas","readConfig","focus","canvasConfig","document","querySelector","warn","setAttribute","getAttribute","setElement","el","width","window","innerWidth","height","innerHeight","addEventListener","apply","removeEventListener","getContext","clearColor","context","fillStyle","clearRect","fillRect","HUDElement","delta","Asset","url","type","options","reject","am","data","AssetManager","assets","loadQueue","promiseQueue","loaders","addLoader","overwrite","promise","asset","NewAsset","push","loading","then","onAssetResolve","bind","onAssetReject","getAsset","Promise","reason","finalPromise","all","assetsLoaded","shift","load","onAssetsLoadedCallback","callback","loader","destroy","fileTypes","forEach","DEFAULT_PTM","DEFAULTS","inverseY","inverseX","x","y","ptm","Camera","assign","option","canva","viewCenterPixel","singleWorldPoint","singlePixelPoint","offset","futurePos","updateEnvironmentVariables","camera","ctx","setTransform","strokeStyle","beginPath","moveTo","lineTo","stroke","ent","chaseMethod","chaseEntity","pixelPoint","_getWorldPointFromPixelPoint_x","_getWorldPointFromPixelPoint_y","worldPoint","_getPixelPointFromWorldPoint_x","_getPixelPointFromWorldPoint_y","vector2","instantaneous","fraction","currentViewCenterWorld","getViewCenterWorld","toMove","get_x","get_y","moveCenterBy","setOffset","setViewCenterWorld","getWorldPointFromPixelPoint","myRound","bounds","w","h","translate","getOffsetX","getOffsetY","getPTM","scale","lineWidth","ImageAsset","Image","onload","src","Vector2","listeners","defaultKeyConfig","preventDefault","ps4Mapping","buttons","axes","sticks","lx","ly","rx","ry","gamepadMaps","gamepadsAxisDeadZone","gamepadsConfig","mousePosPixel","prevMousePosPixel","InputController","initKeys","initMouse","initGamepads","listener","binder","alsoAdd","InputEventListener","addInputListener","ix","indexOf","splice","allKeys","evt","onKeyEvent","down","dir","keyCode","logAllKeys","enabled","cfg","keyConfig","Array","isArray","keys","modifiers","direction","method","_once","shiftKey","altKey","ctrlKey","_execCommand","once","stopPropagation","args","call","onMouseEvent","updateMousePos","bndr","rect","getBoundingClientRect","clientX","left","clientY","top","gamepads","lastButtonStates","lastAxisStates","gamepad","index","id","getGamepads","gps","navigator","gp","_stepGamepads","lastState","getLastState","pressed","gamepadButtonEvent","setLastState","axis","dz","getDeadZone","getLastAxisState","gamepadAxisEvent","zeroed","gpIndex","state","gamepadIndex","deadZone","button","onGamepadButtonEvent","GamepadButtonEvent","func","keyIdentifier","gamepadId","axisIndex","setLastAxisState","gpMap","getGamepadMap","stick","GamepadAxisEvent","values","getValueByAxisId","onGamepadAxis","stripModifiers","mods","ret","mod","importKeyConfig","_key","KeyCodeMap","map","conf","_loadListener","methods","avail","code","Number","isNaN","_code","arr","event","Gamepad","prototype","axisId","_stack","_listeners","ScreenManager","idIncrementer","getNewId","set","Proxy","get","target","ScreenEventListener","stack","screen","_step","_isFinished","onScreenFinished","_finalData","$manager","$id","onAddedToManager","onScreenAdded","pop","onRemovedFromManager","onScreensRemoved","onWarnPopScreen","findIndex","s","screensRemoved","slice","reverse","addScreenEventListener","manager","replaced","RIGHT","LEFT","BaseSprite","image","framesX","framesY","offsetX","offsetY","getImage","frames","frameWidth","frameHeight","totalFrames","scaleToWidth","currentFrameIndex","parseSpriteSheet","setFrame","frame","sx","sy","frameIndex","pos","use","useShadow","drawWidth","drawHeight","save","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawImage","restore","valid_positions_x","valid_positions_y","Dialog","position","positionX","positionY","backgroundColor","textColor","title","visible","borderColor","borderWidth","_x","_y","__calcPosition","show","getPosition","_drawBorder","_drawBackground","font","fillText","bw","closePath","hide","_positionX","_positionY","c_width","c_height","__getXfromPositionX","__getYfromPositionY","posX","posY","_offsetX","_offsetY","positions","__validatePositionX","__validatePositionY","LudicApp","setConfig","screenManager","input","util","devmode","running","lastTime","Date","now","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","_animate","time","_time","update","updateFunction","timeTotal","averageArray","period","average","onmessage","postMessage","Screen","rest","onDestroy","MultiSprite","start","count","_ix","end","slices","sliceName","states","setSlice","optScale","fl","df","floor","axesLength","HUD","$refs","elements","resetTransform","drawAxes","render","element","ref","MenuDialog","menuItems","item","MenuItem","newEventListener","up","selectPreviousItem","selectNextItem","toggleMenuOpen","selectedItemIndex","selectItem","selectedItem","deselect","select","keyDown","toggle","text","selected","Text","fontFamily","fontSize","fontSizeUnit","color","drawStyle","adjustOrigin","_adjustOrigin","setFontSize","setPosition","__fontSize","strokeText","_fontSize","setPositionX","setPositionY","unit","parseFloat","classTypeOf","typeToCheck","getPrototypeOf","Function","ImageAssetLoader","PrivateProperty","weakMap","WeakMap","ctor","setArgs","defineProperty","enumerable","path","reduce","prev","curr","Path2D","p","arc","ellipse"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 788b9a67a4e515f7a59b","\nvar _config = {\n  canvas: {\n    dimension: '2d',\n  },\n  console: {\n    log: true\n  }\n};\n\nclass Util {\n\n  static convertHex(hex,opacity){\n    hex = hex.replace('#','');\n    var r = parseInt(hex.substring(0,2), 16);\n    var g = parseInt(hex.substring(2,4), 16);\n    var b = parseInt(hex.substring(4,6), 16);\n\n    var result = 'rgba('+r+','+g+','+b+','+opacity+')';\n    return result;\n  }\n\n  static myRound(val,places) {\n    var c = 1;\n    for (var i = 0; i < places; i++)\n      c *= 10;\n    return Math.round(val*c)/c;\n  }\n\n  static using(self, ns, pattern, logNames, logValues){\n    self = self || this;\n    if (pattern == undefined) {\n        // import all\n        for (var name in ns) {\n            if(!logNames){\n              self[name] = ns[name];\n            } else {\n              console.log(name, logValues?ns[name]:'');\n            }\n        }\n    } else {\n        if (typeof(pattern) == 'string') {\n            pattern = new RegExp(pattern);\n        }\n        // import only stuff matching given pattern\n        for (var name in ns) {\n            if (name.match(pattern)) {\n              if(!logNames){\n                self[name] = ns[name];\n              } else {\n                console.log(name, logValues?ns[name]:'');\n              }\n            }\n        }\n    }\n  }\n\n  static extend() {\n    for (var i = 1; i < arguments.length; i++){\n\n      if(typeof arguments[i] === 'object' && !(arguments[i] instanceof HTMLElement)){\n        for (var key in arguments[i]){\n          if (arguments[i].hasOwnProperty(key)){\n            arguments[0] = arguments[0] || {};\n            var obj = this.extend(arguments[0][key], arguments[i][key]);\n            arguments[0][key] = obj;\n          }\n        }\n      } else {\n        arguments[0] = arguments[i];\n      }\n\n    }\n    return arguments[0];\n  }\n\n  static setConfig(config){\n    _config = this.extend(_config, config);\n    this.configure();\n  }\n\n  static getConfig(){\n    return _config;\n  }\n\n  static readConfig(scope, param = '', def = undefined){\n    let params = param ? param.split('.') : [];\n    let obj = _config[scope];\n\n    obj = Object.resolve(param, obj)\n    if(obj==null){\n      obj = def\n    }\n    return obj;\n  }\n\n  static setParam(scope, param, value){\n    var params = param.split('.');\n\n    var obj;\n\n    try {\n      obj = _config[scope] = _config[scope] || {};\n\n      for(var i=0,l=params.length; i<l; i++){\n        // obj = obj[params[i]];\n        var prop = params[i];\n        obj = obj[prop] = obj[prop] || (i==l-1) ? value : {};\n      }\n    } catch (e) {\n      obj = null;\n    }\n\n    this.configure();\n  }\n\n  static configure(){\n    this.configureConsole();\n  }\n\n  static configureConsole(){\n\n    if(!_config.console.log){\n      console._log = console.log;\n      console.log = function(){};\n    }\n  }\n\n}\n\nexport default Util;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/util.js","\n\nclass Ludic {\n  constructor() {\n    this.extensions = {};\n  }\n}\n\nexport default new Ludic();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/ludic.js","import Util from '../util/util';\n\nclass Canvas {\n  constructor() {\n    this.setupCanvas();\n    this.config = Util.readConfig('canvas');\n    this.focus();\n\n  }\n\n  setupCanvas(){\n    let canvasConfig = Util.readConfig('el')\n    let canvas;\n\n    if(typeof canvasConfig === 'string'){\n      canvas = document.querySelector(canvasConfig)\n    } else if(canvasConfig instanceof HTMLElement){\n      canvas = canvasConfig\n    } else {\n      console.warn(`Ludic::Canvas: Unknown property type passed as 'el'.`, canvasConfig);\n    }\n\n    if(canvas != null){\n      // make sure canvas has 'tabindex' attr for key binding\n      canvas.setAttribute('tabindex', canvas.getAttribute('tabindex') || '1');\n      this.setElement(canvas);\n    } else {\n      console.warn(`Ludic::Canvas: Ludic does not have a canvas to bind to. Please supply one with the 'el' config property.`);\n    }\n  }\n\n  resize(){\n    this.el.width = window.innerWidth;\n    this.el.height = window.innerHeight;\n  }\n\n  focus(){\n    this.el.focus();\n  }\n\n  getElement() {\n    return this.el;\n  }\n\n  setElement(canvas){\n    this.el = canvas;\n  }\n\n  addEventListener(){\n    this.el.addEventListener.apply(this.el, arguments);\n  }\n\n  removeEventListener(){\n    this.el.removeEventListener.apply(this.el, arguments);\n  }\n\n  getContext(dimension = this.config.dimension){\n    return this.el.getContext(dimension);\n  }\n\n  height(){\n    return this.el.height;\n  }\n\n  width(){\n    return this.el.width;\n  }\n\n  /**\n   * Helper function to clear the current context at full width-height\n   * @param {String} clearColor - color to clear the screen with\n   */\n  clear(clearColor = 'white', context = this.getContext()){\n    context.fillStyle = clearColor\n    context.clearRect(0, 0, this.width(), this.height())\n    context.fillRect(0, 0, this.width(), this.height())\n  }\n}\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/canvas/canvas.js","\nexport default class HUDElement {\n  constructor() {\n\n  }\n\n  render(delta){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/HUDElement.js","\n\nclass Asset {\n  constructor(name, url, type, options) {\n    this.name = name;\n    this.url = url;\n    this.type = type;\n    this.options = options || {};\n\n  }\n\n  load(){\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  onAssetResolve(am){\n  }\n\n  onAssetReject(am){\n\n  }\n\n  destroy(){\n    this.name = null;\n    this.url = null;\n    this.type = null;\n    this.options = null;\n    this.data = null;\n  }\n}\n\nexport default Asset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/asset.js","// import ImageAsset from './imageAsset';\n// import RubeAsset from './rubeAsset';\n// import RubeImageAsset from './rubeImageAsset';\nimport ImageLoader from './imageAssetLoader';\n\nclass AssetManager {\n  constructor() {\n    this.assets = {};\n\n    this.loadQueue = [];\n    this.promiseQueue = [];\n    this.loaders = {};\n\n    this.addLoader('image', ImageLoader);\n  }\n\n  loadResource(name, url, type, options, overwrite){\n    // let promise = Promise.reject({\n    //   reason: \"resource load failed\",\n    //   name,\n    //   url,\n    //   type,\n    //   options,\n    //   overwrite\n    // });\n    let promise = null;\n    // first check if we have the asset\n    if(!this.assets[name] || overwrite){\n      var asset = this.NewAsset(name, url, type, options);\n      if(asset){\n        this.loadQueue.push(asset);\n\n        this.loading = true;\n\n        promise = asset.promise.then(this.onAssetResolve.bind(this), this.onAssetReject.bind(this));\n      }\n    }\n    return promise;\n  }\n\n  getAsset(name){\n    return this.assets[name];\n  }\n\n  getImage(name){\n    var asset = this.getAsset(name);\n\n    switch (asset.type) {\n      case 'image':\n      case 'rubeImage':\n        return asset.data;\n        break;\n      default:\n        return null;\n    }\n  }\n\n  getData(name){\n    return this.getAsset(name).data;\n  }\n\n  onAssetResolve(asset){\n    this.assets[asset.name] = asset;\n    asset.onAssetResolve(this);\n    return asset;\n  }\n\n  onAssetReject(){\n    console.log('rejected: ',arguments);\n    return Promise.reject({\n      reason: 'onAssetReject'\n    });\n  }\n\n  isLoading(){\n    return this.loading;\n  }\n\n  step(){\n\n    if(this.loadQueue.length==0){\n      if(!this.finalPromise){\n        this.finalPromise = Promise.all(this.promiseQueue).then(()=>{\n          if(this.finalPromise){ // [tries to*] assures that this is not called prematurely if an asset is added late\n            this.assetsLoaded.apply(this, arguments);\n            this.promiseQueue = []; // reset promise queue to free objects;\n          }\n        });\n      }\n    } else {\n      this.finalPromise = null;\n      var asset = this.loadQueue.shift();\n      this.promiseQueue.push(asset.promise);\n      asset.load();\n    }\n\n  }\n\n  assetsLoaded(){\n    // console.log('all assets loaded: ',arguments);\n    if(this.onAssetsLoadedCallback){\n      this.onAssetsLoadedCallback(this);\n    }\n    this.loading = false;\n  }\n\n  setOnAssetsLoadedCallback(callback){\n    this.onAssetsLoadedCallback = callback;\n  }\n\n  NewAsset(name, url, type, options){\n    type = type || 'image';\n    // switch (type) {\n    //   case 'image':\n    //     return new ImageAsset(name, url, type, options);\n    //     break;\n    //   case 'rube':\n    //     return new RubeAsset(name, url, type, options);\n    //     break;\n    //   case 'rubeImage':\n    //     return new RubeImageAsset(name, url, type, options);\n    //     break;\n    //   default:\n    //     return null;\n    // }\n\n    let loader = this.loaders[type];\n\n    if(loader){\n      return loader.load(name, url, type, options);\n    } else {\n      return null;\n    }\n  }\n\n  destroyAsset(asset){\n    delete this.assets[asset.name];\n    asset.destroy();\n  }\n\n  addLoader(fileTypes, loader){\n    if(typeof fileTypes === 'string'){\n      fileTypes = [fileTypes];\n    }\n\n    fileTypes.forEach((type)=>{\n      this.loaders[type] = loader;\n    });\n  }\n}\n\nexport default new AssetManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/assetManager.js","import Util from '../util/util';\nimport Vector2 from '../engine/Vector2';\nimport Canvas from 'components/canvas/canvas';\nimport Ludic from 'components/app/ludic';\n\nvar DEFAULT_PTM = 32;\n\nconst DEFAULTS = {\n  inverseY: true,\n  inverseX: false,\n  x: 0,\n  y: 0,\n  ptm: DEFAULT_PTM,\n}\n\nclass Camera {\n\n  /**\n   * `new Camera(options)`\n   * @param {object} [options] - options object\n   * @param {boolean} [options.inverseY=true] - make 'y' axis point up\n   * @param {boolean} [options.inverseX=false] - make 'x' axis point left\n   * @param {number} [options.x=0] - 'x' coordinate to start the camera\n   * @param {number} [options.y=0] - 'y' coordinate to start the camera\n   * @param {number} [options.width=Ludic.canvas.width()] - width of the camera view\n   * @param {number} [options.height=Ludic.canvas.height()] - height of the camera view\n   *\n   * `new Camera({Canvas})`\n   * @param {Canvas} [canvas] - optional canvas to provide dimensions\n   *\n   * `new Camera(ptm)` - assumes fill canvas width/height\n   * @param {number} [ptm] - pixels to meters scaling factor\n   *\n   * `new Camera(width,height)`\n   * @param {number} [width] - width of the camera view\n   * @param {number} [height] - height of the camera view\n   *\n   * `new Camera(x,y,width,height)`\n   * @param {number} [x] - 'x' coordinate to start the camera\n   * @param {number} [y] - 'y' coordinate to start the camera\n   * @param {number} [width] - width of the camera view\n   * @param {number} [height] - height of the camera view\n   */\n  constructor(){\n    let options = Object.assign({},DEFAULTS,{\n      width: Ludic.canvas.width(),\n      height: Ludic.canvas.height(),\n    });\n    if(arguments.length === 1){\n      if(typeof arguments[0] === 'object'){\n        if(arguments[0] instanceof Canvas){\n          options.width = canvas.width();\n          option.height = canva.height();\n        } else {\n          // options argument\n          options = Object.assign(options, arguments[0])\n        }\n      } else if(typeof arguments[0] === 'number'){\n        // arg is ptm\n        options.ptm = arguments[0];\n      } else {\n        console.warn(`Camera::Unknown single argument '${typeof arguments[0]}'.`, arguments);\n      }\n    } else if(arguments.length === 2) {\n      // width and height\n      let [width, height] = arguments;\n      options.width = width;\n      options.height = height;\n    } else if(arguments.length === 4){\n      // x,y,width,height\n      let [x,y,width,height] = arguments;\n      options.x = x;\n      options.y = y;\n      options.width = width;\n      options.height = height;\n    } else if(arguments.length !== 0) {\n      console.warn(`Camera::Unknown arguments.`, arguments);\n    }\n\n    // apply the options\n    this.x = options.x;\n    this.y = options.y;\n    this.width = options.width;\n    this.height = options.height;\n    this.inverseX = options.inverseX;\n    this.inverseY = options.inverseY;\n    this.ptm = options.ptm;\n\n    // setup variables\n    this.viewCenterPixel = {\n      x: 0,\n      y: 0\n    };\n    this.singleWorldPoint = {\n      x:0,\n      y:0\n    };\n    this.singlePixelPoint = {\n      x:0,\n      y:0\n    };\n    this.offset = {\n      x:0,\n      y:0\n    };\n    this.futurePos = new Vector2(0,0);\n\n    this.updateEnvironmentVariables();\n    window.addEventListener('resize', this.updateEnvironmentVariables.bind(this), false);\n\n    window.camera = this;\n  }\n\n  getCanvas(){\n    return this.canvas;\n  }\n\n\n  draw(ctx){\n\n    this.setTransform(ctx);\n\n  }\n\n  drawAxes(ctx) {\n    ctx.strokeStyle = 'rgb(192,0,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(1, 0);\n    ctx.stroke();\n    ctx.strokeStyle = 'rgb(0,192,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(0, 1);\n    ctx.stroke();\n  }\n\n  setChaseEntity(ent,chaseMethod){\n    this.chaseEntity = ent;\n    this.chaseMethod = chaseMethod;\n  }\n\n  setChaseMethod(chaseMethod){\n    this.chaseMethod = chaseMethod;\n  }\n\n  getWorldPointFromPixelPoint(pixelPoint) {\n    this.singleWorldPoint.x = this._getWorldPointFromPixelPoint_x(pixelPoint.x)\n    this.singleWorldPoint.y = this._getWorldPointFromPixelPoint_y(pixelPoint.y);\n    return this.singleWorldPoint;\n  }\n\n  _getWorldPointFromPixelPoint_x(x){\n    // let inv = (this.offset.x - x) / this.ptm;\n    // let reg = (x - this.offset.x) / this.ptm;\n    return (this.inverseX ? (this.offset.x - x) : (x - this.offset.x)) / this.ptm\n  }\n\n  _getWorldPointFromPixelPoint_y(y){\n    // let inv = (y - (this.height - this.offset.y)) / this.ptm;\n    // let reg = ((this.height - this.offset.y) - y) / this.ptm;\n    return (this.inverseY ? (y - (this.height - this.offset.y)) : ((this.height - this.offset.y) - y)) / this.ptm\n  }\n\n  getPixelPointFromWorldPoint(worldPoint){\n    this.singlePixelPoint.x = this._getPixelPointFromWorldPoint_x(worldPoint.x);\n    this.singlePixelPoint.y = this._getPixelPointFromWorldPoint_y(worldPoint.y);\n    return this.singlePixelPoint;\n  }\n\n  _getPixelPointFromWorldPoint_x(x){\n    // let reg = (x*this.ptm) + this.offset.x;\n    // let inv = this.offset.x - (x*this.ptm);\n    return this.inverseX ? (this.offset.x - (x*this.ptm)) : ((x*this.ptm) + this.offset.x);\n  }\n\n  _getPixelPointFromWorldPoint_y(y){\n    // let inv = (y*this.ptm) + (this.height - this.offset.y);\n    // let reg = (this.height - this.offset.y) - (y*this.ptm);\n    return this.inverseY ? ((y*this.ptm) + (this.height - this.offset.y)) : ((this.height - this.offset.y) - (y*this.ptm));\n  }\n\n  setViewCenterWorld(vector2, instantaneous, fraction) {\n    var currentViewCenterWorld = this.getViewCenterWorld();\n    var toMove = {};\n    toMove.x = vector2.get_x() - currentViewCenterWorld.x;\n    toMove.y = vector2.get_y() - currentViewCenterWorld.y;\n    this.moveCenterBy(toMove, instantaneous, fraction);\n  }\n\n  centerWorldToCamera(){\n    // this.setViewCenterWorld(new Vector2(), true);\n    this.setOffset(this.viewCenterPixel);\n  }\n\n  centerWorldToTopLeft(){\n    this.setViewCenterWorld(new Vector2(), true);\n  }\n\n  getViewCenterWorld(){\n    return this.getWorldPointFromPixelPoint( this.viewCenterPixel );\n  }\n\n  moveCenterBy(toMove,instantaneous, fraction){\n    fraction = fraction || instantaneous ? 1 : 0.25;\n    this.offset.x -= Util.myRound(fraction * toMove.x * this.ptm, 0);\n    this.offset.y += Util.myRound(fraction * toMove.y * this.ptm, 0);\n  }\n\n  updateEnvironmentVariables(){\n    this.viewCenterPixel = {\n      x: this.width / 2,\n      y: this.height / 2\n    };\n  }\n\n  getViewCenterPixel(){\n    return this.viewCenterPixel\n  }\n\n  getViewportBounds(){\n    var bounds = {\n      x: this._getWorldPointFromPixelPoint_x(0),\n      y: this._getWorldPointFromPixelPoint_y(0),\n      w: this._getWorldPointFromPixelPoint_x(this.width),\n      h: this._getWorldPointFromPixelPoint_y(this.height),\n    }\n    return bounds;\n  }\n\n  getPTM(){\n    return this.ptm;\n  }\n\n  setPTM(ptm){\n    this.ptm = ptm;\n  }\n\n  getOffset(){\n    return this.offset;\n  }\n\n  getOffsetX(){\n    return this.offset.x;\n  }\n\n  getOffsetY(){\n    return this.offset.y;\n  }\n\n  setOffset(obj, y){\n    if(typeof obj === 'object' && !y){\n      this.offset.x = obj['x'] || 0;\n      this.offset.y = obj['y'] || 0;\n    } else if(typeof obj === 'number' && typeof y === 'number'){\n      this.offset.x = obj;\n      this.offset.y = y;\n    }\n  }\n\n  setTransform(ctx){\n    ctx.translate(this.getOffsetX(), this.getOffsetY());\n    let ptm = this.getPTM();\n    // apply the scaling factor and inverses\n    ctx.scale(this.inverseX ? -ptm : ptm, this.inverseY ? -ptm : ptm);\n    ctx.lineWidth /= ptm;\n  }\n\n  resetTransform(ctx){\n    let ptm = this.getPTM();\n    // ctx.scale(1 / this.getPTM(),1 / this.getPTM());\n    ctx.scale(this.inverseX ? (-1 / ptm) : (1 / ptm), this.inverseY ? (-1 / ptm) : (1 / ptm));\n    ctx.lineWidth *= ptm;\n    ctx.translate(-this.getOffsetX(), -this.getOffsetY());\n  }\n}\n\n\nexport default Camera;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/camera.js","import Asset from './asset';\n\nclass ImageAsset extends Asset {\n  constructor(name, url, type, options) {\n    super(name, url, type || 'image', options);\n\n    this.data = new Image();\n    this.promise = new Promise((resolve,reject)=>{\n      this.data.onload = this.onload(resolve,reject);\n    });\n\n  }\n\n  load(){\n    this.data.src = this.url;\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  destroy(){\n\n  }\n}\n\nexport default ImageAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAsset.js","\n\nexport default class Vector2 {\n  constructor(x = 0,y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  get_x(){\n    return this.x;\n  }\n  get_y(){\n    return this.y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/engine/Vector2.js","import Util from '../util/util';\nimport KeyCodeMap from './keyCodeMap';\n\nlet listeners = [];\nlet defaultKeyConfig = {\n  preventDefault: true\n}\nlet ps4Mapping = {\n  buttons: ['cross','circle','square','triangle','l1','r1','l2','r2','extra','start','l3','r3','up','down','left','right','home','select'],\n  axes: ['lx','ly','rx','ry'],\n  sticks: {\n    lx:'leftStick',\n    ly:'leftStick',\n    rx:'rightStick',\n    ry:'rightStick'\n  }\n};\n\nlet gamepadMaps = {\n  'Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)':ps4Mapping // ps4 controller\n};\n\nlet gamepadsAxisDeadZone = 0.08;\nlet gamepadsConfig = {};\n\nlet mousePosPixel = {};\nlet prevMousePosPixel = {};\n// let gamepadTypeMaps = [{id:'054c',type:'ps4'}];\n\nclass InputController {\n  constructor(canvas) {\n    this.canvas = canvas;\n    // this.config = Util.readConfig('input');\n    // TODO: refactor config\n    this.config = {};\n\n    this.initKeys();\n    this.initMouse();\n    this.initGamepads();\n  }\n\n  // input methods\n\n  addInputListener(listener){\n    listeners.push(listener);\n  }\n\n  /**\n   * Instantiates and returns a new InputEventListener\n   * @param {Object} options - passed along to new InputEventListener\n   * @param {Binder} binder (optional) - passed along to new InputEventListener\n   * @param {Boolean} alsoAdd (optional) - determines whether the returning InputEventListener should also be added to this\n   *\n   * @return {InputEventListener} - listener object used to attached handlers for input events\n   */\n  newInputListener(options, binder, alsoAdd){\n    if(typeof alsoAdd === 'undefined' && typeof binder === 'boolean'){\n      // alsoAdd was the second param, without binder\n      alsoAdd = binder;\n      binder = null;\n    }\n    var l = new InputEventListener(options, binder);\n    if(alsoAdd){\n      this.addInputListener(l);\n    }\n    return l;\n  }\n\n  removeInputListener(listener){\n    var ix = listeners.indexOf(listener);\n    if(ix>-1){\n      listeners.splice(ix,1);\n    }\n  }\n\n  //  -- keyboard\n  initKeys() {\n    // object for all key states\n    this.allKeys = {};\n\n    this.canvas.addEventListener('keydown', (evt)=>{\n      // evt.preventDefault();\n      // this.onKeyDown(this.canvas,evt);\n      this.onKeyEvent(this.canvas,evt);\n    }, false);\n\n    this.canvas.addEventListener('keyup', (evt)=>{\n      // evt.preventDefault();\n      // this.onKeyUp(this.canvas,evt);\n      this.onKeyEvent(this.canvas,evt);\n    }, false);\n  }\n\n  onKeyEvent(canvas, evt) {\n    // console.log(evt);\n    var l;\n    let down = evt.type === 'keydown';\n    let dir = down?'down':'up';\n\n    // give the event a list of all keys states\n    this.allKeys[evt.keyCode] = this.allKeys[evt.key] = down;\n    evt.allKeys = this.allKeys;\n\n    if(this.config.logAllKeys){\n      console.log(evt.keyCode);\n    }\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l || !l.enabled){ continue;}\n\n      let cfg = l.keyConfig;\n      let key = cfg[evt.keyCode];\n      let binder = l.binder || l;\n      if(key){\n        if(typeof key === 'object' || Array.isArray(key)) {\n          let keys;\n          // make array out of single object, treat everything like an array\n          if(Array.isArray(key)){\n            keys = key;\n          } else {\n            keys = [key];\n          }\n\n          // loop through all key configs\n          for(let key of keys){\n            let modifiers = false;\n            let direction = !key.hasOwnProperty('direction') || key.direction === dir || key.direction === 'both';\n            let method = key.hasOwnProperty('method') && key.method;\n            key._once = down?key._once:false;\n\n            // logic for modifiers\n            if(!!key.shiftKey == evt.shiftKey && !!key.altKey == evt.altKey && !!key.ctrlKey == evt.ctrlKey){\n              modifiers = true;\n            }\n\n            if(method && modifiers && direction && !key._once){\n              binder = key.binder || binder;\n              var b = this._execCommand(l,method,binder,down,evt);\n              key._once = key.once && down;\n            }\n          }\n        } else {\n          console.warn(`InputController: Unsupported key config type '${key}'`);\n        }\n      }\n      // else {\n      //   console.log('no config for keycode', evt.keyCode, key);\n      // }\n\n      // check for if listener wants the only control\n      if(l.stopPropagation){\n        break;\n      }\n    }\n\n  }\n\n  _execCommand(listener, method, binder, ...args){\n    if(typeof method === 'string'){\n      return listener[method].call(binder,...args);\n    } else if(typeof method === 'function'){\n      return method.call(binder,...args);\n    } else {\n      return false;\n    }\n  }\n\n\n  //  -- mouse\n  initMouse(){\n    this.canvas.addEventListener('mousemove', function(evt) {\n      this.onMouseEvent('mouseMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mousedown', function(evt) {\n      this.onMouseEvent('mouseDown',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseup', function(evt) {\n      this.onMouseEvent('mouseUp',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseout', function(evt) {\n      this.onMouseEvent('mouseOut',this.canvas.el,evt);\n    }.bind(this), false);\n\n    // touch events\n    this.canvas.addEventListener('touchstart', function(evt) {\n      this.onMouseEvent('touchStart',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchend', function(evt) {\n      this.onMouseEvent('touchEnd',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchmove', function(evt) {\n      this.onMouseEvent('touchMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchcancel', function(evt) {\n      this.onMouseEvent('touchCancel',this.canvas,evt);\n    }.bind(this), false);\n  }\n\n  onMouseEvent(key, canvas, evt){\n    prevMousePosPixel = mousePosPixel;\n    this.updateMousePos(canvas, evt);\n\n    for(var i=listeners.length-1; i>=0; i--){\n      let l = listeners[i];\n      if(l && l.enabled){\n        if(l.hasOwnProperty(key)){\n          let bndr = l.binder || l;\n          let b = l[key].call(bndr,mousePosPixel,evt);\n          if(b === true){\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  //    -- mouse helper function\n  updateMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    mousePosPixel = {\n      x: evt.clientX - rect.left,\n      y: canvas.height - (evt.clientY - rect.top)\n    };\n  }\n\n  //  -- gamepad\n  initGamepads(){\n    this.gamepads = {};\n    this.lastButtonStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    this.lastAxisStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    window.addEventListener(\"gamepadconnected\", (e)=>{\n      console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\n        e.gamepad.index, e.gamepad.id,\n        e.gamepad.buttons.length, e.gamepad.axes.length);\n      console.log(e.gamepad);\n      this.getGamepads();\n    });\n    window.addEventListener(\"gamepaddisconnected\", (e)=>{\n      console.log('Gamepad disconnected: ',e);\n      this.getGamepads();\n    });\n\n    window.addEventListener('gamepadbuttondown', (e)=>{\n      console.log('gamepad button down: ',e);\n    });\n\n    window.addEventListener('gamepadbuttonup', (e)=>{\n      console.log('gamepad button up: ',e);\n    });\n  }\n\n  getGamepads(){\n    var gps = navigator.getGamepads() || [];\n    var gp;\n    for(var i=0;i<gps.length;i++){\n      gp = gps[i];\n      if(gp){\n        this.gamepads[gp.index] = gp;\n      }\n    }\n    return this.gamepads;\n  }\n\n  update(){\n    this._stepGamepads();\n  }\n\n  _stepGamepads(){\n    var gps = this.getGamepads();\n    var gp;\n    for(var i in gps){\n      gp = gps[i]; // gamepad instance from api\n      if(gp){\n\n        // for each gamepad that the api reads; poll the state of each button,\n        //  sending an event when pressed\n        gp.buttons.forEach( (b,ix)=>{\n          // get the last known state of the button\n          var lastState = this.getLastState(i,ix);\n          b.index = ix; // tell the button what it's index is\n          b.lastState = lastState;\n\n          if(b.pressed){\n            // if pressed, create a button event and set the buttons last known state\n            this.gamepadButtonEvent(gp,b,true);\n            this.setLastState(i,ix,true);\n          } else {\n            if(lastState) {\n              // if the button is not pressed but its last state was pressed, create a 'button up' event\n              if(lastState.pressed) {\n                this.gamepadButtonEvent(gp,b,false);\n              }\n            }\n            // set the buttons last known state for not pressed\n            this.setLastState(i,ix,false);\n          }\n        });\n\n        // do the same thing for each of the axis (analog sticks)\n        // loop through each and poll state\n        gp.axes.forEach( (value,axis)=>{\n          // get the deadZone associated with each axis\n          var dz = this.getDeadZone(axis);\n          // get the last known state for the axis\n          var lastState = this.getLastAxisState(i,axis);\n\n          // if the value of the axis is withing the bounds of the deadzone\n          //  create an axis event\n          if( value < -dz || value > dz ){\n            this.gamepadAxisEvent(gp,axis,value,false);\n          } else if(!lastState.zeroed){\n            this.gamepadAxisEvent(gp,axis,0,true);\n          }\n        });\n      } else {\n        console.log('no gamepad!',i);\n      }\n    }\n  }\n\n  getLastAxisState(gpIndex,axis){\n    var b = this.lastAxisStates[gpIndex][axis] || {zeroed:true};\n    return b;\n  }\n\n  setLastAxisState(gpIndex,axis,state){\n    this.lastAxisStates[gpIndex][axis] = {zeroed:state};\n  }\n\n  getDeadZone(gamepadIndex){\n    if(gamepadsConfig.hasOwnProperty(gamepadIndex) && gamepadsConfig[gamepadIndex].hasOwnProperty(deadZone)){\n      return gamepadsConfig[gamepadIndex].deadZone;\n    }\n    return gamepadsAxisDeadZone;\n  }\n\n  setDeadZone(deadZone,gamepadIndex){\n    if(gamepadIndex !== null && gamepadIndex !== undefined){\n      if(gamepadsConfig.hasOwnProperty(gamepadIndex)){\n        gamepadsConfig[gamepadIndex].deadZone = deadZone;\n      } else {\n        gamepadsConfig[gamepadIndex] = {deadZone: deadZone};\n      }\n    } else {\n      gamepadsAxisDeadZone = deadZone;\n    }\n  }\n\n  getLastState(i,ix){\n    var b = this.lastButtonStates[i][ix];\n    return b;\n  }\n\n  setLastState(i,ix,state){\n    this.lastButtonStates[i][ix] = {pressed:state};\n  }\n\n  gamepadButtonEvent(gamepad,button,down) {\n    button.id = gamepadMaps[gamepad.id].buttons[button.index];\n    if(button.id){\n      this.onGamepadButtonEvent(new GamepadButtonEvent(gamepad,button,down));\n    } else {\n      console.log(arguments);\n    }\n  }\n\n  onGamepadButtonEvent(evt){\n    var l;\n    let down = evt.down;\n\n    // if(this.config.logAllKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier);\n    // }\n    for(let i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l || !l.enabled){\n        continue;\n      }\n      let func = l[evt.keyIdentifier];\n      if(!func){\n        continue;\n      }\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      let b = func.call(bndr,down,evt);\n      if(b === true){\n        return;\n      }\n      // check for if listener wants the only control\n      if(l.stopPropagation){\n        break;\n      }\n    }\n    // if(this.config.logUnmappedKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier,evt.button.value, listeners.length===0?\"No listeners\":\"\");\n    // }\n  }\n\n  getGamepadMap(gamepadId){\n    return gamepadMaps[gamepadId] || {};\n  }\n\n  gamepadAxisEvent(gamepad,axisIndex,value,zeroed){\n    this.setLastAxisState(gamepad.index,axisIndex,zeroed);\n    var gpMap = this.getGamepadMap(gamepad.id);\n    var axis = {};\n    axis.id = gpMap.axes[axisIndex];\n    axis.stick = gpMap.sticks[axis.id];\n    axis.index = axisIndex;\n    axis.value = value;\n    axis.zeroed = zeroed;\n\n    var evt = new GamepadAxisEvent(gamepad,axis);\n    evt.values = {};\n    if(axis.stick==='leftStick'){\n      evt.values.x = gamepad.getValueByAxisId('lx');\n      evt.values.y = gamepad.getValueByAxisId('ly');\n    } else if(axis.stick==='rightStick'){\n      evt.values.x = gamepad.getValueByAxisId('rx');\n      evt.values.y = gamepad.getValueByAxisId('ry');\n    }\n\n\n\n\n    this.onGamepadAxis(evt);\n  }\n\n  onGamepadAxis(evt){\n    var l;\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l){\n        continue;\n      }\n\n      let func = l[evt.stick];\n      if(!func){\n        continue;\n      }\n      // only fire for correct gamepadIndex\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      if(func.call(bndr,evt.values.x,evt.values.y,evt) === false){\n        continue;\n      }\n      return;\n    }\n  }\n\n}\n\nlet stripModifiers = function(key){\n  let mods = key.split('.');\n  key = mods[0];\n  let ret = {key, config:{}};\n  if(mods.length > 1){\n    for(let i=1; i<mods.length; i++){\n      let mod = mods[i];\n      switch (mod) {\n        case 'alt':\n        case 'altKey':\n          ret.config.altKey = true;\n          break;\n        case 'shift':\n        case 'shiftKey':\n          ret.config.shiftKey = true;\n          break;\n        case 'ctrl':\n        case 'ctrlKey':\n          ret.config.ctrlKey = true;\n          break;\n        case 'up':\n          ret.config.direction = 'up';\n          break;\n        case 'down':\n          ret.config.direction = 'down';\n          break;\n        case 'once':\n          ret.config.once = true;\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  return ret;\n}\n\nlet importKeyConfig = function(keyConfig){\n  let config = {};\n  for(let key in keyConfig){\n    let mods = stripModifiers(key);\n    let _key = key;\n    let cfg = keyConfig[key];\n    key = KeyCodeMap[mods.key] || mods.key;\n\n    // everything needs to be an array of objects\n    if(typeof cfg === 'string' || typeof cfg === 'function'){\n      config[key] = [Object.assign({},{method:cfg},mods.config)];\n    } else if(typeof cfg === 'object' && !Array.isArray(cfg)){\n      config[key] = [Object.assign({},mods.config,cfg)];\n    } else if(Array.isArray(cfg)){\n      config[key] = cfg.map((conf)=>{\n        return Object.assign({},mods.config,conf);\n      });\n    } else {\n      console.warn(`InputController: Unsupported key config type '${typeof cfg}' for '${key}'`, cfg);\n    }\n  }\n  return config;\n}\n\nclass InputEventListener {\n  constructor(options, binder) {\n    let keyConfig = options;\n    if(options.hasOwnProperty('keyConfig')){\n      keyConfig = options.keyConfig;\n    }\n    if(options.hasOwnProperty('gamepadIndex')){\n      this.gamepadIndex = options.gamepadIndex;\n    } else {\n      this.gamepadIndex = -1;\n    }\n    if(options.hasOwnProperty('binder')){\n      binder = options.binder;\n    }\n\n    this.stopPropagation = options.stopPropagation;\n\n    this.keyConfig = importKeyConfig.call(this,keyConfig);\n    this.options = options;\n    this.binder = binder;\n    this.enabled = options.hasOwnProperty('enabled') ? options.enabled : true;\n\n    if(options.hasOwnProperty('methods')){\n      this._loadListener(options.methods);\n    }\n  }\n\n  $enable(){\n    this.enabled = true;\n  }\n\n  $disable(){\n    this.enabled = false;\n  }\n\n  _loadListener(listener){\n    let avail = ['start', 'select', 'home', 'extra', 'left', 'right', 'up', 'down',\n      'l1', 'l2', 'l3', 'r1', 'r2', 'r3', 'triangle', 'square', 'circle', 'cross',\n      'leftStick', 'rightStick', 'mouseMove', 'mouseDown', 'mouseUp', 'mouseOut',\n      'touchStart', 'touchEnd', 'touchMove', 'touchCancel',\n    ];\n\n    for(let key of avail){\n      if(key in listener){\n        let method = listener[key];\n\n        if(typeof method === 'function'){\n          this[key] = method;\n        } else if(typeof method === 'string'){\n          console.log(this.keyConfig);\n          let code = method;\n\n          if(Number.isNaN(parseInt(code))){\n            // need to convert char\n            let _code = KeyCodeMap[code];\n            if(_code){\n              code = _code;\n            } else {\n              console.warn('There is no mapping for: ', method);\n              continue;\n            }\n          }\n\n          let arr = this.keyConfig[code];\n\n          if(arr.length === 1){\n            this[key] = arr[0].method\n          } else {\n            console.warn('multiple entries per keycode is not supported at this yet.', key, arr, method);\n          }\n        }\n      }\n    }\n  }\n\n  start(){\n    return null;\n  }\n\n  select(){\n    return null;\n  }\n\n  home(){  // ps/xb button\n    return null;\n  }\n\n  left(){\n    return null;\n  }\n\n  right(){\n    return null;\n  }\n\n  up(){\n    return null;\n  }\n\n  down(){\n    return null;\n  }\n\n  l1(){\n    return null;\n  }\n\n  l2(){\n    return null;\n  }\n\n  l3(){\n    return null;\n  }\n\n  r1(){\n    return null;\n  }\n\n  r2(){\n    return null;\n  }\n\n  r3(){\n    return null;\n  }\n\n  triangle(){\n    return null;\n  }\n\n  square(){\n    return null;\n  }\n\n  circle(){\n    return null;\n  }\n\n  cross(){\n    return null;\n  }\n\n  extra(){\n    return null;\n  }\n\n  leftStick(x,y,event){\n    return null;\n  }\n\n  rightStick(x,y,event){\n    return null;\n  }\n}\n// assign the InputEventListener class as a static property on InputController\n//  so it can be instantiated properly outside of this module\nInputController.InputEventListener = InputEventListener;\n\nclass GamepadButtonEvent {\n  constructor(gamepad,button,down) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.button = button;\n    this.down = down;\n    this.type = 'gamepadButtonEvent';\n    this.keyCode = button.index;\n    this.keyIdentifier = button.id;\n  }\n}\n\n\n\nclass GamepadAxisEvent {\n  constructor(gamepad,axis) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.axis = axis;\n    this.stick = axis.stick;\n    this.keyCode = 200+axis.index;\n    this.keyIdentifier = axis.id;\n    this.values = axis.values;\n    this.type = 'gamepadAxisEvent';\n  }\n}\n\nGamepad.prototype.getValueByAxisId = function(axisId){\n  var gp = gamepadMaps[this.id];\n  var ix = gp.axes.indexOf(axisId);\n  if(ix>-1){\n    return this.axes[ix];\n  }\n  return;\n}\n\nexport default InputController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/inputController.js","import PrivateProperty from 'components/util/privateProperty'\n\nlet _stack = new PrivateProperty();\nlet _listeners = new PrivateProperty();\n\nexport default class ScreenManager {\n  constructor() {\n    // initialize some private variables\n    let idIncrementer = 0;\n    this.getNewId = ()=>{\n      return idIncrementer++;\n    }\n\n    // define private properties\n    _listeners.set(this,new Proxy([],{\n      get(target,prop){\n        if(prop in ScreenEventListener.prototype){\n          return (...args)=>{\n            // only call prop if it exists\n            //  this allows for the 'listener' to not be a 'ScreenEventListener' but any object that defines its properties\n            target.forEach(e=> e[prop] != null ? e[prop].call(e,...args) : undefined)\n          }\n        }\n        return target[prop]\n      }\n    }))\n    _stack.set(this,[]);\n  }\n\n  update(delta){\n    let stack = _stack(this);\n    if(stack.length > 0){\n      let screen = stack[stack.length-1];\n      screen._step.apply(screen,arguments);\n\n      if(screen._isFinished){\n        _listeners(this).onScreenFinished(screen, this, screen._finalData);\n      }\n    }\n  }\n\n  addScreen(screen, replace){\n    let stack = _stack(this)\n    // give the screen a ref to the manager\n    screen.$manager = this;\n    // give the screen an id\n    screen.$id = this.getNewId()\n    if(replace){\n      stack.splice(stack.length-1,1,screen);\n    } else {\n      stack.push(screen);\n    }\n    // call screen's callback\n    screen.onAddedToManager(this)\n    // call listener methods\n    _listeners(this).onScreenAdded(screen, this, replace);\n  }\n\n  popScreen(){\n    let stack = _stack(this)\n    if(stack.length > 1){\n      let screen = stack.pop();\n      // call screen's callback\n      screen.onRemovedFromManager(this);\n      // call listener methods\n      _listeners(this).onScreensRemoved([screen], this);\n      return [screen];\n    } else {\n      // cannot pop the last screen, only replace.\n      _listeners(this).onWarnPopScreen(stack, this);\n      return [];\n    }\n  }\n\n  popToScreen(screen){\n    let stack = _stack(this)\n    if(!screen.hasOwnProperty('$id')){\n      return false;\n    }\n    let index = stack.findIndex((s)=>{\n      return s.$id === screen.$id\n    })\n    if(index === -1){\n      return false;\n    } else {\n      let screensRemoved = stack.splice(index);\n      // call screen callback method\n      screensRemoved.slice().reverse().forEach(screen => screen.onRemovedFromManager(this));\n      // call listener method\n      _listeners(this).onScreensRemoved(screensRemoved, this);\n      return screensRemoved;\n    }\n  }\n\n  addScreenEventListener(listener){\n    _listeners(this).push(listener)\n  }\n\n  getNewScreenEventListener(alsoAdd){\n    let listener = new ScreenEventListener()\n    if(alsoAdd){\n      this.addScreenEventListener(listener);\n    }\n    return listener;\n  }\n}\n\nclass ScreenEventListener {\n  onScreenFinished(screen, manager, data){}\n  onScreenAdded(screen, manager, replaced){}\n  onScreensRemoved(screen, manager){}\n  onWarnPopScreen(stack, manager){}\n}\n\nScreenManager.ScreenEventListener = ScreenEventListener;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screenManager.js","import AssetManager from '../base/assetManager';\n\nconst RIGHT = 10;\nconst LEFT  = 11;\n\nclass BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n\n    if(typeof image === 'string'){\n      this.image = AssetManager.getImage(image);\n    } else {\n      this.image = image;\n    }\n\n    if(!this.image){\n      console.warn('Sprite created without an image', this);\n      return;\n    }\n\n    this.width = this.image.width;\n    this.height = this.image.height;\n\n    this.frames = [];\n    this.framesX = framesX;\n    this.framesY = framesY;\n    this.frameWidth = this.width / this.framesX;\n    this.frameHeight = this.height / this.framesY;\n    this.totalFrames = this.framesX * this.framesY;\n\n    this.scaleToWidth(1);\n\n    this.setOffset(offsetX || 0, offsetY || 0);\n\n    this.currentFrameIndex = 0;\n\n    this.direction = RIGHT;\n\n    this.parseSpriteSheet();\n\n    this.setFrame();\n  }\n\n  parseSpriteSheet(){\n    for(var y = 0; y < this.framesY; y++){\n      for(var x = 0; x < this.framesX; x++){\n        var frame = {};\n        frame.sx = x * this.frameWidth;\n        frame.sy = y * this.frameHeight;\n\n        this.frames.push(frame);\n      }\n    }\n\n\n\n    console.log(this.frames);\n  }\n\n  animate(){\n    this.currentFrameIndex = (this.currentFrameIndex + 1) % this.frames.length;\n    this.setFrame();\n  }\n\n  setFrame(frameIndex){\n    frameIndex = frameIndex===undefined ? this.currentFrameIndex : frameIndex;\n    this.frame = this.frames[frameIndex];\n  }\n\n  setPosition(pos){\n    this.pos = pos;\n  }\n\n  setOffset(offset, offsetY){\n    if(typeof offset === 'object'){\n      this.offset = offset;\n    } else if(offsetY !== undefined){\n      this.offset = {\n        x: offset,\n        y: offsetY\n      }\n    }\n  }\n\n  setUseShadow(use){\n    this.useShadow = use;\n  }\n\n  setDirection(dir){\n    this.direction = dir;\n  }\n\n  scaleToWidth(w){\n    var h = w / this.frameWidth;\n    this.drawWidth = w;\n    this.drawHeight = h * this.frameHeight;\n  }\n\n  scaleToHeight(h){\n    var w = h / this.frameHeight;\n    this.drawWidth = w * this.frameWidth;\n    this.drawHeight = h;\n  }\n\n  scale(scale){\n    this.drawWidth *= scale;\n    this.drawHeight *= scale;\n  }\n\n  draw(ctx){\n\n    ctx.save();\n    if(this.direction === RIGHT){\n      ctx.scale(1,-1); // flip the y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(this.pos.x,-this.pos.y);\n    } else {\n      ctx.scale(-1,-1); // flip the x & y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(-this.pos.x,-this.pos.y);\n    }\n\n    if(this.useShadow){\n      ctx.shadowColor = 'black';\n      ctx.shadowBlur = 20;\n      ctx.shadowOffsetX = 5;\n      ctx.shadowOffsetY = 10;\n    }\n\n    ctx.drawImage(this.image, this.frame.sx, this.frame.sy, this.frameWidth, this.frameHeight, 0, 0, this.drawWidth, this.drawHeight);\n\n    ctx.restore();\n  }\n}\n\nexport default BaseSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/BaseSprite.js","import HUDElement from './HUDElement'\n\nconst valid_positions_x = ['center', 'left', 'right'];\nconst valid_positions_y = ['center', 'top', 'bottom'];\n\nexport default class Dialog extends HUDElement {\n  constructor({\n    // basic info, position and dimensions\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n\n    // used for calc based positioning\n    position = '',\n    positionX = '',\n    positionY = '',\n    offset = {x:0,y:0},\n    offsetX = 0,\n    offsetY = 0,\n\n    // basic color info, background and text colors\n    backgroundColor = 'black',\n    textColor = 'white',\n    title = '',\n\n    // allow for instant show when added\n    visible = false,\n\n    // border info\n    borderColor = 'blue',\n    borderWidth = 0,\n\n  } = {}) {\n    super()\n\n    this._x = x;\n    this._y = y;\n    this.width = width;\n    this.height = height;\n    this.backgroundColor = backgroundColor;\n\n    // text vars\n    this.textColor = textColor;\n    this.title =  title;\n\n    // calc positioning setup\n    this.__calcPosition({position, positionX, positionY, offset, offsetX, offsetY});\n\n    if(visible){\n      this.show();\n    }\n\n    this.borderColor = borderColor;\n    this.borderWidth = borderWidth;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    let pos = this.getPosition(ctx);\n\n    // draw border\n    this._drawBorder(ctx, pos);\n    // draw the main background rect\n    this._drawBackground(ctx, pos);\n\n    // draw the title\n    ctx.save();\n    ctx.fillStyle = this.textColor;\n    ctx.font = '22px serif';\n    ctx.fillText(this.title, pos.x + 10, pos.y + 22 + 10);\n    ctx.restore();\n\n    ctx.restore();\n  }\n\n  _drawBorder(ctx, pos){\n    if(this.borderWidth > 0){\n      let bw = this.borderWidth - 1;\n      // draw the border just outside the normal dimensions\n      ctx.beginPath();\n      ctx.strokeStyle = this.borderColor;\n      ctx.lineWidth = this.borderWidth;\n      ctx.moveTo(pos.x-bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y+this.height+bw);\n      ctx.lineTo(pos.x-bw, pos.y+this.height+bw);\n      ctx.closePath();\n      ctx.stroke();\n    }\n  }\n\n  _drawBackground(ctx, pos){\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(pos.x, pos.y, this.width, this.height);\n  }\n\n  show(){\n    this.visible = true;\n  }\n  hide(){\n    this.visible = false;\n  }\n  toggle(){\n    if(this.visible){\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  getPosition(ctx){\n    let position = {x: 0, y: 0}\n    if(this._positionX && this._positionY && ctx){\n      let c_width = ctx.canvas.width;\n      let c_height = ctx.canvas.height;\n\n      let x = this.__getXfromPositionX.call(this, this._positionX, c_width)\n      let y = this.__getYfromPositionY.call(this, this._positionY, c_height)\n\n      position = {x,y};\n    } else if(!ctx) {\n      console.warn(\"Canvas context was not passed into 'getPosition'.\");\n    } else {\n      position = {x: this._x, y: this._y};\n    }\n\n    this.position = position;\n    return this.position;\n  }\n\n  /** Helper Methods **/\n\n  __validatePositionX(posX){\n    if(valid_positions_x.indexOf(posX) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n    return false\n  }\n\n  __validatePositionY(posY){\n    if(valid_positions_y.indexOf(posY) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n    return false;\n  }\n\n  __getXfromPositionX(posX, c_width){\n    switch (posX) {\n      case 'center':\n        return (c_width/2) - (this.width/2) + this._offsetX;\n      case 'left':\n        return this._offsetX;\n      case 'right':\n        return (c_width) - (this.width) + this._offsetX;\n        break;\n      default:\n        console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n        return 0;\n    }\n  }\n\n  __getYfromPositionY(posY, c_height){\n    switch (posY) {\n      case 'center':\n        return (c_height/2) - (this.height/2) + this._offsetY;\n      case 'top':\n        return this._offsetY;\n      case 'bottom':\n        return (c_height) - (this.height) + this._offsetY;\n        break;\n      default:\n        console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n        return 0;\n    }\n  }\n\n  __calcPosition({position, positionX, positionY, offset, offsetX, offsetY}){\n    if(position){\n      let positions = position.split(' ');\n      if(positions.length == 1 && positions[0] === 'center'){\n        positionX = positionY = positions[0];\n      } else if(positions.length == 2 && this.__validatePositionX(positions[0]) && this.__validatePositionY(positions[1])){\n        positionX = positions[0];\n        positionY = positions[1];\n      }\n    }\n    // should have positionX & positionY, either from above logic or as param\n    if(positionX != null && positionY != null){\n      this._positionX = positionX;\n      this._positionY = positionY;\n    }\n\n    if(offset != null && offset.hasOwnProperty('x') && offset.hasOwnProperty('y')){\n      offsetX = offset.x;\n      offsetY = offset.y;\n    }\n\n    // should have offsetX & offsetY, either from above logic or as param\n    if(offsetX != null && offsetY != null){\n      this._offsetX = offsetX;\n      this._offsetY = offsetY;\n    }\n  }\n\n  /** Getters and Setters **/\n  get offsetX(){\n    return this._offsetX;\n  }\n  set offsetX(x){\n    this._offsetX = x;\n  }\n  get offsetY(){\n    return this._offsetY;\n  }\n  set offsetY(y){\n    this._offsetY = y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Dialog.js","import Canvas from '../canvas/canvas';\nimport Camera from '../base/camera';\nimport Util from '../util/util';\nimport ScreenManager from '../screen/screenManager';\nimport Ludic from './ludic';\nimport InputController from '../input/inputController';\n\nexport default class LudicApp {\n  constructor(config) {\n    Util.setConfig(config);\n    Ludic.config = config;\n    Ludic.canvas = new Canvas();\n    Ludic.context = Ludic.canvas.getContext();\n    Ludic.screenManager = new ScreenManager();\n    Ludic.input = new InputController(Ludic.canvas);\n    Ludic.util = Util;\n\n    //Put Ludic on the window in devmode\n    if(Ludic.devmode){\n      window.Ludic = Ludic;\n    }\n\n    this.running = false;\n    this.lastTime = Date.now();\n\n    this._requestAnimFrame = (()=>{\n      return  window.requestAnimationFrame       ||\n              window.webkitRequestAnimationFrame ||\n              window.mozRequestAnimationFrame    ||\n              window.oRequestAnimationFrame      ||\n              window.msRequestAnimationFrame     ||\n              (function(){\n                console.warn('LudicApp: falling back to basic requestAnimationFrame');\n                return false;\n              })()                               ||\n              function( callback ){\n                window.setTimeout(callback, 1000 / 60);\n              };\n    })();\n\n    // do some binding\n    this._requestAnimFrame = this._requestAnimFrame.bind(window);\n    this._animate = this._animate.bind(this);\n  }\n\n  // override\n  update(delta) {}\n\n  _animate(time) {\n    if(this.running){\n      this._requestAnimFrame(this._animate);\n\n      var delta = (time - this.lastTime) / 1000;\n      this.lastTime = Ludic._time = time;\n\n      if(!Number.isNaN(delta)){\n        Ludic.context.save();\n        this.update(delta,time);\n        Ludic.context.restore();\n      }\n    }\n  }\n\n  pause() {\n    this.running = !this.running;\n    if (this.running)\n      this._animate();\n  }\n\n  run(updateFunction){\n    this.running = true;\n    if(updateFunction != null){\n      this.update = updateFunction;\n    }\n    this._animate();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/LudicApp.js","\nvar timeTotal = 0;\nvar averageArray = [];\nvar period = 5;\nvar average;\n\nonmessage = function(event){\n  timeTotal += event.data;\n\n  averageArray.push(event.data);\n\n  if(averageArray.length>period){\n    timeTotal -= averageArray.shift();\n    average = timeTotal / period;\n    // return 1 / average;\n    postMessage(1 / average);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/fps.js","\nexport default class Screen {\n  constructor(options) {\n    this.options = options || {};\n  }\n\n  _step(delta,...rest){\n    if(!this._isFinished){\n      this.update.apply(this,arguments);\n    }\n  }\n\n  // override\n  update(delta,...rest){}\n\n  finish(data){\n    if(!this._isFinished){\n      this.onDestroy();\n      this._finalData = data || {};\n      this._isFinished = true;\n    }\n  }\n\n  onDestroy(){}\n  onAddedToManager(manager){}\n  onRemovedFromManager(manager){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screen.js","\nimport BaseSprite from './BaseSprite';\n\nclass MultiSprite extends BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n    super(image, framesX, framesY, offsetX, offsetY);\n\n  }\n\n  createSlice(name, start, count, scale){\n    var slice = {};\n\n    slice.ix = 0;\n    slice._ix = 0;\n    slice.start = start;\n    slice.end = start+count;\n    slice.scale = scale || 1;\n\n    slice.name = name;\n    slice.frames = this.frames.slice(start, slice.end);\n\n    console.log(slice);\n\n    this.slices[name] = slice;\n  }\n\n  createState(name, frameIndex, sliceName){\n    sliceName = sliceName || 'default';\n\n    var state = {};\n\n    state.name = name;\n    state.ix = frameIndex;\n    state.sliceName = sliceName;\n\n    this.states[name] = state;\n  }\n\n  parseSpriteSheet(){\n    this.slices = this.slices || {};\n    this.states = this.states || {};\n    super.parseSpriteSheet.apply(this,arguments);\n    var slice = {\n      ix: 0,\n      start: 0,\n      end: this.frames.length-1,\n      name: 'default',\n      frames: this.frames\n    };\n\n    this.slices[slice.name] = slice;\n    this.setSlice(slice.name);\n  }\n\n  setSlice(name){\n    this.slice = this.slices[name];\n  }\n\n  animate(sliceName, optScale){\n    if(sliceName){\n      this.setSlice(sliceName);\n    }\n\n    var scale = optScale || this.slice.scale,\n        fl = this.slice.frames.length,\n        df = fl * scale,\n        _ix = this.slice._ix++;\n\n    this.slice.ix = Math.floor( ((_ix) % (df)) / scale);\n    if(_ix >= df){\n      this.slice._ix = 1;\n    }\n\n    this.setFrame();\n  }\n\n  setFrame(frameIndex, sliceName){\n    frameIndex = frameIndex===undefined ? this.slice.ix : frameIndex;\n    if(sliceName){\n      this.frame = this.slices[sliceName].frames[frameIndex];\n    } else {\n      this.frame = this.slice.frames[frameIndex];\n    }\n  }\n\n  setState(name){\n    var state = this.states[name];\n    this.setFrame(state.ix, state.sliceName);\n  }\n}\n\nexport default MultiSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/MultiSprite.js","let axesLength = 100;\n\nexport default class HUD {\n  constructor(camera) {\n    this.camera = camera;\n    this.ctx = this.camera.context;\n\n    this.$refs = {};\n    this.elements = [];\n  }\n\n  update(delta){\n    this.ctx.save();\n    this.camera.resetTransform(this.ctx);\n\n    // draw the axis for the hud system\n    this.drawAxes(delta);\n\n    for(let el of this.elements){\n      if(el.visible){\n        el.render(delta, this.ctx);\n      }\n    }\n\n    this.ctx.restore();\n  }\n\n  drawAxes(delta){\n    this.ctx.save();\n    // this is to allow the axes to be seen\n    this.ctx.translate(this.ctx.lineWidth,this.ctx.lineWidth)\n    this.ctx.strokeStyle = 'rgb(192,0,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(axesLength, 0);\n    this.ctx.stroke();\n    this.ctx.strokeStyle = 'rgb(0,192,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(0, axesLength);\n    this.ctx.stroke();\n    this.ctx.restore();\n  }\n\n  addElement(element, ref){\n    this.elements.push(element);\n    if(ref){\n      if(!this.$refs.hasOwnProperty(ref)){\n        this.$refs[ref] = element;\n      } else {\n        console.warn(`Ref \"${ref}\" is already taken`);\n      }\n    }\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Hud.js","import Dialog from './Dialog'\nimport Ludic from '../app/ludic'\n\nexport default class MenuDialog extends Dialog {\n  constructor(options) {\n    super(options)\n\n    this.menuItems = [];\n\n  }\n\n  render(delta, ctx){\n    super.render(delta, ctx);\n\n    // render the menu items\n    ctx.save();\n    ctx.translate(this.position.x, this.position.y);\n    this.menuItems.forEach((item, index) => {\n      item.render(delta,ctx,index);\n    });\n    ctx.restore();\n  }\n\n  addMenuItem(item){\n    if(item instanceof MenuDialog.MenuItem){\n      this.menuItems.push(item);\n    } else {\n      console.warn(\"Parameter needs to be of type MenuDialog.MenuItem\");\n    }\n  }\n\n  show(){\n    super.show();\n    // take input control\n    this.input = Ludic.input.newEventListener({\n      stopPropagation: true,\n      keyConfig: {\n        'w': 'up',\n        's': 'down',\n        'esc.once.down': 'start'\n      },\n      methods: {\n        up: this.selectPreviousItem,\n        down: this.selectNextItem,\n        start: this.toggleMenuOpen\n      }\n    }, this, true)\n\n    this.selectedItemIndex = 0;\n    this.selectItem(this.selectedItemIndex);\n  }\n\n  hide(){\n    super.hide();\n    Ludic.input.removeEventListener(this.input);\n  }\n\n  selectItem(index){\n    if(this.selectedItem){\n      this.selectedItem.deselect();\n    }\n    this.selectedItem = this.menuItems[index];\n    this.selectedItem.select();\n  }\n\n  selectNextItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem(++this.selectedItemIndex%this.menuItems.length);\n      // this.selectedItemIndex++;\n    }\n  }\n  selectPreviousItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem((this.menuItems.length-1)-(++this.selectedItemIndex%this.menuItems.length));\n      // this.selectedItemIndex++;\n    }\n  }\n\n  toggleMenuOpen(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.toggle();\n    }\n  }\n}\n\nMenuDialog.MenuItem = class MenuItem {\n  constructor(text) {\n    this.text = text;\n  }\n\n  render(delta, ctx, index){\n    ctx.save();\n    ctx.fillStyle = this.selected ? 'red' : 'white';\n    ctx.font = '22px serif';\n    ctx.fillText(this.text, 10, 59 + (index*27)); // y = fontSize + 10 + distance from title = 22+10+27\n    ctx.restore();\n  }\n\n  select(){\n    this.selected = true;\n  }\n\n  deselect(){\n    this.selected = false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/MenuDialog.js","import HUDElement from './HUDElement'\n\nexport default class Text extends HUDElement{\n  constructor(text, x, y, {\n    // default options for text\n    fontFamily = 'serif',\n    fontSize = 12,\n    fontSizeUnit = 'px',\n    color = 'black',\n    drawStyle = 'fill',\n\n    adjustOrigin = true,\n    visible = true\n  } = {}) {\n    super();\n\n    this.visible = true;\n\n    this._adjustOrigin = true;\n    this.drawStyle = drawStyle;\n\n    this.fontFamily = fontFamily;\n    this.setFontSize(fontSize, fontSizeUnit);\n\n    // set the main attrs\n    this.text = text;\n    this.setPosition(x,y);\n    this.color = color;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    ctx.font = `${this.__fontSize} ${this.fontFamily}`;\n\n    if(this.drawStyle === 'stroke'){\n      ctx.strokeStyle = this.color;\n      ctx.strokeText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    } else {\n      ctx.fillStyle = this.color;\n      ctx.fillText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    }\n    ctx.restore();\n  }\n\n  setPosition(x, y){\n    // x can also be an object with .x/.y props\n    if(typeof x === 'object' && y == null){\n      let pos = x;\n      this.setPositionX(pos.x);\n      this.setPositionY(pos.y)\n    } else if(typeof x === 'number' && typeof y === 'number'){\n      this.setPositionX(x);\n      this.setPositionY(y);\n    } else {\n      console.warn('Unknown parameters passed into \"setPosition\"', arguments);\n    }\n  }\n\n  setPositionX(x){\n    this.x = x;\n  }\n  setPositionY(y){\n    this.y = y;\n  }\n\n  get y(){\n    return parseFloat(this._y);\n  }\n\n  set y(y){\n    y = parseFloat(y);\n    this._y = y;\n  }\n\n  set fontSize(fontSize){\n    this.setFontSize(fontSize);\n  }\n\n  get fontSize(){\n    return this._fontSize;\n  }\n\n  setFontSize(fontSize, unit = this.fontSizeUnit){\n    this.__fontSize = `${fontSize}${unit}`;\n    this._fontSize = parseFloat(fontSize);\n    this.fontSizeUnit = unit;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Text.js","\nexport function classTypeOf(typeToCheck, type){\n  do {\n    if(typeToCheck === type){\n      return true;\n    }\n  } while ((typeToCheck = Object.getPrototypeOf(typeToCheck)) !== Function.prototype);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/utilities.js","import ImageAsset from './imageAsset';\n\nclass ImageAssetLoader {\n  constructor() {\n\n  }\n\n  load(name, url, type, options){\n    return new ImageAsset(name, url, type, options);;\n  }\n}\n\nexport default new ImageAssetLoader();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAssetLoader.js","/** alias mapping for keyboard keys **/\n\nexport default {\n\n  // special keys\n  'enter': '13',\n  'tab': '9',\n  'delete': '8',\n  'backspace': '8',\n  'space': '32',\n  'esc': '27',\n  'escape': '27',\n\n  // modifier keys\n  'control': '17',\n  'ctrl': '17',\n  'alt': '18',\n  'option': '18', // on mac\n  'caps': '20',\n  'caps-lock': '20',\n  'capslock': '20',\n\n  'windows': '91', // windows key\n  'left-command': '91', // left command key on mac layout\n  'left-cmd': '91',\n  'search': '91', // on chromebook\n  'menu': '93', // windows menu\n  'right-command': '93', // right command key on mac layout\n  'right-cmd': '93',\n\n  // arrow keys\n  'left' : '37',\n  'up' : '38',\n  'right' : '39',\n  'down' : '40',\n\n  // alpha keys, in order of keyboard qwerty layout\n  'q': '81',\n  'w': '87',\n  'e': '69',\n  'r': '82',\n  't': '84',\n  'y': '89',\n  'u': '85',\n  'i': '73',\n  'o': '79',\n  'p': '80',\n  'a' : '65',\n  's' : '83',\n  'd' : '68',\n  'f' : '70',\n  'g' : '71',\n  'h' : '72',\n  'j' : '74',\n  'k' : '75',\n  'l' : '76',\n  'z' : '90',\n  'x' : '88',\n  'c' : '67',\n  'v' : '86',\n  'b' : '66',\n  'n' : '78',\n  'm' : '77',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/keyCodeMap.js","\nexport default class PrivateProperty {\n  constructor() {\n    let weakMap = new WeakMap();\n    let ctor = function(...getArgs){\n      return weakMap.get(...getArgs);\n    }\n    ctor.set = function(...setArgs){\n      return weakMap.set(...setArgs);\n    }\n    // ctor.get = function(...getArgs){\n    //   return weakMap.get(...getArgs);\n    // }\n    ctor.get = ctor;\n    return ctor\n  }\n\n  set(...args){\n    this.weakMap.set(...setArgs)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/privateProperty.js","\n// app\nexport {default as LudicApp} from './components/app/LudicApp'\nexport {default as default, default as Ludic} from './components/app/ludic'\n\n\n// base\nexport {default as Asset} from './components/base/asset'\nexport {default as AssetManager} from './components/base/assetManager'\nexport {default as Camera} from './components/base/camera'\nexport {default as fps} from './components/base/fps'\nexport {default as ImageAsset} from './components/base/imageAsset'\n\n// canvas\nexport {default as Canvas} from './components/canvas/canvas'\n\n// input\nexport {default as InputController} from './components/input/inputController'\n\n// patches\n/*\n  patches that are prototype extensions, just import here\n  patches that require a parameter (monkey patch) export function name with prefix `Patch`\n    i.e. export {default as PatchFixSomeClass} from './components/patches/fixSomeClass'\n*/\nimport path2D from './components/patches/path2D';\nimport object from './components/patches/object';\n\n// screen\nexport {default as Screen} from './components/screen/screen'\nexport {default as ScreenManager} from './components/screen/screenManager'\n\n// sprite\nexport {default as BaseSprite} from './components/sprite/BaseSprite'\nexport {default as MultiSprite} from './components/sprite/MultiSprite'\n\n// ui\nexport {default as HUD} from './components/ui/Hud'\nexport {default as HUDElement} from './components/ui/HUDElement'\nexport {default as Text} from './components/ui/Text'\nexport {default as Dialog} from './components/ui/Dialog'\nexport {default as MenuDialog} from './components/ui/MenuDialog'\n\n// util\nexport {default as Util} from './components/util/util'\nexport * from './components/util/utilities'\n\n// vectors\nexport {default as Vector2} from './components/engine/Vector2'\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// implementation modeled from http://stackoverflow.com/a/6491621\nObject.defineProperty(Object, 'resolve', {\n  enumerable: false,\n  value: function(path, obj = {}) {\n    if(path == null){\n      return;\n    }\n    if(path === ''){\n      return obj\n    }\n    path = path.replace(/\\[['\"]?(\\w+)['\"]?\\]/g, '.$1'); // convert indexes and brackets ([\"keyname\"] or ['keyname']) to properties\n    path = path.replace(/^\\./, '');           // strip a leading dot\n    var keys = path.split('.');\n    return keys.reduce(function(prev, curr) {\n        return prev ? prev[curr] : undefined\n    }, obj)\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/patches/object.js","Path2D.rect = function(...args){\n  let p = new Path2D();\n  // .rect(x, y, width, height)\n  p.rect(...args);\n  return p;\n}\nPath2D.arc = function(...args){\n  let p = new Path2D();\n  // .arc(x, y, radius, startAngle, endAngle, anticlockwise)\n  p.arc(...args);\n  return p;\n}\nPath2D.ellipse = function(...args){\n  let p = new Path2D();\n  // .ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n  p.ellipse(...args);\n  return p;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/patches/path2D.js"],"sourceRoot":""}