{"version":3,"sources":["webpack:///webpack/bootstrap e6f205d8641dca72769f","webpack:///./src/components/util/util.js","webpack:///./src/components/app/ludic.js","webpack:///./src/components/ui/HUDElement.js","webpack:///./src/components/base/asset.js","webpack:///./src/components/base/assetManager.js","webpack:///./src/components/base/camera.js","webpack:///./src/components/base/imageAsset.js","webpack:///./src/components/canvas/canvas.js","webpack:///./src/components/engine/Vector2.js","webpack:///./src/components/input/inputController.js","webpack:///./src/components/screen/screenManager.js","webpack:///./src/components/sprite/BaseSprite.js","webpack:///./src/components/ui/Dialog.js","webpack:///./src/components/app/LudicApp.js","webpack:///./src/components/base/fps.js","webpack:///./src/components/patches/Path2D.js","webpack:///./src/components/screen/screen.js","webpack:///./src/components/sprite/MultiSprite.js","webpack:///./src/components/ui/Hud.js","webpack:///./src/components/ui/MenuDialog.js","webpack:///./src/components/ui/Text.js","webpack:///./src/components/util/utilities.js","webpack:///./src/components/base/imageAssetLoader.js","webpack:///./src/components/input/keyCodeMap.js","webpack:///./src/main.js","webpack:///./src/components/ein/index.js","webpack:///./src/components/ein/BaseEntity.js","webpack:///./src/components/ein/BaseSystem.js","webpack:///./src/components/ein/EntityManager.js"],"names":["_config","canvas","fullscreen","fps","world","gravity","x","y","drawAxes","drawDebug","console","log","Util","hex","opacity","replace","r","parseInt","substring","g","b","result","val","places","c","i","Math","round","self","ns","pattern","logNames","logValues","undefined","name","RegExp","match","arguments","length","key","hasOwnProperty","obj","extend","config","configure","scope","param","def","params","split","e","value","l","prop","configureConsole","_log","Ludic","extensions","HUDElement","delta","Asset","url","type","options","resolve","reject","am","data","AssetManager","assets","loadQueue","promiseQueue","loaders","addLoader","overwrite","promise","asset","NewAsset","push","loading","then","onAssetResolve","bind","onAssetReject","getAsset","Promise","reason","finalPromise","all","assetsLoaded","apply","shift","load","onAssetsLoadedCallback","callback","loader","destroy","fileTypes","forEach","PTM","viewCenterPixel","singleWorldPoint","singlePixelPoint","offset","futurePos","average","averageArray","timeTotal","averageCount","_frames","Camera","context","getContext","readConfig","updateEnvironmentVariables","window","addEventListener","ctx","setTransform","chaseEntity","chaseMethod","getPosition","setViewCenterWorld","strokeStyle","beginPath","moveTo","lineTo","stroke","ent","pixelPoint","_getWorldPointFromPixelPoint_x","_getWorldPointFromPixelPoint_y","height","worldPoint","_getPixelPointFromWorldPoint_x","_getPixelPointFromWorldPoint_y","vector2","instantaneous","fraction","currentViewCenterWorld","getViewCenterWorld","toMove","get_x","get_y","moveCenterBy","getWorldPointFromPixelPoint","myRound","width","bounds","w","h","ptm","timestamp","translate","getOffsetX","getOffsetY","scale","getPTM","lineWidth","ImageAsset","Image","onload","src","Canvas","setupFullscreen","focus","ludicContainerId","canvasId","body","document","querySelector","container","createElement","id","appendChild","setAttribute","setElement","resize","wrapper","canvasWrapper","el","innerWidth","innerHeight","removeEventListener","dimension","Vector2","listeners","defaultKeyConfig","preventDefault","ps4Mapping","buttons","axes","sticks","lx","ly","rx","ry","gamepadMaps","gamepadsAxisDeadZone","gamepadsConfig","mousePosPixel","mousePosWorld","prevMousePosPixel","InputController","camera","initKeys","initMouse","initGamepads","listener","binder","alsoAdd","InputEventListener","ix","indexOf","splice","allKeys","evt","onKeyEvent","down","dir","keyCode","logAllKeys","cfg","keyConfig","Array","isArray","keys","modifiers","direction","method","_once","shiftKey","altKey","ctrlKey","_execCommand","once","warn","stopPropagation","args","call","onMouseEvent","updateMousePos","bndr","rect","getBoundingClientRect","clientX","left","clientY","top","gamepads","lastButtonStates","lastAxisStates","gamepad","index","getGamepads","gps","navigator","gp","_stepGamepads","lastState","getLastState","pressed","gamepadButtonEvent","setLastState","axis","dz","getDeadZone","getLastAxisState","gamepadAxisEvent","zeroed","gpIndex","state","gamepadIndex","deadZone","button","onGamepadButtonEvent","GamepadButtonEvent","func","keyIdentifier","gamepadId","axisIndex","setLastAxisState","gpMap","getGamepadMap","stick","GamepadAxisEvent","values","getValueByAxisId","onGamepadAxis","stripModifiers","mods","ret","mod","importKeyConfig","_key","KeyCodeMap","Object","assign","map","conf","_loadListener","methods","avail","code","Number","isNaN","_code","arr","event","Gamepad","prototype","axisId","stack","_listener","ScreenManager","screen","_step","_isFinished","onScreenFinished","_finalData","alsoSet","ScreenEventListener","setEventListener","RIGHT","LEFT","BaseSprite","image","framesX","framesY","offsetX","offsetY","getImage","frames","frameWidth","frameHeight","totalFrames","scaleToWidth","setOffset","currentFrameIndex","parseSpriteSheet","setFrame","frame","sx","sy","frameIndex","pos","use","useShadow","drawWidth","drawHeight","save","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawImage","restore","valid_positions_x","valid_positions_y","Dialog","position","positionX","positionY","backgroundColor","textColor","title","visible","borderColor","borderWidth","_x","_y","__calcPosition","show","_drawBorder","_drawBackground","fillStyle","font","fillText","bw","closePath","fillRect","hide","_positionX","_positionY","c_width","c_height","__getXfromPositionX","__getYfromPositionY","posX","posY","_offsetX","_offsetY","positions","__validatePositionX","__validatePositionY","LudicApp","setConfig","screenManager","input","util","devmode","running","lastTime","Date","now","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","_animate","time","_time","update","period","onmessage","postMessage","Path2D","p","arc","ellipse","Screen","onDestroy","MultiSprite","start","count","slice","_ix","end","slices","sliceName","states","setSlice","optScale","fl","df","floor","axesLength","HUD","$refs","elements","resetTransform","render","element","ref","MenuDialog","menuItems","item","MenuItem","newEventListener","up","selectPreviousItem","selectNextItem","toggleMenuOpen","selectedItemIndex","selectItem","selectedItem","deselect","select","keyDown","toggle","text","selected","Text","fontFamily","fontSize","fontSizeUnit","color","drawStyle","adjustOrigin","_adjustOrigin","setFontSize","setPosition","__fontSize","strokeText","_fontSize","setPositionX","setPositionY","unit","parseFloat","classTypeOf","typeToCheck","getPrototypeOf","Function","ImageAssetLoader","em","BaseEntity","active","priority","needsDestroy","BaseSystem","updateFunction","entities","manager","EntityManager","systems","nextEntityId","nextSystemId","entity","_id","system","onEntityAdded","onEntityRemoved","props","hasAllProps","className","constructor","onSystemAddedTo","_sortSystems","onSystemRemovedFrom","sort","a","eventName","group"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e6f205d8641dca72769f","\nvar _config = {\n  canvas: {\n    fullscreen: false,\n    fps: false\n  },\n  world: {\n    gravity: {\n      x: 0,\n      y: 0,\n    },\n    drawAxes: false,\n    drawDebug: false\n  },\n  console: {\n    log: true\n  }\n};\n\nclass Util {\n\n  static convertHex(hex,opacity){\n    hex = hex.replace('#','');\n    var r = parseInt(hex.substring(0,2), 16);\n    var g = parseInt(hex.substring(2,4), 16);\n    var b = parseInt(hex.substring(4,6), 16);\n\n    var result = 'rgba('+r+','+g+','+b+','+opacity+')';\n    return result;\n  }\n\n  static myRound(val,places) {\n    var c = 1;\n    for (var i = 0; i < places; i++)\n      c *= 10;\n    return Math.round(val*c)/c;\n  }\n\n  static using(self, ns, pattern, logNames, logValues){\n    self = self || this;\n    if (pattern == undefined) {\n        // import all\n        for (var name in ns) {\n            if(!logNames){\n              self[name] = ns[name];\n            } else {\n              console.log(name, logValues?ns[name]:'');\n            }\n        }\n    } else {\n        if (typeof(pattern) == 'string') {\n            pattern = new RegExp(pattern);\n        }\n        // import only stuff matching given pattern\n        for (var name in ns) {\n            if (name.match(pattern)) {\n              if(!logNames){\n                self[name] = ns[name];\n              } else {\n                console.log(name, logValues?ns[name]:'');\n              }\n            }\n        }\n    }\n  }\n\n  static extend() {\n    for (var i = 1; i < arguments.length; i++){\n\n      if(typeof arguments[i] === 'object'){\n        for (var key in arguments[i]){\n          if (arguments[i].hasOwnProperty(key)){\n            arguments[0] = arguments[0] || {};\n            var obj = this.extend(arguments[0][key], arguments[i][key]);\n            arguments[0][key] = obj;\n          }\n        }\n      } else {\n        arguments[0] = arguments[i];\n\n      }\n\n    }\n    return arguments[0];\n  }\n\n  static setConfig(config){\n    _config = this.extend(_config, config);\n    this.configure();\n  }\n\n  static getConfig(){\n    return _config;\n  }\n\n  static readConfig(scope, param, def){\n    var params = param ? param.split('.') : [];\n\n    var obj;\n\n    try {\n      obj = _config[scope];\n\n      for(var i=0; i<params.length; i++){\n        obj = obj[params[i]];\n      }\n    } catch (e) {\n      obj = null;\n    } finally {\n      obj = obj || def;\n    }\n    return obj;\n  }\n\n  static setParam(scope, param, value){\n    var params = param.split('.');\n\n    var obj;\n\n    try {\n      obj = _config[scope] = _config[scope] || {};\n\n      for(var i=0,l=params.length; i<l; i++){\n        // obj = obj[params[i]];\n        var prop = params[i];\n        obj = obj[prop] = obj[prop] || (i==l-1) ? value : {};\n      }\n    } catch (e) {\n      obj = null;\n    }\n\n    this.configure();\n  }\n\n  static configure(){\n    this.configureConsole();\n  }\n\n  static configureConsole(){\n\n    if(!_config.console.log){\n      console._log = console.log;\n      console.log = function(){};\n    }\n  }\n\n}\n\nexport default Util;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/util.js","\n\nclass Ludic {\n  constructor() {\n    this.extensions = {};\n  }\n}\n\nexport default new Ludic();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/ludic.js","\nexport default class HUDElement {\n  constructor() {\n\n  }\n\n  render(delta){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/HUDElement.js","\n\nclass Asset {\n  constructor(name, url, type, options) {\n    this.name = name;\n    this.url = url;\n    this.type = type;\n    this.options = options || {};\n\n  }\n\n  load(){\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  onAssetResolve(am){\n  }\n\n  onAssetReject(am){\n\n  }\n\n  destroy(){\n    this.name = null;\n    this.url = null;\n    this.type = null;\n    this.options = null;\n    this.data = null;\n  }\n}\n\nexport default Asset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/asset.js","// import ImageAsset from './imageAsset';\n// import RubeAsset from './rubeAsset';\n// import RubeImageAsset from './rubeImageAsset';\nimport ImageLoader from './imageAssetLoader';\n\nclass AssetManager {\n  constructor() {\n    this.assets = {};\n\n    this.loadQueue = [];\n    this.promiseQueue = [];\n    this.loaders = {};\n\n    this.addLoader('image', ImageLoader);\n  }\n\n  loadResource(name, url, type, options, overwrite){\n    // let promise = Promise.reject({\n    //   reason: \"resource load failed\",\n    //   name,\n    //   url,\n    //   type,\n    //   options,\n    //   overwrite\n    // });\n    let promise = null;\n    // first check if we have the asset\n    if(!this.assets[name] || overwrite){\n      var asset = this.NewAsset(name, url, type, options);\n      if(asset){\n        this.loadQueue.push(asset);\n\n        this.loading = true;\n\n        promise = asset.promise.then(this.onAssetResolve.bind(this), this.onAssetReject.bind(this));\n      }\n    }\n    return promise;\n  }\n\n  getAsset(name){\n    return this.assets[name];\n  }\n\n  getImage(name){\n    var asset = this.getAsset(name);\n\n    switch (asset.type) {\n      case 'image':\n      case 'rubeImage':\n        return asset.data;\n        break;\n      default:\n        return null;\n    }\n  }\n\n  getData(name){\n    return this.getAsset(name).data;\n  }\n\n  onAssetResolve(asset){\n    this.assets[asset.name] = asset;\n    asset.onAssetResolve(this);\n    return asset;\n  }\n\n  onAssetReject(){\n    console.log('rejected: ',arguments);\n    return Promise.reject({\n      reason: 'onAssetReject'\n    });\n  }\n\n  isLoading(){\n    return this.loading;\n  }\n\n  step(){\n\n    if(this.loadQueue.length==0){\n      if(!this.finalPromise){\n        this.finalPromise = Promise.all(this.promiseQueue).then(()=>{\n          if(this.finalPromise){ // [tries to*] assures that this is not called prematurely if an asset is added late\n            this.assetsLoaded.apply(this, arguments);\n            this.promiseQueue = []; // reset promise queue to free objects;\n          }\n        });\n      }\n    } else {\n      this.finalPromise = null;\n      var asset = this.loadQueue.shift();\n      this.promiseQueue.push(asset.promise);\n      asset.load();\n    }\n\n  }\n\n  assetsLoaded(){\n    // console.log('all assets loaded: ',arguments);\n    if(this.onAssetsLoadedCallback){\n      this.onAssetsLoadedCallback(this);\n    }\n    this.loading = false;\n  }\n\n  setOnAssetsLoadedCallback(callback){\n    this.onAssetsLoadedCallback = callback;\n  }\n\n  NewAsset(name, url, type, options){\n    type = type || 'image';\n    // switch (type) {\n    //   case 'image':\n    //     return new ImageAsset(name, url, type, options);\n    //     break;\n    //   case 'rube':\n    //     return new RubeAsset(name, url, type, options);\n    //     break;\n    //   case 'rubeImage':\n    //     return new RubeImageAsset(name, url, type, options);\n    //     break;\n    //   default:\n    //     return null;\n    // }\n\n    let loader = this.loaders[type];\n\n    if(loader){\n      return loader.load(name, url, type, options);\n    } else {\n      return null;\n    }\n  }\n\n  destroyAsset(asset){\n    delete this.assets[asset.name];\n    asset.destroy();\n  }\n\n  addLoader(fileTypes, loader){\n    if(typeof fileTypes === 'string'){\n      fileTypes = [fileTypes];\n    }\n\n    fileTypes.forEach((type)=>{\n      this.loaders[type] = loader;\n    });\n  }\n}\n\nexport default new AssetManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/assetManager.js","import Util from '../util/util';\nimport Vector2 from '../engine/Vector2';\n\nvar PTM = 32;\n\nvar viewCenterPixel = {\n  x: 0,\n  y: 0\n};\nvar singleWorldPoint = {\n  x:0,\n  y:0\n};\nvar singlePixelPoint = {\n  x:0,\n  y:0\n};\nvar offset = {\n  x:0,\n  y:0\n};\n\nvar futurePos = new Vector2(0,0);\n\nvar average;\nvar averageArray = [];\nvar timeTotal = 0;\nvar averageCount = 60;\n\nvar _frames = 0;\n\nclass Camera {\n\n  constructor(canvas){\n    this.canvas = canvas;\n    this.context = this.canvas.getContext();\n    PTM = Util.readConfig('camera', 'ptm', 32);\n\n    this.updateEnvironmentVariables();\n    window.addEventListener('resize', this.updateEnvironmentVariables.bind(this), false);\n  }\n\n  getCanvas(){\n    return this.canvas;\n  }\n\n  update(delta){\n    let ctx = this.context;\n\n    this.setTransform(ctx);\n    if(this.chaseEntity){\n      if(this.chaseMethod){\n        this.chaseMethod(this.chaseEntity,this);\n      } else {\n        futurePos = this.chaseEntity.getPosition();\n        // var vel = this.chaseEntity.GetLinearVelocity();\n        // futurePos.set_x( pos.get_x() + 0.15 * vel.get_x() );\n        // futurePos.set_y( pos.get_y() + 0.15 * vel.get_y() );\n        this.setViewCenterWorld( futurePos );\n      }\n\n    }\n\n  }\n\n  drawAxes(ctx) {\n    ctx.strokeStyle = 'rgb(192,0,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(1, 0);\n    ctx.stroke();\n    ctx.strokeStyle = 'rgb(0,192,0)';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(0, 1);\n    ctx.stroke();\n  }\n\n  setChaseEntity(ent,chaseMethod){\n    this.chaseEntity = ent;\n    this.chaseMethod = chaseMethod;\n  }\n\n  setChaseMethod(chaseMethod){\n    this.chaseMethod = chaseMethod;\n  }\n\n  getWorldPointFromPixelPoint(pixelPoint) {\n    singleWorldPoint.x = this._getWorldPointFromPixelPoint_x(pixelPoint.x)\n    singleWorldPoint.y = this._getWorldPointFromPixelPoint_y(pixelPoint.y);\n    return singleWorldPoint;\n  }\n\n  _getWorldPointFromPixelPoint_x(x){\n    return (x - offset.x) / PTM;\n  }\n\n  _getWorldPointFromPixelPoint_y(y){\n    return (y - (this.canvas.height() - offset.y)) / PTM;\n  }\n\n  getPixelPointFromWorldPoint(worldPoint){\n    singlePixelPoint.x = this._getPixelPointFromWorldPoint_x(worldPoint.x);\n    singlePixelPoint.y = this._getPixelPointFromWorldPoint_y(worldPoint.y);\n    return singlePixelPoint;\n  }\n\n  _getPixelPointFromWorldPoint_x(x){\n    return (x*PTM)+offset.x;\n  }\n\n  _getPixelPointFromWorldPoint_y(y){\n    return (y*PTM) + (this.canvas.height() - offset.y);\n  }\n\n  setViewCenterWorld(vector2, instantaneous, fraction) {\n    var currentViewCenterWorld = this.getViewCenterWorld();\n    var toMove = {};\n    toMove.x = vector2.get_x() - currentViewCenterWorld.x;\n    toMove.y = vector2.get_y() - currentViewCenterWorld.y;\n    this.moveCenterBy(toMove, instantaneous, fraction);\n  }\n\n  centerWorldToCanvas(){\n    this.setViewCenterWorld(new Vector2(), true);\n  }\n\n  getViewCenterWorld(){\n    return this.getWorldPointFromPixelPoint( viewCenterPixel );\n  }\n\n  moveCenterBy(toMove,instantaneous, fraction){\n    fraction = fraction || instantaneous ? 1 : 0.25;\n    offset.x -= Util.myRound(fraction * toMove.x * PTM, 0);\n    offset.y += Util.myRound(fraction * toMove.y * PTM, 0);\n  }\n\n  updateEnvironmentVariables(){\n    viewCenterPixel = {\n      x: this.canvas.width() / 2,\n      y: this.canvas.height() / 2\n    };\n  }\n\n  getViewportBounds(){\n    var bounds = {\n      x: this._getWorldPointFromPixelPoint_x(0),\n      y: this._getWorldPointFromPixelPoint_y(0),\n      w: this._getWorldPointFromPixelPoint_x(this.canvas.width()),\n      h: this._getWorldPointFromPixelPoint_y(this.canvas.height()),\n    }\n    return bounds;\n  }\n\n  getPTM(){\n    return PTM;\n  }\n\n  setPTM(ptm){\n    PTM = ptm;\n  }\n\n  getOffset(){\n    return offset;\n  }\n\n  getOffsetX(){\n    return offset.x;\n  }\n\n  getOffsetY(){\n    return offset.y;\n  }\n\n  setOffset(obj, y){\n    if(typeof obj === 'object' && !y){\n      offset.x = obj['x'] || 0;\n      offset.y = obj['y'] || 0;\n    } else if(typeof obj === 'number' && typeof y === 'number'){\n      offset.x = obj;\n      offset.y = y;\n    }\n  }\n\n  calculateFPS(timestamp){\n    timeTotal += timestamp;\n    // averageArray.push(timestamp);\n    //\n    // if(averageArray.length>averageCount){\n    //   timeTotal -= averageArray.shift();\n    //   average = timeTotal / averageCount;\n    //   return 1 / average;\n    // }\n    // return 0;\n\n    if(timeTotal >= 1.0){\n      this.fps = _frames;\n      timeTotal = 0;\n      _frames = 0;\n    }\n    _frames++;\n  }\n\n  setTransform(ctx){\n    ctx.translate(this.getOffsetX(), this.getOffsetY());\n    ctx.scale(1,-1);\n    ctx.scale(this.getPTM(),this.getPTM());\n    ctx.lineWidth /= this.getPTM();\n  }\n\n  resetTransform(ctx){\n    ctx.scale(1,-1);\n    ctx.scale(1 / this.getPTM(),1 / this.getPTM());\n    ctx.lineWidth *= this.getPTM();\n    ctx.translate(-this.getOffsetX(), -this.getOffsetY());\n  }\n}\n\n\nexport default Camera;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/camera.js","import Asset from './asset';\n\nclass ImageAsset extends Asset {\n  constructor(name, url, type, options) {\n    super(name, url, type || 'image', options);\n\n    this.data = new Image();\n    this.promise = new Promise((resolve,reject)=>{\n      this.data.onload = this.onload(resolve,reject);\n    });\n\n  }\n\n  load(){\n    this.data.src = this.url;\n  }\n\n  onload(resolve,reject){\n    return () => {\n      resolve(this);\n    };\n  }\n\n  destroy(){\n\n  }\n}\n\nexport default ImageAsset;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAsset.js","import Util from '../util/util';\n\nclass Canvas {\n  constructor() {\n    this.setupFullscreen();\n    this.config = Util.readConfig('canvas');\n    this.focus();\n\n  }\n\n  setupFullscreen(){\n    var ludicContainerId = Util.readConfig('ludic','id', 'ludic'); // get or use default container id for ludic canvas\n    var canvasId = Util.readConfig('canvas','id', 'ludic-canvas');\n    var fullscreen = Util.readConfig('canvas', 'fullscreen', false);\n    var fps = Util.readConfig('camera', 'fps');\n\n    var body = document.querySelector('body');\n    var container = document.querySelector(`#${ludicContainerId}`);\n\n    // create ludic container if no container was found\n    if(!container){\n      container = document.createElement('div');\n      container.id = `${ludicContainerId}`;\n      body.appendChild(container);\n    }\n\n    if(fullscreen){\n      // add correct divs\n      var canvas = document.createElement('canvas');\n      canvas.id = canvasId;\n      canvas.setAttribute('tabindex', 1);\n      container.appendChild(canvas);\n\n      this.setElement(canvas);\n\n      window.addEventListener('resize', this.resize.bind(this), false);\n      this.resize();\n    } else {\n      var wrapper = document.createElement('div');\n      wrapper.setAttribute('style', 'text-align:center');\n      container.appendChild(wrapper);\n\n      var canvasWrapper = document.createElement('div');\n      canvasWrapper.setAttribute('style', 'margin:auto;width:640px;padding:2px;border:1px solid #888;text-align:left');\n      container.appendChild(canvasWrapper);\n\n      var canvas = document.createElement('canvas');\n      canvas.id = canvasId;\n      canvas.setAttribute('width', 640);\n      canvas.setAttribute('height', 480);\n      canvas.setAttribute('tabindex', 1);\n      canvasWrapper.appendChild(canvas);\n\n      this.setElement(canvas);\n    }\n  }\n\n  resize(){\n    this.el.width = window.innerWidth;\n    this.el.height = window.innerHeight;\n  }\n\n  focus(){\n    this.el.focus();\n  }\n\n  getElement() {\n    return this.el;\n  }\n\n  setElement(canvas){\n    this.el = canvas;\n  }\n\n  addEventListener(){\n    this.el.addEventListener.apply(this.el, arguments);\n  }\n\n  removeEventListener(){\n    this.el.removeEventListener.apply(this.el, arguments);\n  }\n\n  getContext(dimension){\n    dimension = dimension || '2d';\n    return this.el.getContext(dimension);\n  }\n\n  height(){\n    return this.el.height;\n  }\n\n  width(){\n    return this.el.width;\n  }\n}\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/canvas/canvas.js","\n\nexport default class Vector2 {\n  constructor(x = 0,y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  get_x(){\n    return this.x;\n  }\n  get_y(){\n    return this.y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/engine/Vector2.js","import Util from '../util/util';\nimport KeyCodeMap from './keyCodeMap';\n\nlet listeners = [];\nlet defaultKeyConfig = {\n  preventDefault: true\n}\nlet ps4Mapping = {\n  buttons: ['cross','circle','square','triangle','l1','r1','l2','r2','extra','start','l3','r3','up','down','left','right','home','select'],\n  axes: ['lx','ly','rx','ry'],\n  sticks: {\n    lx:'leftStick',\n    ly:'leftStick',\n    rx:'rightStick',\n    ry:'rightStick'\n  }\n};\n\nlet gamepadMaps = {\n  'Wireless Controller (STANDARD GAMEPAD Vendor: 054c Product: 05c4)':ps4Mapping // ps4 controller\n};\n\nlet gamepadsAxisDeadZone = 0.08;\nlet gamepadsConfig = {};\n\nlet mousePosPixel = {};\nlet mousePosWorld = {};\nlet prevMousePosPixel = {};\n// let gamepadTypeMaps = [{id:'054c',type:'ps4'}];\n\nclass InputController {\n  constructor(canvas, camera) {\n    this.canvas = canvas;\n    this.camera = camera;\n    // this.config = Util.readConfig('input');\n    // TODO: refactor config\n    this.config = {};\n\n    this.initKeys();\n    this.initMouse();\n    this.initGamepads();\n  }\n\n  // input methods\n\n  addEventListener(listener){\n    listeners.push(listener);\n  }\n\n  // to be deprecated for `newInputListener`\n  newEventListener(options, binder, alsoAdd){\n    if(typeof alsoAdd === 'undefined' && typeof binder === 'boolean'){\n      // alsoAdd was the second param, without binder\n      alsoAdd = binder;\n      binder = null;\n    }\n    var l = new InputEventListener(options, binder);\n    if(alsoAdd){\n      this.addEventListener(l);\n    }\n    return l;\n  }\n\n  /**\n   * Instantiates and returns a new InputEventListener\n   * @param {Object} options - passed along to new InputEventListener\n   * @param {Binder} binder (optional) - passed along to new InputEventListener\n   * @param {Boolean} alsoAdd (optional) - determines whether the returning InputEventListener should also be added to this\n   *\n   * @return {InputEventListener} - listener object used to attached handlers for input events\n   */\n  newInputListener(options, binder, alsoAdd){\n    if(typeof alsoAdd === 'undefined' && typeof binder === 'boolean'){\n      // alsoAdd was the second param, without binder\n      alsoAdd = binder;\n      binder = null;\n    }\n    var l = new InputEventListener(options, binder);\n    if(alsoAdd){\n      this.addEventListener(l);\n    }\n    return l;\n  }\n\n  removeEventListener(listener){\n    var ix = listeners.indexOf(listener);\n    if(ix>-1){\n      listeners.splice(ix,1);\n    }\n  }\n\n  //  -- keyboard\n  initKeys() {\n    // object for all key states\n    this.allKeys = {};\n\n    this.canvas.addEventListener('keydown', function(evt) {\n      // evt.preventDefault();\n      // this.onKeyDown(this.canvas,evt);\n      this.onKeyEvent(this.canvas,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('keyup', function(evt) {\n      // evt.preventDefault();\n      // this.onKeyUp(this.canvas,evt);\n      this.onKeyEvent(this.canvas,evt);\n    }.bind(this), false);\n  }\n\n  onKeyEvent(canvas, evt) {\n    // console.log(evt);\n    var l;\n    let down = evt.type === 'keydown';\n    let dir = down?'down':'up';\n\n    // give the event a list of all keys states\n    this.allKeys[evt.keyCode] = this.allKeys[evt.key] = down;\n    evt.allKeys = this.allKeys;\n\n    if(this.config.logAllKeys){\n      console.log(evt.keyCode);\n    }\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l){ continue;}\n\n      let cfg = l.keyConfig;\n      let key = cfg[evt.keyCode];\n      let binder = l.binder || l;\n      if(key){\n        if(typeof key === 'object' || Array.isArray(key)) {\n          let keys;\n          // make array out of single object, treat everything like an array\n          if(Array.isArray(key)){\n            keys = key;\n          } else {\n            keys = [key];\n          }\n\n          // loop through all key configs\n          for(let key of keys){\n            let modifiers = false;\n            let direction = !key.hasOwnProperty('direction') || key.direction === dir || key.direction === 'both';\n            let method = key.hasOwnProperty('method') && key.method;\n            key._once = down?key._once:false;\n\n            // logic for modifiers\n            if(!!key.shiftKey == evt.shiftKey && !!key.altKey == evt.altKey && !!key.ctrlKey == evt.ctrlKey){\n              modifiers = true;\n            }\n\n            if(method && modifiers && direction && !key._once){\n              binder = key.binder || binder;\n              var b = this._execCommand(l,method,binder,down,evt);\n              key._once = key.once && down;\n            }\n          }\n        } else {\n          console.warn(`InputController: Unsupported key config type '${key}'`);\n        }\n      }\n      // else {\n      //   console.log('no config for keycode', evt.keyCode, key);\n      // }\n\n      // check for if listener wants the only control\n      if(l.stopPropagation){\n        break;\n      }\n    }\n\n  }\n\n  _execCommand(listener, method, binder, ...args){\n    if(typeof method === 'string'){\n      return listener[method].call(binder,...args);\n    } else if(typeof method === 'function'){\n      return method.call(binder,...args);\n    } else {\n      return false;\n    }\n  }\n\n\n  //  -- mouse\n  initMouse(){\n    this.canvas.addEventListener('mousemove', function(evt) {\n      this.onMouseEvent('mouseMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mousedown', function(evt) {\n      this.onMouseEvent('mouseDown',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseup', function(evt) {\n      this.onMouseEvent('mouseUp',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('mouseout', function(evt) {\n      this.onMouseEvent('mouseOut',this.canvas.el,evt);\n    }.bind(this), false);\n\n    // touch events\n    this.canvas.addEventListener('touchstart', function(evt) {\n      this.onMouseEvent('touchStart',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchend', function(evt) {\n      this.onMouseEvent('touchEnd',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchmove', function(evt) {\n      this.onMouseEvent('touchMove',this.canvas.el,evt);\n    }.bind(this), false);\n\n    this.canvas.addEventListener('touchcancel', function(evt) {\n      this.onMouseEvent('touchCancel',this.canvas,evt);\n    }.bind(this), false);\n  }\n\n  onMouseEvent(key, canvas, evt){\n    prevMousePosPixel = mousePosPixel;\n    this.updateMousePos(canvas, evt);\n\n    for(var i=listeners.length-1; i>=0; i--){\n      let l = listeners[i];\n      if(l){\n        if(l.hasOwnProperty(key)){\n          let bndr = l.binder || l;\n          let b = l[key].call(bndr,mousePosPixel,mousePosWorld,evt);\n          if(b === true){\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  //    -- mouse helper function\n  updateMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    mousePosPixel = {\n      x: evt.clientX - rect.left,\n      y: canvas.height - (evt.clientY - rect.top)\n    };\n    mousePosWorld = this.camera.getWorldPointFromPixelPoint(mousePosPixel);\n  }\n\n  //  -- gamepad\n  initGamepads(){\n    this.gamepads = {};\n    this.lastButtonStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    this.lastAxisStates = [\n      [], // gamepad index 0\n      [], // gamepad index 1\n      [], // gamepad index 2\n      []  // gamepad index 3\n    ];\n    window.addEventListener(\"gamepadconnected\", (e)=>{\n      console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\n        e.gamepad.index, e.gamepad.id,\n        e.gamepad.buttons.length, e.gamepad.axes.length);\n      console.log(e.gamepad);\n      this.getGamepads();\n    });\n    window.addEventListener(\"gamepaddisconnected\", (e)=>{\n      console.log('Gamepad disconnected: ',e);\n      this.getGamepads();\n    });\n\n    window.addEventListener('gamepadbuttondown', (e)=>{\n      console.log('gamepad button down: ',e);\n    });\n\n    window.addEventListener('gamepadbuttonup', (e)=>{\n      console.log('gamepad button up: ',e);\n    });\n  }\n\n  getGamepads(){\n    var gps = navigator.getGamepads() || [];\n    var gp;\n    for(var i=0;i<gps.length;i++){\n      gp = gps[i];\n      if(gp){\n        this.gamepads[gp.index] = gp;\n      }\n    }\n    return this.gamepads;\n  }\n\n  update(){\n    this._stepGamepads();\n  }\n\n  _stepGamepads(){\n    var gps = this.getGamepads();\n    var gp;\n    for(var i in gps){\n      gp = gps[i]; // gamepad instance from api\n      if(gp){\n\n        // for each gamepad that the api reads; poll the state of each button,\n        //  sending an event when pressed\n        gp.buttons.forEach( (b,ix)=>{\n          // get the last known state of the button\n          var lastState = this.getLastState(i,ix);\n          b.index = ix; // tell the button what it's index is\n          b.lastState = lastState;\n\n          if(b.pressed){\n            // if pressed, create a button event and set the buttons last known state\n            this.gamepadButtonEvent(gp,b,true);\n            this.setLastState(i,ix,true);\n          } else {\n            if(lastState) {\n              // if the button is not pressed but its last state was pressed, create a 'button up' event\n              if(lastState.pressed) {\n                this.gamepadButtonEvent(gp,b,false);\n              }\n            }\n            // set the buttons last known state for not pressed\n            this.setLastState(i,ix,false);\n          }\n        });\n\n        // do the same thing for each of the axis (analog sticks)\n        // loop through each and poll state\n        gp.axes.forEach( (value,axis)=>{\n          // get the deadZone associated with each axis\n          var dz = this.getDeadZone(axis);\n          // get the last known state for the axis\n          var lastState = this.getLastAxisState(i,axis);\n\n          // if the value of the axis is withing the bounds of the deadzone\n          //  create an axis event\n          if( value < -dz || value > dz ){\n            this.gamepadAxisEvent(gp,axis,value,false);\n          } else if(!lastState.zeroed){\n            this.gamepadAxisEvent(gp,axis,0,true);\n          }\n        });\n      } else {\n        console.log('no gamepad!',i);\n      }\n    }\n  }\n\n  getLastAxisState(gpIndex,axis){\n    var b = this.lastAxisStates[gpIndex][axis] || {zeroed:true};\n    return b;\n  }\n\n  setLastAxisState(gpIndex,axis,state){\n    this.lastAxisStates[gpIndex][axis] = {zeroed:state};\n  }\n\n  getDeadZone(gamepadIndex){\n    if(gamepadsConfig.hasOwnProperty(gamepadIndex) && gamepadsConfig[gamepadIndex].hasOwnProperty(deadZone)){\n      return gamepadsConfig[gamepadIndex].deadZone;\n    }\n    return gamepadsAxisDeadZone;\n  }\n\n  setDeadZone(deadZone,gamepadIndex){\n    if(gamepadIndex !== null && gamepadIndex !== undefined){\n      if(gamepadsConfig.hasOwnProperty(gamepadIndex)){\n        gamepadsConfig[gamepadIndex].deadZone = deadZone;\n      } else {\n        gamepadsConfig[gamepadIndex] = {deadZone: deadZone};\n      }\n    } else {\n      gamepadsAxisDeadZone = deadZone;\n    }\n  }\n\n  getLastState(i,ix){\n    var b = this.lastButtonStates[i][ix];\n    return b;\n  }\n\n  setLastState(i,ix,state){\n    this.lastButtonStates[i][ix] = {pressed:state};\n  }\n\n  gamepadButtonEvent(gamepad,button,down) {\n    button.id = gamepadMaps[gamepad.id].buttons[button.index];\n    if(button.id){\n      this.onGamepadButtonEvent(new GamepadButtonEvent(gamepad,button,down));\n    } else {\n      console.log(arguments);\n    }\n  }\n\n  onGamepadButtonEvent(evt){\n    var l;\n    let down = evt.down;\n\n    // if(this.config.logAllKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier);\n    // }\n    for(let i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l){\n        continue;\n      }\n      let func = l[evt.keyIdentifier];\n      if(!func){\n        continue;\n      }\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      let b = func.call(bndr,down,evt);\n      if(b === true){\n        return;\n      }\n      // check for if listener wants the only control\n      if(l.stopPropagation){\n        break;\n      }\n    }\n    // if(this.config.logUnmappedKeys){\n    //   console.log(evt.keyCode,evt.keyIdentifier,evt.button.value, listeners.length===0?\"No listeners\":\"\");\n    // }\n  }\n\n  getGamepadMap(gamepadId){\n    return gamepadMaps[gamepadId] || {};\n  }\n\n  gamepadAxisEvent(gamepad,axisIndex,value,zeroed){\n    this.setLastAxisState(gamepad.index,axisIndex,zeroed);\n    var gpMap = this.getGamepadMap(gamepad.id);\n    var axis = {};\n    axis.id = gpMap.axes[axisIndex];\n    axis.stick = gpMap.sticks[axis.id];\n    axis.index = axisIndex;\n    axis.value = value;\n    axis.zeroed = zeroed;\n\n    var evt = new GamepadAxisEvent(gamepad,axis);\n    evt.values = {};\n    if(axis.stick==='leftStick'){\n      evt.values.x = gamepad.getValueByAxisId('lx');\n      evt.values.y = gamepad.getValueByAxisId('ly');\n    } else if(axis.stick==='rightStick'){\n      evt.values.x = gamepad.getValueByAxisId('rx');\n      evt.values.y = gamepad.getValueByAxisId('ry');\n    }\n\n\n\n\n    this.onGamepadAxis(evt);\n  }\n\n  onGamepadAxis(evt){\n    var l;\n    for(var i=listeners.length-1; i>=0; i--){\n      l = listeners[i];\n      if(!l){\n        continue;\n      }\n\n      let func = l[evt.stick];\n      if(!func){\n        continue;\n      }\n      // only fire for correct gamepadIndex\n      if(l.gamepadIndex >= 0 && l.gamepadIndex !== evt.gamepadIndex){\n        continue;\n      }\n\n      let bndr = l.binder || l;\n      if(func.call(bndr,evt.values.x,evt.values.y,evt) === false){\n        continue;\n      }\n      return;\n    }\n  }\n\n}\n\nlet stripModifiers = function(key){\n  let mods = key.split('.');\n  key = mods[0];\n  let ret = {key, config:{}};\n  if(mods.length > 1){\n    for(let i=1; i<mods.length; i++){\n      let mod = mods[i];\n      switch (mod) {\n        case 'alt':\n        case 'altKey':\n          ret.config.altKey = true;\n          break;\n        case 'shift':\n        case 'shiftKey':\n          ret.config.shiftKey = true;\n          break;\n        case 'ctrl':\n        case 'ctrlKey':\n          ret.config.ctrlKey = true;\n          break;\n        case 'up':\n          ret.config.direction = 'up';\n          break;\n        case 'down':\n          ret.config.direction = 'down';\n          break;\n        case 'once':\n          ret.config.once = true;\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  return ret;\n}\n\nlet importKeyConfig = function(keyConfig){\n  let config = {};\n  for(let key in keyConfig){\n    let mods = stripModifiers(key);\n    let _key = key;\n    let cfg = keyConfig[key];\n    key = KeyCodeMap[mods.key] || mods.key;\n\n    // everything needs to be an array of objects\n    if(typeof cfg === 'string' || typeof cfg === 'function'){\n      config[key] = [Object.assign({},{method:cfg},mods.config)];\n    } else if(typeof cfg === 'object' && !Array.isArray(cfg)){\n      config[key] = [Object.assign({},mods.config,cfg)];\n    } else if(Array.isArray(cfg)){\n      config[key] = cfg.map((conf)=>{\n        return Object.assign({},mods.config,conf);\n      });\n    } else {\n      console.warn(`InputController: Unsupported key config type '${typeof cfg}' for '${key}'`, cfg);\n    }\n  }\n  return config;\n}\n\nclass InputEventListener {\n  constructor(options, binder) {\n    let keyConfig = options;\n    if(options.hasOwnProperty('keyConfig')){\n      keyConfig = options.keyConfig;\n    }\n    if(options.hasOwnProperty('gamepadIndex')){\n      this.gamepadIndex = options.gamepadIndex;\n    } else {\n      this.gamepadIndex = -1;\n    }\n    if(options.hasOwnProperty('binder')){\n      binder = options.binder;\n    }\n\n    this.stopPropagation = options.stopPropagation;\n\n    // this.keyConfig = Util.extend(keyConfig, defaultKeyConfig);\n    this.keyConfig = importKeyConfig.call(this,keyConfig);\n    this.options = options;\n    this.binder = binder;\n\n    if(options.hasOwnProperty('methods')){\n      this._loadListener(options.methods);\n    }\n  }\n\n  _loadListener(listener){\n    let avail = ['start', 'select', 'home', 'left', 'right', 'up', 'down',\n      'l1', 'l2', 'l3', 'r1', 'r2', 'r3', 'triangle', 'square', 'circle', 'cross',\n      'extra', 'leftStick', 'rightStick', 'mouseMove', 'mouseDown', 'mouseUp', 'mouseOut',\n      'touchStart', 'touchEnd', 'touchMove', 'touchCancel',\n    ];\n\n    for(let key of avail){\n      if(key in listener){\n        let method = listener[key];\n\n        if(typeof method === 'function'){\n          this[key] = method;\n        } else if(typeof method === 'string'){\n          console.log(this.keyConfig);\n          let code = method;\n\n          if(Number.isNaN(parseInt(code))){\n            // need to convert char\n            let _code = KeyCodeMap[code];\n            if(_code){\n              code = _code;\n            } else {\n              console.warn('There is no mapping for: ', method);\n              continue;\n            }\n          }\n\n          let arr = this.keyConfig[code];\n\n          if(arr.length === 1){\n            this[key] = arr[0].method\n          } else {\n            console.warn('multiple entries per keycode is not supported at this yet.', key, arr, method);\n          }\n        }\n      }\n    }\n  }\n\n  start(){\n    return null;\n  }\n\n  select(){\n    return null;\n  }\n\n  home(){  // ps/xb button\n    return null;\n  }\n\n  left(){\n    return null;\n  }\n\n  right(){\n    return null;\n  }\n\n  up(){\n    return null;\n  }\n\n  down(){\n    return null;\n  }\n\n  l1(){\n    return null;\n  }\n\n  l2(){\n    return null;\n  }\n\n  l3(){\n    return null;\n  }\n\n  r1(){\n    return null;\n  }\n\n  r2(){\n    return null;\n  }\n\n  r3(){\n    return null;\n  }\n\n  triangle(){\n    return null;\n  }\n\n  square(){\n    return null;\n  }\n\n  circle(){\n    return null;\n  }\n\n  cross(){\n    return null;\n  }\n\n  extra(){\n    return null;\n  }\n\n  leftStick(x,y,event){\n    return null;\n  }\n\n  rightStick(x,y,event){\n    return null;\n  }\n}\n// assign the InputEventListener class as a static property on InputController\n//  so it can be instantiated properly outside of this module\nInputController.InputEventListener = InputEventListener;\n\nclass GamepadButtonEvent {\n  constructor(gamepad,button,down) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.button = button;\n    this.down = down;\n    this.type = 'gamepadButtonEvent';\n    this.keyCode = button.index;\n    this.keyIdentifier = button.id;\n  }\n}\n\n\n\nclass GamepadAxisEvent {\n  constructor(gamepad,axis) {\n    this.gamepad = gamepad;\n    this.gamepadIndex = gamepad.index;\n    this.axis = axis;\n    this.stick = axis.stick;\n    this.keyCode = 200+axis.index;\n    this.keyIdentifier = axis.id;\n    this.values = axis.values;\n    this.type = 'gamepadAxisEvent';\n  }\n}\n\nGamepad.prototype.getValueByAxisId = function(axisId){\n  var gp = gamepadMaps[this.id];\n  var ix = gp.axes.indexOf(axisId);\n  if(ix>-1){\n    return this.axes[ix];\n  }\n  return;\n}\n\nexport default InputController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/inputController.js","\nlet stack = [];\nlet _listener;\n\nclass ScreenManager {\n  constructor() {\n\n  }\n\n  update(delta){\n    if(stack.length > 0){\n      let screen = stack[stack.length-1];\n      screen._step.apply(screen,arguments);\n\n      if(_listener){\n        if(screen._isFinished){\n          _listener.onScreenFinished(screen, this, screen._finalData);\n        }\n      }\n    }\n  }\n\n  addScreen(screen, replace){\n    if(replace){\n      stack.splice(stack.length-1,1,screen);\n    } else {\n      stack.push(screen);\n    }\n  }\n\n  getStack(){\n    return stack;\n  }\n\n  setEventListener(listener){\n    _listener = listener;\n  }\n\n  newListener(alsoSet){\n    var l = new ScreenEventListener();\n    if(alsoSet){\n      this.setEventListener(l);\n    }\n    return l;\n  }\n}\n\nclass ScreenEventListener {\n  onScreenFinished(){\n  }\n}\n\n\nexport default ScreenManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screenManager.js","import AssetManager from '../base/assetManager';\n\nconst RIGHT = 10;\nconst LEFT  = 11;\n\nclass BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n\n    if(typeof image === 'string'){\n      this.image = AssetManager.getImage(image);\n    } else {\n      this.image = image;\n    }\n\n    if(!this.image){\n      console.warn('Sprite created without an image', this);\n      return;\n    }\n\n    this.width = this.image.width;\n    this.height = this.image.height;\n\n    this.frames = [];\n    this.framesX = framesX;\n    this.framesY = framesY;\n    this.frameWidth = this.width / this.framesX;\n    this.frameHeight = this.height / this.framesY;\n    this.totalFrames = this.framesX * this.framesY;\n\n    this.scaleToWidth(1);\n\n    this.setOffset(offsetX || 0, offsetY || 0);\n\n    this.currentFrameIndex = 0;\n\n    this.direction = RIGHT;\n\n    this.parseSpriteSheet();\n\n    this.setFrame();\n  }\n\n  parseSpriteSheet(){\n    for(var y = 0; y < this.framesY; y++){\n      for(var x = 0; x < this.framesX; x++){\n        var frame = {};\n        frame.sx = x * this.frameWidth;\n        frame.sy = y * this.frameHeight;\n\n        this.frames.push(frame);\n      }\n    }\n\n\n\n    console.log(this.frames);\n  }\n\n  animate(){\n    this.currentFrameIndex = (this.currentFrameIndex + 1) % this.frames.length;\n    this.setFrame();\n  }\n\n  setFrame(frameIndex){\n    frameIndex = frameIndex===undefined ? this.currentFrameIndex : frameIndex;\n    this.frame = this.frames[frameIndex];\n  }\n\n  setPosition(pos){\n    this.pos = pos;\n  }\n\n  setOffset(offset, offsetY){\n    if(typeof offset === 'object'){\n      this.offset = offset;\n    } else if(offsetY !== undefined){\n      this.offset = {\n        x: offset,\n        y: offsetY\n      }\n    }\n  }\n\n  setUseShadow(use){\n    this.useShadow = use;\n  }\n\n  setDirection(dir){\n    this.direction = dir;\n  }\n\n  scaleToWidth(w){\n    var h = w / this.frameWidth;\n    this.drawWidth = w;\n    this.drawHeight = h * this.frameHeight;\n  }\n\n  scaleToHeight(h){\n    var w = h / this.frameHeight;\n    this.drawWidth = w * this.frameWidth;\n    this.drawHeight = h;\n  }\n\n  scale(scale){\n    this.drawWidth *= scale;\n    this.drawHeight *= scale;\n  }\n\n  draw(ctx){\n\n    ctx.save();\n    if(this.direction === RIGHT){\n      ctx.scale(1,-1); // flip the y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(this.pos.x,-this.pos.y);\n    } else {\n      ctx.scale(-1,-1); // flip the x & y\n      ctx.translate(-this.offset.x,-this.offset.y); //  [ -(w/2) , -(?) ]\n      ctx.translate(-this.pos.x,-this.pos.y);\n    }\n\n    if(this.useShadow){\n      ctx.shadowColor = 'black';\n      ctx.shadowBlur = 20;\n      ctx.shadowOffsetX = 5;\n      ctx.shadowOffsetY = 10;\n    }\n\n    ctx.drawImage(this.image, this.frame.sx, this.frame.sy, this.frameWidth, this.frameHeight, 0, 0, this.drawWidth, this.drawHeight);\n\n    ctx.restore();\n  }\n}\n\nexport default BaseSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/BaseSprite.js","import HUDElement from './HUDElement'\n\nconst valid_positions_x = ['center', 'left', 'right'];\nconst valid_positions_y = ['center', 'top', 'bottom'];\n\nexport default class Dialog extends HUDElement {\n  constructor({\n    // basic info, position and dimensions\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n\n    // used for calc based positioning\n    position = '',\n    positionX = '',\n    positionY = '',\n    offset = {x:0,y:0},\n    offsetX = 0,\n    offsetY = 0,\n\n    // basic color info, background and text colors\n    backgroundColor = 'black',\n    textColor = 'white',\n    title = '',\n\n    // allow for instant show when added\n    visible = false,\n\n    // border info\n    borderColor = 'blue',\n    borderWidth = 0,\n\n  } = {}) {\n    super()\n\n    this._x = x;\n    this._y = y;\n    this.width = width;\n    this.height = height;\n    this.backgroundColor = backgroundColor;\n\n    // text vars\n    this.textColor = textColor;\n    this.title =  title;\n\n    // calc positioning setup\n    this.__calcPosition({position, positionX, positionY, offset, offsetX, offsetY});\n\n    if(visible){\n      this.show();\n    }\n\n    this.borderColor = borderColor;\n    this.borderWidth = borderWidth;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    let pos = this.getPosition(ctx);\n\n    // draw border\n    this._drawBorder(ctx, pos);\n    // draw the main background rect\n    this._drawBackground(ctx, pos);\n\n    // draw the title\n    ctx.save();\n    ctx.fillStyle = this.textColor;\n    ctx.font = '22px serif';\n    ctx.fillText(this.title, pos.x + 10, pos.y + 22 + 10);\n    ctx.restore();\n\n    ctx.restore();\n  }\n\n  _drawBorder(ctx, pos){\n    if(this.borderWidth > 0){\n      let bw = this.borderWidth - 1;\n      // draw the border just outside the normal dimensions\n      ctx.beginPath();\n      ctx.strokeStyle = this.borderColor;\n      ctx.lineWidth = this.borderWidth;\n      ctx.moveTo(pos.x-bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y-bw);\n      ctx.lineTo(pos.x+this.width+bw, pos.y+this.height+bw);\n      ctx.lineTo(pos.x-bw, pos.y+this.height+bw);\n      ctx.closePath();\n      ctx.stroke();\n    }\n  }\n\n  _drawBackground(ctx, pos){\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(pos.x, pos.y, this.width, this.height);\n  }\n\n  show(){\n    this.visible = true;\n  }\n  hide(){\n    this.visible = false;\n  }\n  toggle(){\n    if(this.visible){\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  getPosition(ctx){\n    let position = {x: 0, y: 0}\n    if(this._positionX && this._positionY && ctx){\n      let c_width = ctx.canvas.width;\n      let c_height = ctx.canvas.height;\n\n      let x = this.__getXfromPositionX.call(this, this._positionX, c_width)\n      let y = this.__getYfromPositionY.call(this, this._positionY, c_height)\n\n      position = {x,y};\n    } else if(!ctx) {\n      console.warn(\"Canvas context was not passed into 'getPosition'.\");\n    } else {\n      position = {x: this._x, y: this._y};\n    }\n\n    this.position = position;\n    return this.position;\n  }\n\n  /** Helper Methods **/\n\n  __validatePositionX(posX){\n    if(valid_positions_x.indexOf(posX) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n    return false\n  }\n\n  __validatePositionY(posY){\n    if(valid_positions_y.indexOf(posY) > -1){\n      return true;\n    }\n    console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n    return false;\n  }\n\n  __getXfromPositionX(posX, c_width){\n    switch (posX) {\n      case 'center':\n        return (c_width/2) - (this.width/2) + this._offsetX;\n      case 'left':\n        return this._offsetX;\n      case 'right':\n        return (c_width) - (this.width) + this._offsetX;\n        break;\n      default:\n        console.warn('Unknown value for position x: ', posX, '. The valid positions are: ', valid_positions_x);\n        return 0;\n    }\n  }\n\n  __getYfromPositionY(posY, c_height){\n    switch (posY) {\n      case 'center':\n        return (c_height/2) - (this.height/2) + this._offsetY;\n      case 'top':\n        return this._offsetY;\n      case 'bottom':\n        return (c_height) - (this.height) + this._offsetY;\n        break;\n      default:\n        console.warn('Unknown value for position y: ', posY, '. The valid positions are: ', valid_positions_y);\n        return 0;\n    }\n  }\n\n  __calcPosition({position, positionX, positionY, offset, offsetX, offsetY}){\n    if(position){\n      let positions = position.split(' ');\n      if(positions.length == 1 && positions[0] === 'center'){\n        positionX = positionY = positions[0];\n      } else if(positions.length == 2 && this.__validatePositionX(positions[0]) && this.__validatePositionY(positions[1])){\n        positionX = positions[0];\n        positionY = positions[1];\n      }\n    }\n    // should have positionX & positionY, either from above logic or as param\n    if(positionX != null && positionY != null){\n      this._positionX = positionX;\n      this._positionY = positionY;\n    }\n\n    if(offset != null && offset.hasOwnProperty('x') && offset.hasOwnProperty('y')){\n      offsetX = offset.x;\n      offsetY = offset.y;\n    }\n\n    // should have offsetX & offsetY, either from above logic or as param\n    if(offsetX != null && offsetY != null){\n      this._offsetX = offsetX;\n      this._offsetY = offsetY;\n    }\n  }\n\n  /** Getters and Setters **/\n  get offsetX(){\n    return this._offsetX;\n  }\n  set offsetX(x){\n    this._offsetX = x;\n  }\n  get offsetY(){\n    return this._offsetY;\n  }\n  set offsetY(y){\n    this._offsetY = y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Dialog.js","import Canvas from '../canvas/canvas';\nimport Camera from '../base/camera';\nimport Util from '../util/util';\nimport ScreenManager from '../screen/screenManager';\nimport Ludic from './ludic';\nimport InputController from '../input/inputController';\n\nexport default class LudicApp {\n  constructor(config) {\n    Util.setConfig(config);\n    Ludic.config = config;\n    Ludic.canvas = new Canvas();\n    Ludic.context = Ludic.canvas.getContext();\n    Ludic.camera = new Camera(Ludic.canvas);\n    Ludic.screenManager = new ScreenManager();\n    Ludic.input = new InputController(Ludic.canvas, Ludic.camera);\n    Ludic.util = Util;\n\n    //Put Ludic on the window in devmode\n    if(Ludic.devmode){\n      window.Ludic = Ludic;\n    }\n\n    this.running = false;\n    this.lastTime = Date.now();\n\n    this._requestAnimFrame = (()=>{\n      return  window.requestAnimationFrame       ||\n              window.webkitRequestAnimationFrame ||\n              window.mozRequestAnimationFrame    ||\n              window.oRequestAnimationFrame      ||\n              window.msRequestAnimationFrame     ||\n              (function(){\n                console.warn('LudicApp: falling back to basic requestAnimationFrame');\n                return false;\n              })()                               ||\n              function( callback ){\n                window.setTimeout(callback, 1000 / 60);\n              };\n    })();\n\n    // do some binding\n    this._requestAnimFrame = this._requestAnimFrame.bind(window);\n    this._animate = this._animate.bind(this);\n  }\n\n  update(delta) {\n  }\n\n  _animate(time) {\n    if(this.running){\n      this._requestAnimFrame(this._animate);\n\n      var delta = (time - this.lastTime) / 1000;\n      this.lastTime = Ludic._time = time;\n\n      if(!Number.isNaN(delta)){\n        Ludic.context.save();\n        this.update(delta,time);\n        Ludic.context.restore();\n      }\n    }\n  }\n\n  pause() {\n    this.running = !this.running;\n    if (this.running)\n      this._animate();\n  }\n\n  run(){\n    this.running = true;\n    this._animate();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/app/LudicApp.js","\nvar timeTotal = 0;\nvar averageArray = [];\nvar period = 5;\nvar average;\n\nonmessage = function(event){\n  timeTotal += event.data;\n\n  averageArray.push(event.data);\n\n  if(averageArray.length>period){\n    timeTotal -= averageArray.shift();\n    average = timeTotal / period;\n    // return 1 / average;\n    postMessage(1 / average);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/fps.js","Path2D.rect = function(...args){\n  let p = new Path2D();\n  // .rect(x, y, width, height)\n  p.rect(...args);\n  return p;\n}\nPath2D.arc = function(...args){\n  let p = new Path2D();\n  // .arc(x, y, radius, startAngle, endAngle, anticlockwise)\n  p.arc(...args);\n  return p;\n}\nPath2D.ellipse = function(...args){\n  let p = new Path2D();\n  // .ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n  p.ellipse(...args);\n  return p;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/patches/Path2D.js","export default class Screen {\n  constructor(camera, options) {\n    this.camera = camera;\n    this.options = options || {};\n  }\n\n  _step(ctx, delta){\n    if(!this._isFinished){\n      this.update.apply(this,arguments);\n    }\n  }\n\n  update(ctx, delta){\n  }\n\n  finish(data){\n    if(!this._isFinished){\n      this.onDestroy();\n      this._finalData = data || {};\n      this._isFinished = true;\n    }\n  }\n\n  onDestroy(){\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/screen/screen.js","\nimport BaseSprite from './BaseSprite';\n\nclass MultiSprite extends BaseSprite {\n  constructor(image, framesX, framesY, offsetX, offsetY) {\n    super(image, framesX, framesY, offsetX, offsetY);\n\n  }\n\n  createSlice(name, start, count, scale){\n    var slice = {};\n\n    slice.ix = 0;\n    slice._ix = 0;\n    slice.start = start;\n    slice.end = start+count;\n    slice.scale = scale || 1;\n\n    slice.name = name;\n    slice.frames = this.frames.slice(start, slice.end);\n\n    console.log(slice);\n\n    this.slices[name] = slice;\n  }\n\n  createState(name, frameIndex, sliceName){\n    sliceName = sliceName || 'default';\n\n    var state = {};\n\n    state.name = name;\n    state.ix = frameIndex;\n    state.sliceName = sliceName;\n\n    this.states[name] = state;\n  }\n\n  parseSpriteSheet(){\n    this.slices = this.slices || {};\n    this.states = this.states || {};\n    super.parseSpriteSheet.apply(this,arguments);\n    var slice = {\n      ix: 0,\n      start: 0,\n      end: this.frames.length-1,\n      name: 'default',\n      frames: this.frames\n    };\n\n    this.slices[slice.name] = slice;\n    this.setSlice(slice.name);\n  }\n\n  setSlice(name){\n    this.slice = this.slices[name];\n  }\n\n  animate(sliceName, optScale){\n    if(sliceName){\n      this.setSlice(sliceName);\n    }\n\n    var scale = optScale || this.slice.scale,\n        fl = this.slice.frames.length,\n        df = fl * scale,\n        _ix = this.slice._ix++;\n\n    this.slice.ix = Math.floor( ((_ix) % (df)) / scale);\n    if(_ix >= df){\n      this.slice._ix = 1;\n    }\n\n    this.setFrame();\n  }\n\n  setFrame(frameIndex, sliceName){\n    frameIndex = frameIndex===undefined ? this.slice.ix : frameIndex;\n    if(sliceName){\n      this.frame = this.slices[sliceName].frames[frameIndex];\n    } else {\n      this.frame = this.slice.frames[frameIndex];\n    }\n  }\n\n  setState(name){\n    var state = this.states[name];\n    this.setFrame(state.ix, state.sliceName);\n  }\n}\n\nexport default MultiSprite;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite/MultiSprite.js","let axesLength = 100;\n\nexport default class HUD {\n  constructor(camera) {\n    this.camera = camera;\n    this.ctx = this.camera.context;\n\n    this.$refs = {};\n    this.elements = [];\n  }\n\n  update(delta){\n    this.ctx.save();\n    this.camera.resetTransform(this.ctx);\n\n    // draw the axis for the hud system\n    this.drawAxes(delta);\n\n    for(let el of this.elements){\n      if(el.visible){\n        el.render(delta, this.ctx);\n      }\n    }\n\n    this.ctx.restore();\n  }\n\n  drawAxes(delta){\n    this.ctx.save();\n    // this is to allow the axes to be seen\n    this.ctx.translate(this.ctx.lineWidth,this.ctx.lineWidth)\n    this.ctx.strokeStyle = 'rgb(192,0,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(axesLength, 0);\n    this.ctx.stroke();\n    this.ctx.strokeStyle = 'rgb(0,192,0)';\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, 0);\n    this.ctx.lineTo(0, axesLength);\n    this.ctx.stroke();\n    this.ctx.restore();\n  }\n\n  addElement(element, ref){\n    this.elements.push(element);\n    if(ref){\n      if(!this.$refs.hasOwnProperty(ref)){\n        this.$refs[ref] = element;\n      } else {\n        console.warn(`Ref \"${ref}\" is already taken`);\n      }\n    }\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Hud.js","import Dialog from './Dialog'\nimport Ludic from '../app/ludic'\n\nexport default class MenuDialog extends Dialog {\n  constructor(options) {\n    super(options)\n\n    this.menuItems = [];\n\n  }\n\n  render(delta, ctx){\n    super.render(delta, ctx);\n\n    // render the menu items\n    ctx.save();\n    ctx.translate(this.position.x, this.position.y);\n    this.menuItems.forEach((item, index) => {\n      item.render(delta,ctx,index);\n    });\n    ctx.restore();\n  }\n\n  addMenuItem(item){\n    if(item instanceof MenuDialog.MenuItem){\n      this.menuItems.push(item);\n    } else {\n      console.warn(\"Parameter needs to be of type MenuDialog.MenuItem\");\n    }\n  }\n\n  show(){\n    super.show();\n    // take input control\n    this.input = Ludic.input.newEventListener({\n      stopPropagation: true,\n      keyConfig: {\n        'w': 'up',\n        's': 'down',\n        'esc.once.down': 'start'\n      },\n      methods: {\n        up: this.selectPreviousItem,\n        down: this.selectNextItem,\n        start: this.toggleMenuOpen\n      }\n    }, this, true)\n\n    this.selectedItemIndex = 0;\n    this.selectItem(this.selectedItemIndex);\n  }\n\n  hide(){\n    super.hide();\n    Ludic.input.removeEventListener(this.input);\n  }\n\n  selectItem(index){\n    if(this.selectedItem){\n      this.selectedItem.deselect();\n    }\n    this.selectedItem = this.menuItems[index];\n    this.selectedItem.select();\n  }\n\n  selectNextItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem(++this.selectedItemIndex%this.menuItems.length);\n      // this.selectedItemIndex++;\n    }\n  }\n  selectPreviousItem(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.selectItem((this.menuItems.length-1)-(++this.selectedItemIndex%this.menuItems.length));\n      // this.selectedItemIndex++;\n    }\n  }\n\n  toggleMenuOpen(keyDown, e){\n    if(keyDown && !e.button.lastState.pressed){\n      this.toggle();\n    }\n  }\n}\n\nMenuDialog.MenuItem = class MenuItem {\n  constructor(text) {\n    this.text = text;\n  }\n\n  render(delta, ctx, index){\n    ctx.save();\n    ctx.fillStyle = this.selected ? 'red' : 'white';\n    ctx.font = '22px serif';\n    ctx.fillText(this.text, 10, 59 + (index*27)); // y = fontSize + 10 + distance from title = 22+10+27\n    ctx.restore();\n  }\n\n  select(){\n    this.selected = true;\n  }\n\n  deselect(){\n    this.selected = false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/MenuDialog.js","import HUDElement from './HUDElement'\n\nexport default class Text extends HUDElement{\n  constructor(text, x, y, {\n    // default options for text\n    fontFamily = 'serif',\n    fontSize = 12,\n    fontSizeUnit = 'px',\n    color = 'black',\n    drawStyle = 'fill',\n\n    adjustOrigin = true,\n    visible = true\n  } = {}) {\n    super();\n\n    this.visible = true;\n\n    this._adjustOrigin = true;\n    this.drawStyle = drawStyle;\n\n    this.fontFamily = fontFamily;\n    this.setFontSize(fontSize, fontSizeUnit);\n\n    // set the main attrs\n    this.text = text;\n    this.setPosition(x,y);\n    this.color = color;\n  }\n\n  render(delta, ctx){\n    ctx.save();\n    ctx.font = `${this.__fontSize} ${this.fontFamily}`;\n\n    if(this.drawStyle === 'stroke'){\n      ctx.strokeStyle = this.color;\n      ctx.strokeText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    } else {\n      ctx.fillStyle = this.color;\n      ctx.fillText(this.text, this.x, this._adjustOrigin ? this._y+this._fontSize : this._y);\n    }\n    ctx.restore();\n  }\n\n  setPosition(x, y){\n    // x can also be an object with .x/.y props\n    if(typeof x === 'object' && y == null){\n      let pos = x;\n      this.setPositionX(pos.x);\n      this.setPositionY(pos.y)\n    } else if(typeof x === 'number' && typeof y === 'number'){\n      this.setPositionX(x);\n      this.setPositionY(y);\n    } else {\n      console.warn('Unknown parameters passed into \"setPosition\"', arguments);\n    }\n  }\n\n  setPositionX(x){\n    this.x = x;\n  }\n  setPositionY(y){\n    this.y = y;\n  }\n\n  get y(){\n    return parseFloat(this._y);\n  }\n\n  set y(y){\n    y = parseFloat(y);\n    this._y = y;\n  }\n\n  set fontSize(fontSize){\n    this.setFontSize(fontSize);\n  }\n\n  get fontSize(){\n    return this._fontSize;\n  }\n\n  setFontSize(fontSize, unit = this.fontSizeUnit){\n    this.__fontSize = `${fontSize}${unit}`;\n    this._fontSize = parseFloat(fontSize);\n    this.fontSizeUnit = unit;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ui/Text.js","\nexport function classTypeOf(typeToCheck, type){\n  do {\n    if(typeToCheck === type){\n      return true;\n    }\n  } while ((typeToCheck = Object.getPrototypeOf(typeToCheck)) !== Function.prototype);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/utilities.js","import ImageAsset from './imageAsset';\n\nclass ImageAssetLoader {\n  constructor() {\n\n  }\n\n  load(name, url, type, options){\n    return new ImageAsset(name, url, type, options);;\n  }\n}\n\nexport default new ImageAssetLoader();\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/imageAssetLoader.js","/** alias mapping for keyboard keys **/\n\nexport default {\n\n  // special keys\n  'enter': '13',\n  'tab': '9',\n  'delete': '8',\n  'backspace': '8',\n  'space': '32',\n  'esc': '27',\n  'escape': '27',\n\n  // modifier keys\n  'control': '17',\n  'ctrl': '17',\n  'alt': '18',\n  'option': '18', // on mac\n  'caps': '20',\n  'caps-lock': '20',\n  'capslock': '20',\n\n  'windows': '91', // windows key\n  'left-command': '91', // left command key on mac layout\n  'left-cmd': '91',\n  'search': '91', // on chromebook\n  'menu': '93', // windows menu\n  'right-command': '93', // right command key on mac layout\n  'right-cmd': '93',\n\n  // arrow keys\n  'left' : '37',\n  'up' : '38',\n  'right' : '39',\n  'down' : '40',\n\n  // alpha keys, in order of keyboard qwerty layout\n  'q': '81',\n  'w': '87',\n  'e': '69',\n  'r': '82',\n  't': '84',\n  'y': '89',\n  'u': '85',\n  'i': '73',\n  'o': '79',\n  'p': '80',\n  'a' : '65',\n  's' : '83',\n  'd' : '68',\n  'f' : '70',\n  'g' : '71',\n  'h' : '72',\n  'j' : '74',\n  'k' : '75',\n  'l' : '76',\n  'z' : '90',\n  'x' : '88',\n  'c' : '67',\n  'v' : '86',\n  'b' : '66',\n  'n' : '78',\n  'm' : '77',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/input/keyCodeMap.js","\n// app\nexport {default as LudicApp} from './components/app/LudicApp'\nexport {default as default, default as Ludic} from './components/app/ludic'\n\n\n// base\nexport {default as Asset} from './components/base/asset'\nexport {default as AssetManager} from './components/base/assetManager'\nexport {default as Camera} from './components/base/camera'\nexport {default as fps} from './components/base/fps'\nexport {default as ImageAsset} from './components/base/imageAsset'\n\n// canvas\nexport {default as Canvas} from './components/canvas/canvas'\n\n// ein\nexport * from './components/ein'\n\n// input\nexport {default as InputController} from './components/input/inputController'\n\n// patches\n/*\n  patches that are prototype extensions, just import here\n  patches that require a parameter (monkey patch) export function name with prefix `Patch`\n    i.e. export {default as PatchFixSomeClass} from './components/patches/fixSomeClass'\n*/\nimport Path2D from './components/patches/Path2D';\n\n// screen\nexport {default as Screen} from './components/screen/screen'\nexport {default as ScreenManager} from './components/screen/screenManager'\n\n// sprite\nexport {default as BaseSprite} from './components/sprite/BaseSprite'\nexport {default as MultiSprite} from './components/sprite/MultiSprite'\n\n// ui\nexport {default as HUD} from './components/ui/Hud'\nexport {default as HUDElement} from './components/ui/HUDElement'\nexport {default as Text} from './components/ui/Text'\nexport {default as Dialog} from './components/ui/Dialog'\nexport {default as MenuDialog} from './components/ui/MenuDialog'\n\n// util\nexport {default as Util} from './components/util/util'\nexport * from './components/util/utilities'\n\n// vectors\nexport {default as Vector2} from './components/engine/Vector2'\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import EntityManager from './EntityManager.js'\nlet em = new EntityManager();\nexport {EntityManager as EntityManager, EntityManager as default, em as em}\nexport {default as BaseEntity} from './BaseEntity.js'\nexport {default as BaseSystem} from './BaseSystem.js'\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ein/index.js","export default class BaseEntity {\n  constructor(active = true, priority = -1){\n    this.active = active;\n    this.priority = priority;\n    this.needsDestroy = false;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ein/BaseEntity.js","export default class BaseSystem {\n  constructor(active = true, priority = -1, updateFunction){\n    this.active = active;\n    this.priority = priority;\n    this.updateFunction = updateFunction;\n    this.entities = [];\n  }\n\n  //Overide\n  onEntityAdded(manager){}\n\n  onEntityRemoved(manager){}\n\n  onSystemAddedTo(manager){\n    this.em = manager;\n  }\n\n  onSystemRemovedFrom(manager){}\n\n  //Overide\n  update(...args){\n    if(this.updateFunction){\n      this.updateFunction(...args);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ein/BaseSystem.js","export default class EntityManager {\n  constructor(){\n    this.entities = [];\n    this.systems = [];\n    this.listeners = {};\n    this.nextEntityId = 0;\n    this.nextSystemId = 0;\n  }\n\n  /* Entities */\n  addEntity(entity){\n    if(entity.hasOwnProperty(\"_id\")){\n      console.warn(\"EntityManager.addEntity(): Attempted to add an Entity with an existing _id \");\n      return false;\n    } else {\n      entity._id = this.nextEntityId++;\n      this.entities.push(entity);\n\n      //Notify Systems EntityAdded\n      this.systems.forEach(system => {\n        system.onEntityAdded(this);\n      });\n      return true;\n    }\n  }\n\n  removeEntity(entity){\n    let index = this.entities.indexOf(entity);\n    if(index > -1){\n      this.entities.splice(index, 1);\n\n      this.systems.forEach(system => {\n        system.onEntityRemoved(this);\n      });\n      return true;\n    } else {\n      console.warn(\"EntityManager.removeEntity(): Attempted to remove an Entity not in this.entities\");\n      return false;\n    }\n  }\n\n  getEnityById(id){\n    this.entities.forEach(entity => {\n      if(entity._id === id){\n        return entity;\n      }\n    });\n    console.warn(\"EntityManager.getEnityById(): Attempted to get an Entity not in this.entities\");\n  }\n\n  getEntitiesByProps(props){\n    let entities = [];\n    this.entities.forEach(entity => {\n      let hasAllProps = true;\n      props.forEach(prop => {\n        if(typeof prop === 'object'){\n          if(!entity.hasOwnProperty(prop.name) || entity[prop.name] !== prop.value){\n            hasAllProps = false;\n          }\n        } else if(typeof prop === 'string'){\n          if(!entity.hasOwnProperty(prop)){\n            hasAllProps = false;\n          }\n        }\n      });\n\n      if(hasAllProps){\n        entities.push(entity);\n      }\n    });\n    return entities;\n  }\n\n  getEntitiesByClassName(className){\n    let entities = [];\n    this.entities.forEach(entity => {\n      if(entity.constructor.name === className){\n        entities.push(entity);\n      }\n    });\n    return entities;\n  }\n\n  /* Systems */\n  addSystem(system){\n    if(system.hasOwnProperty(\"_id\")){\n      console.warn(\"EntityManager.addSystem(): Attempted to add a System with an existing _id \");\n      return false;\n    } else {\n      system._id = this.nextSystemId++;\n      this.systems.push(system);\n      system.onSystemAddedTo(this);\n      this._sortSystems();\n      return true;\n    }\n  }\n\n  removeSystem(system){\n    let index = this.systems.indexOf(system);\n    if(index > -1){\n      this.systems.splice(index, 1);\n      system.onSystemRemovedFrom(this);\n      this._sortSystems();\n      return true;\n    } else {\n      console.warn(\"EntityManager.removeSystem(): Attempted to remove a System not in this.systems\");\n      return false;\n    }\n  }\n\n  _sortSystems(){\n    this.systems.sort((a,b) => (a.priority - b.priority));\n  }\n\n  /* Events */\n  listenFor(eventName, listener, binder){\n    let group = this.listeners[eventName];\n    if(!group){\n      group = [];\n      this.listeners[eventName] = group;\n    }\n\n    let l = {};\n    l.eventName = eventName;\n    l.listener = listener;\n    l.binder = binder;\n\n    group.push(l);\n  }\n\n  notify(eventName){\n    let group = this.listeners[eventName];\n    if(group){\n      group.forEach((l)=>{\n        if('binder' in l){\n          l.listener.apply(l.binder,arguments);\n        } else {\n          l.listener.apply(l.listener, arguments);\n        }\n      });\n    }\n  }\n\n  removeListener(eventName, listener){\n    let group = this.listeners[eventName];\n\n    if(group){\n      for(let ix in group){\n        let l = group[ix];\n        if(l.listener===listener){\n          group.splice(ix,1);\n          break;\n        }\n      }\n    }\n  }\n\n\n  //Update\n  update(delta){\n    //Update all active systems\n    this.systems.forEach(system => {\n      if(system.active){\n        system.update(delta, this);\n      }\n    });\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ein/EntityManager.js"],"sourceRoot":""}